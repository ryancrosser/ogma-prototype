webpackJsonp([0],[,,,,function(e,t,n){"use strict";var i=n(3),r=n(31),o=n(27),s=n.n(o),a=n(26),d=n.n(a);i.a.use(r.a),t.a=new r.a({routes:[{path:"/",name:"Hello",component:s.a},{path:"/graph",name:"Graph",component:d.a}]})},,function(e,t){},function(e,t){},function(e,t,n){function i(e){n(22)}var r=n(2)(n(16),n(30),i,null,null);e.exports=r.exports},function(e,t,n){n(0).register({home:{width:24,height:24,viewBox:"0 0 24.00 24.00",data:'<path pid="0" d="M10 19.998v-6h4v6h5v-8h3l-10-9-10 9h3v8h5z"/>'}})},function(e,t,n){n(0).register({minus:{width:24,height:24,viewBox:"0 0 24.00 24.00",data:'<path pid="0" d="M19 12.998H5V11l14-.002v2z"/>'}})},function(e,t,n){n(0).register({"near-me":{width:24,height:24,viewBox:"0 0 24.00 24.00",data:'<path pid="0" d="M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z"/>'}})},function(e,t,n){n(0).register({plus:{width:24,height:24,viewBox:"0 0 24.00 24.00",data:'<path pid="0" d="M19 12.998h-6v6h-2v-6H5v-2h6v-6h2v6h6v2z"/>'}})},function(e,t,n){n(0).register({"rotate-left":{width:24,height:24,viewBox:"0 0 24.00 24.00",data:'<path pid="0" d="M13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93zM7.1 18.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.02-4.47L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47z"/>'}})},function(e,t,n){n(0).register({"rotate-right":{width:24,height:24,viewBox:"0 0 24.00 24.00",data:'<path pid="0" d="M16.89 15.48l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm6.93-6.9a7.906 7.906 0 0 0-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47m-2.36-5.45L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45z"/>'}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(5),o=n(0),s=n.n(o),a=n(8),d=n.n(a),u=n(4),l=n(7),h=(n.n(l),n(6));n.n(h);i.a.use(r.a),i.a.use(s.a),i.a.config.productionTip=!1,new i.a({el:"#app",router:u.a,template:"<App/>",components:{App:d.a}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(35),r=(n.n(i),n(19)),o=(n.n(r),n(9)),s=(n.n(o),n(11)),a=(n.n(s),n(12)),d=(n.n(a),n(10)),u=(n.n(d),n(13)),l=(n.n(u),n(14));n.n(l);window.dagre=r,t.default={data:function(){return{numNodes:50,numEdges:50,graphData:{},selectedNodes:[]}},mounted:function(){var e=this;this.graphData=this.randomGraph(this.numNodes,this.numEdges),this.ogma=new i({graph:this.graphData,container:"graph-container",plugins:["dagre"]}),this.ogma.events.bind("keyboard.keyDown",function(t){"shift"===t&&(e.ogma.keyboard.isPressed("shift")?e.ogma.lasso.start():e.ogma.lasso.stop())}),this.ogma.events.bind({"selection.nodesSelected":function(){e.selectedNodes=e.ogma.selection.nodes()}})},methods:{updateData:function(){this.ogma.graph.clear(),this.graphData=this.randomGraph(this.numNodes,this.numEdges),this.ogma.graph.addNodes(this.graphData.nodes),this.ogma.graph.addEdges(this.graphData.edges)},randomGraph:function(e,t){for(var n={nodes:[],edges:[]},i=0;i<e;i++)n.nodes.push({id:"n "+i,x:100*Math.random(),y:100*Math.random()});for(var r=0;r<t;r++)n.edges.push({id:"e "+r,source:"n "+(Math.random()*e|0),target:"n "+(Math.random()*e|0)});return n},setLayout:function(e){switch(e.toLowerCase()){case"concentric":this.selectedNodes&&1===this.selectedNodes.length?this.ogma.layouts.start("concentric",{centralNode:this.selectedNodes[0].id,allowOverlap:!1},{onEnd:this.zoomReset}):alert("You must only one node");break;case"grid":this.ogma.layouts.start("grid",{allowOverlap:!1},{onEnd:this.zoomReset});break;case"hierarchical":this.ogma.dagre.start({directed:!0,rankdir:"TB",duration:300,nodesep:30,ranksep:40},{onEnd:this.zoomReset})}},zoomReset:function(){var e=this.ogma.camera.angle,t=void 0;t=e>180?360-e:-1*e,this.ogma.camera.rotate(t,{duration:300}),this.ogma.locate.center({easing:"linear",duration:300})},zoomIn:function(){this.ogma.camera.zoomIn({duration:200})},zoomOut:function(){this.ogma.camera.zoomOut({duration:200})},locateRandomNode:function(){this.ogma.locate.nodes("n 0",{duration:600}),this.ogma.selection.addNodes(["n 0"])},locateRandomEdge:function(){this.ogma.locate.edges(["e 0"],{duration:600})},rotateLeft:function(){this.ogma.camera.rotate(Math.PI/2,{duration:600})},rotateRight:function(){this.ogma.camera.rotate(-Math.PI/2,{duration:600})},addNodes:function(){this.ogma.graph.addNodes({id:"n0"})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"hello",data:function(){return{msg:"Home Component"}}}},,function(e,t){},function(e,t){},function(e,t){},,,,function(e,t,n){function i(e){n(20)}var r=n(2)(n(17),n(28),i,null,null);e.exports=r.exports},function(e,t,n){function i(e){n(21)}var r=n(2)(n(18),n(29),i,null,null);e.exports=r.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{postition:"relative"}},[n("div",{staticClass:"action-container action-container__left"},[n("b-button-group",[n("b-dropdown",{attrs:{text:"Layout"}},[n("b-dropdown-item",{on:{click:function(t){t.preventDefault(),e.setLayout("concentric")}}},[e._v("Concentric")]),e._v(" "),n("b-dropdown-item",{on:{click:function(t){t.preventDefault(),e.setLayout("grid")}}},[e._v("Grid")]),e._v(" "),n("b-dropdown-item",{on:{click:function(t){t.preventDefault(),e.setLayout("hierarchical")}}},[e._v("Hierarchy")])],1),e._v(" "),n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.edit_data_modal",modifiers:{edit_data_modal:!0}}]},[e._v("Edit Data")])],1),e._v(" "),n("b-modal",{attrs:{id:"edit_data_modal",title:"Update Nodes and Edges"},on:{ok:e.updateData}},[n("form",{on:{submit:function(t){t.stopPropagation(),t.preventDefault(),e.updateData(t)}}},[n("b-form-input",{attrs:{type:"number",placeholder:"Enter number of nodes"},model:{value:e.numNodes,callback:function(t){e.numNodes=t},expression:"numNodes"}}),e._v(" "),n("b-form-input",{attrs:{type:"number",placeholder:"Enter number of edges"},model:{value:e.numEdges,callback:function(t){e.numEdges=t},expression:"numEdges"}})],1)])],1),e._v(" "),n("div",{staticClass:"action-container action-container__right"},[n("b-button-group",{attrs:{vertical:""}},[n("b-button",{attrs:{variant:"default",title:"Zoom Reset"},on:{click:function(t){e.zoomReset()}}},[n("svgicon",{attrs:{icon:"home",width:"22",height:"18"}})],1),e._v(" "),n("div",{staticClass:"divider"}),e._v(" "),n("b-button",{attrs:{variant:"default",title:"Zoom In"},on:{click:function(t){e.zoomIn()}}},[n("svgicon",{attrs:{icon:"plus",width:"22",height:"18"}})],1),e._v(" "),n("b-button",{attrs:{variant:"default",title:"Zoom In"},on:{click:function(t){e.zoomOut()}}},[n("svgicon",{attrs:{icon:"minus",width:"22",height:"18"}})],1),e._v(" "),n("div",{staticClass:"divider"}),e._v(" "),n("b-button",{attrs:{variant:"default",title:"Locaterandom node"},on:{click:function(t){e.locateRandomNode()}}},[n("svgicon",{attrs:{icon:"near-me",width:"22",height:"18"}})],1),e._v(" "),n("div",{staticClass:"divider"}),e._v(" "),n("b-button",{attrs:{variant:"default",title:"Rotate Left"},on:{click:function(t){e.rotateLeft()}}},[n("svgicon",{attrs:{icon:"rotate-left",width:"22",height:"18"}})],1),e._v(" "),n("b-button",{attrs:{variant:"default",title:"Rotate Right"},on:{click:function(t){e.rotateRight()}}},[n("svgicon",{attrs:{icon:"rotate-right",width:"22",height:"18"}})],1)],1)],1),e._v(" "),n("div",{attrs:{id:"graph-container"}}),e._v(" "),e.graphData.nodes?n("div",{staticClass:"graph-info"},[e.graphData.nodes.length?n("div",[e._v("Nodes: "+e._s(e.graphData.nodes.length))]):e._e(),e._v(" "),e.graphData.edges.length?n("div",[e._v("Edges: "+e._s(e.graphData.edges.length))]):e._e()]):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v(e._s(e.msg))])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-navbar",{attrs:{toggleable:"",type:"inverse",variant:"inverse"}},[n("b-link",{staticClass:"navbar-brand",attrs:{to:"#"}},[n("span",[e._v("Ogma Test")])]),e._v(" "),n("b-nav",{attrs:{"is-nav-bar":""}},[n("b-nav-item",{attrs:{to:"/",exact:""}},[e._v("Home")]),e._v(" "),n("b-nav-item",{attrs:{to:"/graph"}},[e._v("Graph")])],1)],1),e._v(" "),n("main",{staticStyle:{height:"calc(100vh - 72px)","margin-top":"0"}},[n("router-view")],1)],1)},staticRenderFns:[]}},,,,,function(module,exports,__webpack_require__){"use strict";(function(setImmediate,global,module){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function $isObj(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function $rm(e,t){var n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)}function $has(e,t){return-1!==e.indexOf(t)}function $time(){return $global.Ogma.utils.getTime()}function $log(e){console.log($time()+" "+e)}function $info(e){console.info($time()+" "+e)}function $warn(e){console.warn($time()+" "+e)}function $error(e){console.error($time()+" "+e)}function $or(e,t){return void 0===e?t:e}function $iter(e,t){for(var n=Object.keys(e),i=0,r=n.length;i<r;++i){var o=n[i];t(e[o],o)}}function $dual(e){return{nodes:e?new e:Object.create(null),edges:e?new e:Object.create(null),fetch:function(e){return e?this.nodes:this.edges}}}function $opt(e,t,n){return $or(e,n)}function $isDef(e){return void 0!==e}function $source(e){for(var t=e.__source;t.parent;)t=t.parent;return t}function $target(e){for(var t=e.__target;t.parent;)t=t.parent;return t}function $C(e,t){var n=$global.Ogma.constants[e];if(!n)throw new Error('constant type "'+e+'" does not exist');var i=n[t];if(void 0===i)throw new Error('constant "'+e+"."+t+'" does not exist');return i}function $kill(e){$global.Ogma.utils.kill(e)}var $global={};(function(){Math.log2||(Math.log2=function(e){return Math.log(e)/Math.log(2)})})(),function(){function e(e){for(var t=this.length,n=0;n<t;++n)this[n]=e}function t(e,t){if(null===this)throw new TypeError("this is null or not defined");var n=Object(this),i=n.length>>>0,r=e>>0,o=r<0?Math.max(i+r,0):Math.min(r,i),s=t>>0,a=s<0?Math.max(i+s,0):Math.min(s,i),d=arguments[2],u=void 0===d?i:d>>0,l=u<0?Math.max(i+u,0):Math.min(u,i),h=Math.min(l-a,i-o),c=1;for(a<o&&o<a+h&&(c=-1,a+=h-1,o+=h-1);h>0;)a in n?n[o]=n[a]:delete n[o],a+=c,o+=c,h--;return n}function n(e){var t,n,i=Object(this),r=i.length>>>0;if(0===r)return-1;for(t=r-1,arguments.length>1&&(t=Number(arguments[1]),t!==t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),n=t>=0?Math.min(t,r-1):r-Math.abs(t);n>=0;n--)if(n in i&&i[n]===e)return n;return-1}for(var i=[Int32Array,Int16Array,Int8Array,Float32Array,Float64Array,Array],r=["join","slice","reverse","forEach","map","reduce","indexOf","sort","filter","every"],o=0,s=i.length;o<s;++o){var a=i[o].prototype;if(a.fill||(a.fill=e),a.copyWithin||(a.copyWithin=t),a.lastIndexOf||(a.lastIndexOf=n),o<s-1)for(var d=0,u=r.length;d<u;d++){var l=r[d];a[l]||(a[l]=Array.prototype[l])}}}(),function(){String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.lastIndexOf(e,t);return-1!==i&&i===t})}(),function(){function e(e){return"number"==typeof e&&isNaN(e)}Number.isNaN||(Number.isNaN=e)}(),function(e){function t(){}function n(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!==_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function r(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?o:s)(t.promise,e._value);var i;try{i=n(e._value)}catch(e){return void s(t.promise,e)}o(t.promise,i)}))}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===(void 0===t?"undefined":_typeof(t))||"function"==typeof t)){var r=t.then;if(t instanceof i)return e._state=3,e._value=t,void a(e);if("function"==typeof r)return void u(n(r,t),e)}e._state=1,e._value=t,a(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)r(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}var l=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,n){var i=new this.constructor(t);return r(this,new d(e,n,i)),i},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function i(o,s){try{if(s&&("object"===(void 0===s?"undefined":_typeof(s))||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){i(o,e)},n)}t[o]=s,0==--r&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var r=t.length,o=0;o<t.length;o++)i(o,t[o])})},i.resolve=function(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},i._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){l(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},"object"!==(void 0===global?"undefined":_typeof(global))||global.Promise||(global.exports=i),"object"!==("undefined"==typeof window?"undefined":_typeof(window))||window.Promise||(window.Promise=i)}(),function(){function e(e){for(var n=0;n<e.length;++n){var i=e[n],r=o.modules[i];if(!r)throw new Error("module "+i+" does not exist");for(var s=r.dependencies||[],a=0;a<s.length;++a)t(e,s[a])}return e}function t(e,t){-1===e.indexOf(t)&&e.push(t)}function n(e){for(var t=[];0!==e.length;){for(var n=null,i=0;i<e.length;++i){for(var r=e[i],s=o.modules[r].dependencies||[],a=!0,d=0;d<s.length;++d)if(-1===t.indexOf(s[d])){a=!1;break}if(a){n=r,t.push(r),e.splice(i,1);break}}if(!n)throw new Error("Unable to resolve dependencies. Remaining modules: "+JSON.stringify(e))}return t}function i(e){for(var t=0;t<e.length;++t)for(var n=o.modules[e[t]].dependencies||[],i=0;i<n.length;++i)if(!o.modules[n[i]])throw new Error(e[t]+": invalid dependency "+n[i])}function r(e,t){for(var n=0;n<e.length;++n){var i=e[n];if(!o.modules[i]||t!==!o.modules[i].isPlugin)throw new Error((t?"core module":"plugin")+" "+i+" does not exist")}}var o=function t(o){o=o||{};var s=o.core?"string"==typeof o.core?[o.core]:o.core.slice():Object.keys(t.modules).filter(function(e){return!t.modules[e].isPlugin}),a=("all"===o.plugins?Object.keys(t.modules).filter(function(e){return t.modules[e].isPlugin}):(o.plugins||[]).slice()).sort();s=e(s).sort();var d=s.concat(a);r(s,!0),r(a,!1),i(d);var u=n(d);this.modules=u.slice();for(var l=0;l<u.length;++l){var h=u[l];this[h]=new t.modules[h](this,o)}for(o.onStart&&o.onStart(this,o),l=0;l<u.length;++l){var c=u[l];t.modules[c].onStart&&t.modules[c].onStart(this[c],o)}};o.prototype.clear=function(){for(var e=this.modules.length-1;e>=0;--e){var t=this.modules[e];o.modules[t].onClear&&o.modules[t].onClear(this[t])}},o.prototype.kill=function(){for(var e=this.modules.length-1;e>=0;--e){var t=this.modules[e],n=this[t],i=o.modules[t];i.onKill&&i.onKill(n),$kill(n),this[t]=void 0}},o.globals={};var s=!1;"object"===("undefined"==typeof window?"undefined":_typeof(window))&&"function"==typeof window.define&&window.define.amd&&(window.define(function(){return o}),s=!0),"object"===_typeof(exports)&&(module.exports=o,s=!0),s||"object"!==("undefined"==typeof window?"undefined":_typeof(window))||(window.Ogma=o),o.default=o,$global.Ogma=o}.call(),function(){var e=$global.Ogma,t=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=n;return t},n=["hover","zoom","panning","rotation","gesture","drag","selection","showTooltip","hideTooltip","creation","lasso"],i=["floor","hover","active","highlight","pulse","drag"],r=["edgeHalos","nodeHaloStrokes","nodeHalos","edgeShapes","edgeOuterStrokes","edgeOutlines","edgeTextBackground","edgeText","nodeOuterStrokes","nodeInnerStrokes","nodeShapes","nodePieCharts","nodeIcons","nodeImages","nodeBadgeStroke","nodeBadge","nodeBadgeImage","nodeBadgeText","nodeOutlines","nodeTextBackground","nodeText","edgePulses","nodePulses","legendBorders","legendBackground","legendContent"];e.constants={interaction:t(n),layer:t(i),subLayer:t(r),MAX_POW:22,EPSILON:1/Math.pow(2,22)}}(),function(){var e=$global.Ogma;e.libraries=Object.create(null);var t={},n={},i=function(){return null};"object"===(void 0===global?"undefined":_typeof(global))&&(t=global),"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(n=window),"object"===_typeof(module)&&"function"==typeof module.require?i=function(e){try{return module.require(e)}catch(e){return null}}:"function"==typeof t.require&&(i=function(e){try{return t.require(e)}catch(e){return null}}),e.require=function(r,o){o=$or(o,{});var s=o.variable,a=o.fallback,d=$or(o.throwOnError,!0),u=null;if(!u&&r&&(u=e.libraries[r]),!u&&s&&(u=e.libraries[s]),!u&&r&&(u=i(r)),!u&&s&&(u=n[s]),!u&&s&&(u=t[s]),u||"function"!=typeof a||(u=a()),!u&&a&&(u=a),!u&&d){var l='unable to find module "'+r+'"'+(s?"or global variable globalVarName":"")+"; make sure one of these statements is true:\n";throw l+="- require('"+r+"') returns the right library\n",l+="- Ogma.libraries['"+r+"'] is set to the right library\n",s&&(l+="- window['"+s+"'] is set to the right library"),new Error(l)}return u}}(),function(e){var t=$global.Ogma;t.utils={},t.utils.closestValue=function(e,t,n){for(var i=Math.abs(t-e[0]),r=0,o=1;o<e.length;++o){var s=Math.abs(t-e[o]);s<i&&(i=s,r=o)}return n?r:e[r]},t.utils.computeRange=function(e,t,n){if(1===n)return[e];for(var i=(t-e)/(n-1),r=new Array(n),o=0;o<n;++o)r[o]=e+i*o;return r};t.utils.findFunctionParameter=function(e,t,n,i,r){for(var o=e(n)<=e(i),s=n,a=i,d=0;d<100;++d){var u=(s+a)/2,l=e(u);if(Math.abs(l-t)<=r)return u;l<t?o?s=u:a=u:o?a=u:s=u}return u},t.utils.upperPowerOf=function(e,t,n){for(var i=t;i<e||i<n;)i*=t;return i},t.utils.createCounter=function(){var e=0;return function(){return++e}},t.utils.convertToString=function(t){var n=void 0===t?"undefined":_typeof(t);return"string"===n?t:"function"===n||"number"===n||"boolean"===n?t.toString():null===t?"null":t===e?"undefined":JSON.stringify(t)},t.utils.throttle=function(e,t,n){var i,r,o,s;return 0===t?function(){e.apply(n,arguments)}:(s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){var o;return i?r=arguments:(o=e.apply(n,arguments),setTimeout(s,t),i=!0),o})}}.call(),function(e){function t(){this.objects=new Map,this.size=0}function n(){this.objects=Object.create(null),this.size=0}var i=$global.Ogma;if(t.prototype.set=function(e,t){this.objects.set("string"==typeof e?e:JSON.stringify(e),t),this.size=this.objects.size},t.prototype.get=function(e){return this.objects.get("string"==typeof e?e:JSON.stringify(e))},t.prototype.has=function(e){return this.objects.has("string"==typeof e?e:JSON.stringify(e))},t.prototype.clear=function(){this.objects.clear(),this.size=this.objects.size},t.prototype.forEach=function(e){this.objects.forEach(e)},t.prototype.delete=function(e){var t=this.objects.delete(e.toString());return this.size=this.objects.size,t},t.prototype.keyList=function(){if(Array.from)return Array.from(this.objects.keys());var e=[],t=this.objects.keys();if(t.next)for(var n=t.next();!n.done;n=t.next())e.push(n.value);else this.objects.forEach(function(t,n){e.push(n)});return e},t.prototype.values=function(){if(Array.from)return Array.from(this.objects.values());var e=[],t=this.objects.keys();if(t.next)for(var n=t.next();!n.done;n=t.next())e.push(n.value);else this.objects.forEach(function(t,n){e.push(n)});return e},n.prototype.set=function(e,t){void 0===this.objects[e]&&(this.size+=1),this.objects[e]=t},n.prototype.has=function(e){return void 0!==this.objects[e]},n.prototype.get=function(e){return this.objects[e]},n.prototype.clear=function(){this.objects=Object.create(null),this.size=0},n.prototype.forEach=function(e){for(var t=Object.keys(this.objects),n=0;n<t.length;++n){var i=t[n],r=this.objects[i];void 0!==r&&e(r,i)}},n.prototype.delete=function(t){return this.objects[t]!==e&&(this.size-=1,this.objects[t]=e,!0)},n.prototype.keyList=function(){for(var t=this.objects,n=Object.keys(t),i=n.length,r=[],o=0;o<i;++o){var s=n[o];t[s]!==e&&r.push(s)}return r},n.prototype.values=function(){for(var t=this.objects,n=Object.keys(t),i=n.length,r=[],o=0;o<i;++o){var s=n[o],a=t[s];a!==e&&r.push(a)}return r},"undefined"!=typeof Map&&void 0!==Map.prototype.keys&&void 0!==Map.prototype.values)try{(new Map).keys().next(),(new Map).values().next(),i.utils.Map=t}catch(e){i.utils.Map=n}else i.utils.Map=n;i.utils.OgmaMapES5=n,i.utils.OgmaMapES6=t}.call(),function(e){function t(e){if(this._set=Object.create(null),e)for(var t=0;t<e.length;++t)this._set[e[t]]=!0}function n(e){this._set=new Set(e)}var i=$global.Ogma;t.prototype.add=function(e){var t=this._set[e];return this._set[e]=!0,!t},t.prototype.remove=function(t){var n=this._set[t];return this._set[t]=e,n},t.prototype.delete=t.prototype.remove,t.prototype.has=function(e){return this._set[e]},t.prototype.values=function(){return Object.keys(this._set).filter(function(e){return e})},t.prototype.clear=function(){this._set=Object.create(null)},t.prototype.forEach=function(e){for(var t=Object.keys(this._set),n=0;n<t.length;++n){var i=t[n];this._set[i]&&e(i)}},n.prototype.add=function(e){return this._set.add(e)},n.prototype.remove=function(e){return this._set.delete(e)},n.prototype.delete=n.prototype.remove,n.prototype.has=function(e){return this._set.has(e)},n.prototype.values=function(){return Array.from(this._set)},n.prototype.clear=function(){this._set.clear()},n.prototype.forEach=function(e){this._set.forEach(e)},"undefined"!=typeof Set&&Set.values?i.utils.Set=n:i.utils.Set=t}.call(),function(e){function t(){if(a)return a;throw new Error('unable to use "document"; if you use Node JS install the "xmldom" package')}function n(e,t){this.data=e,this.type=t}var i=$global.Ogma,r=i.require("xmldom",{throwOnError:!1}),o=i.require("canvas",{throwOnError:!1}),s=null,a=null,d=null;"undefined"!=typeof XMLSerializer?s=XMLSerializer:r&&(s=r.XMLSerializer),"undefined"!=typeof document?a=document:r&&(a=(new r.DOMImplementation).createDocument()),i.utils.createXmlDocument=function(){if(a)return a.implementation.createDocument("","",null);throw new Error('unable to create XML document; if you use Node JS install the "xmldom" package')},i.utils.serializeXMLDocument=function(e){if(s)return(new s).serializeToString(e);throw new Error('unable to instantiate XMLSerializer; if you use Node JS install the "xmldom" package')},d=o?function(e,t){var n=new o(e,t);return n.style={},n}:"undefined"!=typeof document?function(e,t){var n=document.createElement("canvas");return i.utils.resizeElement(n,e,t),n}:function(){throw new Error('Unable to create a canvas element; if you run on Node make sure the "canvas" package is installed, as well as its dependencies')},i.utils.createCanvas=d,i.utils.pixelRatio=function(){return"undefined"!=typeof window&&window.devicePixelRatio||1},i.utils.dataUrlToBlob=function(e){var t,n,r,o=";base64,";if(-1==e.indexOf(o))return t=e.split(","),n=t[0].split(":")[1],r=decodeURIComponent(t[1]),i.utils.createBlob(r,n);t=e.split(o),n=t[0].split(":")[1],r=window.atob(t[1]);for(var s=r.length,a=new Uint8Array(s),d=0;d<s;++d)a[d]=r.charCodeAt(d);return i.utils.createBlob([a],n)},i.utils.createBlob=function(e,t){return"undefined"!=typeof Blob?new Blob(e,{type:t}):new n(e,t)},i.utils.isBlob=function(e){return"undefined"!=typeof Blob?e instanceof Blob||e instanceof n:e instanceof n},i.utils.download=function(e,t,n){if("undefined"==typeof window)return e;var r=null,o=null,s=null;if(window.Blob?(r="blob"===n?e:"dataURL"===n?i.utils.dataUrlToBlob(e):i.utils.createBlob([e],"text/xml"),o=window.URL.createObjectURL(r)):s="data:text/xml;charset=UTF-8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>')+encodeURIComponent(e),navigator.msSaveBlob)navigator.msSaveBlob(r,t);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(r,t);else{var a=document.createElement("a");a.setAttribute("href",window.Blob?o:s),a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a)}return o&&setTimeout(function(){window.URL.revokeObjectURL(o)},0),e};var u;i.utils.textWidth=function(e,t,n,i){return u.style.fontFamily=t,u.style.fontSize=n+"px",u.style.fontStyle="italic"===i?"italic":"normal",u.style.fontWeight="bold"===i?"bold":"normal",u.innerHTML=e,u.offsetWidth},i.utils.resizeElement=function(e,t,n){var r=i.utils.pixelRatio();e.width=t*r,e.height=n*r,e.style.width=t+"px",e.style.height=n+"px"},i.utils.createAndAppend=function(n,r,o,s,a){var d=t().createElement(r);if(o&&i.utils.forEach(o,function(t,n){t!==e&&d.setAttribute(n,t)}),void 0!==s||a){"[object Object]"===Object.prototype.toString.call(s)&&(s=JSON.stringify(s));var u=document.createTextNode(s);d.appendChild(u)}return n.appendChild(d),d},i.utils.setAttributes=function(t,n){i.utils.forEach(n,function(n,i){n!==e&&t.setAttribute(i,n)})},i.utils.createSvgElement=function(e,n){var r=t().createElementNS("http://www.w3.org/2000/svg",e);return r.style||(r.style={}),n&&i.utils.setAttributes(r,n),r},i.utils.bind=function(e,t,n,r){r=r||0;var o=i.utils.now(),s=0===r?n:function(e){var t=i.utils.now();t-o>r&&(n(e),o=t)};return e.addEventListener(t,s),{listener:s,elt:e,eventName:t}},i.utils.unbind=function(e){e.elt.removeEventListener(e.eventName,e.listener)},i.utils.getImage=function(e,t){if("undefined"==typeof Image)t(null);else{var n=new Image;n.src=e,n.onload=function(){t(n)},n.onerror=function(){t(null)}}}}.call(),function(e){function t(e,t){t=t||2;for(var n=Math.pow(10,t-1),i=e;n>1;)e<n&&(i="0"+i),n/=10;return i}var n=$global.Ogma;"undefined"!=typeof performance&&performance.now?n.utils.now=function(){return 0|performance.now()}:n.utils.now=function(){return Date.now()},n.utils.getDate=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,i=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),i+"-"+n+"-"+t},n.utils.getTime=function(){var e=new Date;return"["+t((e.getUTCHours()-(e.getTimezoneOffset()/60|0))%24)+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+":"+t(e.getUTCMilliseconds(),3)+"]"},n.utils.createDelayer=function(){var e=null;return{fire:function(t,n){e&&(clearTimeout(e),e=null),e=setTimeout(function(){e=null,t()},n)},stop:function(){e&&(clearTimeout(e),e=null)}}}}.call(),function(e){function t(e,t){e||(e=this.DEFAULT_ERROR_HANDLER),this.errorHandler=e,t||(t=e),this.bugHandler=t}var n=$global.Ogma,i={},r={};n.utils.isInteger=function(e){return e===+e&&e===(0|e)},n.utils.isNumber=function(e){return e===e&&"[object Number]"===Object.prototype.toString.call(e)},n.utils.isPositive=function(e){return"number"==typeof e&&e>0},n.utils.isObject=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e},n.utils.checkNumberArray=function(e,t,i,r){if(!(e instanceof Array)||e.length<t)throw new TypeError("invalid "+i+" array: "+JSON.stringify(e)+": expected array of size at least "+t);for(var o=0;o<e.length;++o)if(!n.utils[r?"isPositive":"isNumber"](e[o]))throw new TypeError("invalid "+i+" "+n.utils.stringify(e[o])+": expected positive number")};var o=new RegExp("^#[a-fA-F0-9]{6}$"),s=new RegExp("^#[a-fA-F0-9]{3}$");t.prototype={DEFAULT_ERROR_HANDLER:function(e){throw new Error(e)},_error:function(e,t){this.errorHandler('"'+e+'" '+t)},_bug:function(e){this.bugHandler(e)},nonEmpty:function(e,t){return this.string(e,t,!0)},string:function(t,n,i,r,o,s){this.exist(t,n),"string"!=typeof n&&this._error(t,"must be a string"),i&&""===n&&this._error(t,"must be a non-empty string"),r&&n.indexOf(" ")>-1&&this._error(t,"must not contain spaces"),o!==e&&n.length<o&&this._error(t,"must have at least "+o+" characters"),s!==e&&n.length>s&&this._error(t,"must have at most "+s+" characters")},stringOrNumber:function(e,t){"number"==typeof t&&isFinite(t)||"string"==typeof t||this._error(e,"must be a string or a number")},startsWith:function(e,t,n,i){this.string(e,t),0!==t.indexOf(n)&&this._error(e,'must start with "'+n+'"'),!1!==i&&t.length<=n.length&&this._error(e,'must be longer than "'+n+'"')},hexColor:function(e,t,n){this.string(e,t,!0),o.test(t)||!1!==n&&s.test(t)||this._error(e," #AAABBCC or #ABC")},exist:function(t,n){n===e&&this._error(t,"must not be undefined"),null===n&&this._error(t,"must not be null")},null:function(e,t){null!==t&&this._error(e,"must be null")},object:function(e,t){this.exist(e,t),"object"!==(void 0===t?"undefined":_typeof(t))&&this._error(e,"must be an object")},array:function(e,t,n,i){this.exist(e,t),Array.isArray(t)||this._error(e,"must be an array"),this._checkInterval(e,t.length,"length must be",n,i)},_checkInterval:function(t,n,i,r,o){r!==e&&o!==e&&(n<r||n>o)?this._error(t,i+" between "+r+" and "+o):r!==e&&n<r&&0===r?this._error(t,i+" positive"):r!==e&&n<r?this._error(t,i+" greater than "+r):o!==e&&n>o&&this._error(t,i+" smaller than "+o)},posInt:function(e,t){this.integer(e,t,0)},intArray:function(e,t,n,i){this.array(e,t,n,i);for(var r=0,o=t.length;r<o;r++)this.integer(e+"["+r+"]",t[r])},stringArray:function(e,t,n,i,r){this.array(e,t,n,i);for(var o=0,s=t.length;o<s;o++)this.string(e+"["+o+"]",t[o],r)},integer:function(e,t,n,i){this.number(e,t,n,i),Number.isInteger(t)||this._error(e,"must be an integer")},number:function(t,n,i,r){this.exist(t,n),"number"==typeof n&&isFinite(n)||this._error(t,"must be a number"),i!==e&&r!==e&&(n<i||n>r)?this._error(t,"must be a number between "+i+" and "+r):i!==e&&n<i&&0===i?this._error(t,"must be a positive number"):i!==e&&n<i?this._error(t,"must be a number greater than "+i):r!==e&&n>r&&this._error(t,"must be a number smaller than "+r)},positive:function(e,t){return this.number(e,t,0)},enums:function(e,t,n){Array.isArray(n)&&0!==n.length||this._bug("enum values must be a non-empty array.");for(var i=0;i<n.length;++i){if(t===n[i])return;if(Number.isNaN(t)&&Number.isNaN(n[i]))return}this._error(e,"["+t+"] must be on of the values ("+this._array2string(n)+")")},_array2string:function(t){return t.map(function(t){return t===e?"undefined":JSON.stringify(t)}).join(", ")},enumKeys:function(e,t,n,r){this.object(e,t);var o=i.keys(t);(i.difference(o,n).length>0&&this._error(e,"has unexpected properties (${this._array2string(unauthorized)})"),r)&&(!0===r&&(r=n),i.difference(r,o).length>0&&this._error(e,"misses mandatory properties (${this._array2string(missing)})"))},properties:function(t,n,i,r){this.object(t,n);var o=Object.keys(i);if(r===e&&(r="strict"),"strict"===r){for(var s=Object.keys(n),a=[],d=0;d<s.length;++d)-1===o.indexOf(s[d])&&a.push(s[d]);a.length>0&&this._error(t,"has unexpected properties ("+this._array2string(a)+")")}var u=0;o.forEach(function(e){u+=this.property(t+"."+e,n[e],i[e])?1:0},this),"strictExist"===r&&0===u&&this._error(t,"At least one of these properties is required ("+this._array2string(o)+").")},property:function(t,n,i){if(!i)return n!==e;if(!0===i.required)this.exist(t,n);else if(n===e)return!1;if(i.check&&i.check(t,n),i.values)return this.enums(t,n,i.values),!0;if(i.properties)return this.type(t,n,"object"),this.properties(t,n,i.properties,i.propertiesPolicy),!0;if(i.anyProperty)return this.type(t,n,"object"),Object.keys(n).forEach(function(e){this.property(t+"."+e,n[e],i.anyProperty)}),!0;if(i.arraySize!==e&&this.array(t,n,i.arraySize,i.arraySize),i.arrayItem)return i.arrayItem.required===e&&(i.arrayItem.required=!0),this.type(t,n,"array"),n.forEach(function(e,r){this.property(t+"["+r+"]",n[r],i.arrayItem)},this),!0;if(i.type!==e){var r=i.type;if(!this[r])throw new Error("type "+r+" does not exist");this[r](t,n)}return!0},regexp:function(e,t,n){this.string(e,t),n.test(t)||this._error(e,"must match the pattern /${regexp.source}/${regexp.flags}")},type:function(e,t,n){var i=this.getType(t);n=this._itemOrList(n,[]),0===n.length&&this._bug("check.type: type array must have at least one type");for(var r=!1,o=0;o<n.length&&!r;++o)r=n[o]==i;return r||this._error(e,"does not have expected type ("+this._array2string(n)+")"),i},getType:function(e){return null===e?"null":Array.isArray(e)?"array":void 0===e?"undefined":_typeof(e)},_itemOrList:function(t,n){return t===e||null===t?n!==e?n:t:Array.isArray(t)?t:[t]},boolean:function(t,n,i,r){i||this.exist(t,n),this.type(t,n,i?["boolean","undefined"]:"boolean"),r!==e&&this.enums(t,n,[r])},exclusive:function(t,n,r,o){var s=i.map(n,function(t,n){return t===e?e:n});s=i.filter(s,function(t){return t!==e});var a=i.intersection(s,r);a.length>1&&this._error(t,"cannot have these properties set a the same time: ${this._array2string(intersection)}"),0===a.length&&o&&this._error(t,"should have one of these properties set: ${this._array2string(exclusiveKeys)}"),1===a.length&&o&&this.exist(t+"."+a[0],n[a[0]])},function:function(e,t){"function"!=typeof t&&this._error(e,"must be a function")},readable:function(e,t){this.string(e,t,!0);try{return r.statSync(t)}catch(t){return this._error(e,"must be readable"),null}},file:function(e,t){var n=this.readable(e,t);n&&(n.isFile()||this._error(e,"must be a file"))}},n.utils.typeCheck=new t}.call(),function(e){function t(e,t){this.nodes=new n.utils.ElementSet(e),this.edges=new n.utils.ElementSet(t)}var n=$global.Ogma;t.prototype.has=function(e){return e.isNode?this.nodes.has(e):this.edges.has(e)},t.prototype.add=function(e){return e.isNode?this.nodes.add(e):this.edges.add(e)},t.prototype.remove=function(e){return e.isNode?this.nodes.remove(e):this.edges.remove(e)},t.prototype.clear=function(){this.nodes.clear(),this.edges.clear()},n.utils.BiSet=t}.call(),function(e){var t=$global.Ogma;t.utils.gaussianMatrix=function(e){for(var t=[],n=3*e|0,i=-n;i<=n;++i){var r=1/Math.sqrt(2*Math.PI*e*e)*Math.pow(Math.E,-i*i/(2*e*e));r=Math.round(1e3*r)/1e3,t.push(r)}return t},t.utils.isPowerOfTwo=function(e){return t.utils.isInteger(Math.log(e)/Math.LN2)}}.call(),function(e){var t=$global.Ogma;t.utils.roundedRect=function(e,t,n,i,r,o,s,a,d){if(0===s)return e.rectangle(t,{x:n+r/2,y:i+o/2},{zx:r/2,zy:o/2},a,d);var u=e.updateComposite(t,7);return u[0]=e.quadrilateral(u[0],{x:n,y:i+s-1},{x:n+r,y:i+s-1},{x:n+r,y:i+o-s+1},{x:n,y:i+o-s+1},a,d),u[1]=e.quadrilateral(u[1],{x:n+s,y:i},{x:n+r-s,y:i},{x:n+r-s,y:i+s},{x:n+s,y:i+s},a,d),u[2]=e.quadrilateral(u[2],{x:n+s,y:i+o-s},{x:n+r-s,y:i+o-s},{x:n+r-s,y:i+o},{x:n+s,y:i+o},a,d),u[3]=e.circle(u[3],{x:n+s,y:i+s},0,s,a,d),u[4]=e.circle(u[4],{x:n+r-s,y:i+s},0,s,a,d),u[5]=e.circle(u[5],{x:n+s,y:i+o-s},0,s,a,d),u[6]=e.circle(u[6],{x:n+r-s,y:i+o-s},0,s,a,d),e.composite(t,u)};var n=50;t.utils.circleStroke=function(e,t,i,r,o,s,a,d){for(var u=e.updateComposite(t,n),l=2*Math.PI/n,h=s/2,c=l,g={x:i,y:r,zx:o,zy:0},f={x:i,y:r,zx:o,zy:0,ox:h,oy:0},p=0;p<n;++p){var y=Math.cos(c),v=Math.sin(c),m={x:i,y:r,zx:y*o,zy:v*o},_={x:i,y:r,zx:y*o,zy:v*o,ox:y*h,oy:v*h};u[p]=e.quadrilateral(u[p],g,m,_,f,a,d),g=m,f=_,c+=l}return e.composite(t,u)},t.utils.circleStroke=function(e,t,i,r,o,s,a,d){for(var u=e.updateComposite(t,n),l=2*Math.PI/n,h=s/2,c=l,g={x:i,y:r,zx:o,zy:0},f={x:i,y:r,zx:o,zy:0,ox:h,oy:0},p=0;p<n;++p){var y=Math.cos(c),v=Math.sin(c),m={x:i,y:r,zx:y*o,zy:v*o},_={x:i,y:r,zx:y*o,zy:v*o,ox:y*h,oy:v*h};u[p]=e.quadrilateral(u[p],g,m,_,f,a,d),g=m,f=_,c+=l}return e.composite(t,u)}}.call(),function(e){function t(e){return"string"==typeof e&&!o.test(""+e)}var n=$global.Ogma;n.utils.forEach=function(e,t,n){if(e instanceof Array)e.forEach(t);else{if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new Error("iterate: invalid argument "+JSON.stringify(e));var i=Object.keys(e);if(n)for(var r=0;r<i.length;++r){var o=i[r];t.call(n,e[o],o)}else for(r=0;r<i.length;++r)o=i[r],t(e[o],o)}},n.utils.shallowCopy=function(e){var t={};return n.utils.forEach(e,function(e,n){t[n]=e}),t},n.utils.stringify=function(t){return t===e?"undefined":JSON.stringify(t)},n.utils.deepCopy=function(e){if(e instanceof Array){for(t=new Array(e.length),r=0;r<e.length;++r)t[r]=n.utils.deepCopy(e[r]);return t}if("object"===(void 0===e?"undefined":_typeof(e))&&null!==e){for(var t={},i=Object.keys(e),r=0;r<i.length;++r){var o=i[r];t[o]=n.utils.deepCopy(e[o])}return t}return e},n.utils.updateObject=function(e,t){var i=this;n.utils.forEach(t,function(t,n){"object"===(void 0===n?"undefined":_typeof(n))&&null!==n?("object"===_typeof(e[t])&&null!==e[t]||(e[t]={}),i.updateObject(e[t],n)):e[t]=n})},n.utils.extendList=function(e,t){t.forEach(function(t){-1===e.indexOf(t)&&e.push(t)})},n.utils.strToObjectRef=function(t,n){for(var i=n.indexOf(".");t&&-1!==i;)t=t[n.substr(0,i)],n=n.substr(i+1),i=n.indexOf(".");return t?t[n]:e},n.utils.hasProperty=function(e,t){for(var n=t.indexOf(".");e&&-1!==n;)e=e[t.substr(0,n)],t=t.substr(n+1),n=t.indexOf(".");return!!e&&e.hasOwnProperty(t)},n.utils.setPathValue=function(e,t,n){for(var i=t.indexOf(".");-1!==i;){var r=t.substr(0,i),o=e[r];o||(o={},e[r]=o),t=t.substr(i+1),i=t.indexOf("."),e=o}e[t]=n};var i=function(){};n.utils.bindProperty=function(e,t,n,r){for(var o=t.indexOf(".");-1!==o;){var s=t.substr(0,o),a=e[s];a||(a={},e[s]=a),t=t.substr(o+1),o=t.indexOf("."),e=a}var d=e[t];Object.defineProperty(e,t,{get:n||function(){return d},set:r||i,configurable:!0})},n.utils.unbindProperty=function(e,t){for(var n=t.indexOf("."),i=t;e&&-1!==n;)e=e[t.substr(0,n)],t=t.substr(n+1),n=t.indexOf(".");if(!e)throw new Error('No property "'+i+'" exist.');var r=e[t];Object.defineProperty(e,t,{value:r,configurable:!0})},n.utils.concat=function(){for(var e=arguments.reduce(function(e,t){return e+(t?t.length:0)},0),t=new Array(e),n=0,i=0;i<arguments;++i)if(arguments[i])for(var r=0;r<arguments[i].length;++r)t[n]=arguments[i][r],++n;return t},n.utils.setReadOnly=function(e,t){n.utils.forEach(t,function(t,n){Object.defineProperty(e,n,{enumerable:!0,get:t})})};var r=function(){},o=/\{\s*\[native code\]\s*\}/;n.utils.kill=function(e){if("object"===(void 0===e?"undefined":_typeof(e))){var n=e.constructor;if(t(n))for(var i=Object.keys(n.prototype),o=0;o<i.length;++o){var s=i[o];"function"==typeof n.prototype[s]&&(e[s]=r)}}}}.call(),function(e){var t=$global.Ogma,n=null;if("undefined"!=typeof window&&"undefined"!=typeof document){var i={opera:!!window.opr&&!!window.opr.addons||!!window.opera||"undefined"!=typeof navigator&&navigator.userAgent.indexOf(" OPR/")>=0,firefox:"undefined"!=typeof InstallTrigger,safari:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,ie:!!document.documentMode,edge:!document.documentMode&&!!window.StyleMedia,chrome:!!window.chrome&&!!window.chrome.webstore};for(var r in i)if(i.hasOwnProperty(r)&&i[r]){n=r;break}}t.utils.browser=n}.call(),function(e){function t(e,t,n,i,s,a,d,u){if(8===arguments.length)this.x=e,this.y=t,this.ax=s,this.ay=a,this.zx=n,this.zy=i,this.ox=d,this.oy=u;else{for(var l=0;l<o.length;++l)this[o[l]]=0;"object"===(void 0===e?"undefined":_typeof(e))&&null!==e&&r.utils.forEach(e,function(e,t){this[t]=e},this)}}function n(e){Array.call(this),Object.defineProperty(this,"__internalCounter",{value:{},writable:!0});for(var n=0;n<e;++n)this.push(new t);for(n=0;n<o.length;++n)i(this,o[n]);for(n=0;n<a.length;++n)this.__internalCounter[a[n]]=0}function i(e,t){Object.defineProperty(e,t,{get:function(){for(var e=new Array(this.length),n=0;n<this.length;++n)e[n]=this[n][t];return e},set:function(e){for(var n=0;n<this.length;++n)this[n][t]=e},enumerable:!1})}var r=$global.Ogma,o=["x","y","ax","ay","zx","zy","ox","oy"];t.prototype.reset=function(){for(var e=0;e<o.length;++e)this[o[e]]=0;return this},t.prototype.add=function(e){for(var t=0;t<o.length;++t){var n=o[t];this[n]+=e[n]}return this},t.prototype.mergeCoordinates=function(){return{x:this.x+this.zx+this.ax+this.ox,y:this.y+this.zy+this.ay+this.oy}},t.prototype.set=function(e){if(e instanceof t)for(var n=0;n<o.length;++n){var i=o[n];this[i]=e[i]}else r.utils.forEach(e,function(e,t){this[t]=e},this);return this},t.prototype.setAll=function(e,t,n,i,r,o,s,a){this.x=e,this.y=t,this.ax=r,this.ay=o,this.zx=n,this.zy=i,this.ox=s,this.oy=a},t.prototype.setXY=function(e,t){return this.x=e,this.y=t,this},t.prototype.setZXY=function(e,t){return this.zx=e,this.zy=t,this},t.prototype.setAXY=function(e,t){return this.ax=e,this.ay=t,this},t.prototype.setOXY=function(e,t){return this.ox=e,this.oy=t,this},t.prototype.addZXY=function(e,t){return this.zx+=e,this.zy+=t,this},t.prototype.addOXY=function(e,t){return this.ox+=e,this.oy+=t,this},t.prototype.clone=function(){return new t(this.x,this.y,this.zx,this.zy,this.ax,this.ay,this.ox,this.oy)},r.utils.rectangleFromCenterAndDimensions=function(e,t,n,i,r,o){var s=e,a=t;n.x=s.x-a.x,n.y=s.y-a.y,n.ax=s.ax-a.ax,n.ay=s.ay-a.ay,n.zx=s.zx-a.zx,n.zy=s.zy-a.zy,n.ox=s.ox-a.ox,n.oy=s.oy-a.oy,i.x=s.x+a.x,i.y=s.y-a.y,i.ax=s.ax+a.ax,i.ay=s.ay-a.ay,i.zx=s.zx+a.zx,i.zy=s.zy-a.zy,i.ox=s.ox+a.ox,i.oy=s.oy-a.oy,r.x=s.x+a.x,r.y=s.y+a.y,r.ax=s.ax+a.ax,r.ay=s.ay+a.ay,r.zx=s.zx+a.zx,r.zy=s.zy+a.zy,r.ox=s.ox+a.ox,r.oy=s.oy+a.oy,o.x=s.x-a.x,o.y=s.y+a.y,o.ax=s.ax-a.ax,o.ay=s.ay+a.ay,o.zx=s.zx-a.zx,o.zy=s.zy+a.zy,o.ox=s.ox-a.ox,o.oy=s.oy+a.oy};var s={x:0,y:0};r.utils.lineFromBoundaries=function(e,t,n,i,o,a,d,u){r.geometry.unitVector(e.x,e.y,t.x,t.y,.5,s),o.x=e.x-s.y*n,o.y=e.y+s.x*n,o.ax=e.ax-s.y*i,o.ay=e.ay+s.x*i,o.zx=e.zx,o.zy=e.zy,o.ox=e.ox,o.oy=e.oy,a.x=e.x+s.y*n,a.y=e.y-s.x*n,a.ax=e.ax+s.y*i,a.ay=e.ay-s.x*i,a.zx=e.zx,a.zy=e.zy,a.ox=e.ox,a.oy=e.oy,u.x=t.x-s.y*n,u.y=t.y+s.x*n,u.ax=t.ax-s.y*i,u.ay=t.ay+s.x*i,u.zx=t.zx,u.zy=t.zy,u.ox=t.ox,u.oy=t.oy,d.x=t.x+s.y*n,d.y=t.y-s.x*n,d.ax=t.ax+s.y*i,d.ay=t.ay-s.x*i,d.zx=t.zx,d.zy=t.zy,d.ox=t.ox,d.oy=t.oy},n.prototype=Object.create(Array.prototype),n.prototype.constructor=n;var a=["setXY","setZXY","setAXY","setOXY"];n.prototype.reset=function(){for(var e=0;e<a.length;++e)this.__internalCounter[a[e]]=0;for(e=0;e<this.length;++e)this[e].reset();return this};for(var d=0;d<a.length;++d)!function(e){n.prototype[e]=function(t,n){return this[this.__internalCounter[e]][e](t,n),this.__internalCounter[e]+=1,this.__internalCounter[e]===this.length&&(this.__internalCounter[e]=0),this}}(a[d]);n.prototype.mergeCoordinates=function(){for(var e=[],t=0;t<this.length;++t)e.push(this[t].mergeCoordinates());return e},n.prototype.getXYList=function(){for(var e=new Array(this.length),t=0;t<this.length;++t)e[t]={x:this[t].x,y:this[t].y};return e},r.utils.Position=t,r.utils.PositionList=n}.call(),function(e){function t(e){this.maxNbElementsPerRegion=e,this.rootRegion=null}function n(e,t,n,i,r){this.cx=e,this.cy=t,this.parent=r,this.size=n,this.final=!1,this.leaf=!0,this.maxEltSize=0,this.maxNbElementsPerRegion=i,this.topLeft=null,this.topRight=null,this.botLeft=null,this.botRight=null,this.elements=[]}function i(e,t){e.maxEltSize<t&&(e.maxEltSize=t,e.parent&&i(e.parent,t))}function r(e,t){var n=e.cx-e.size,i=e.cx+e.size,r=e.cy-e.size,o=e.cy+e.size;return d.geometry.isPointInRectangle(t.x1,t.y1,n,r,i,o)||d.geometry.isPointInRectangle(t.x1,t.y2,n,r,i,o)||d.geometry.isPointInRectangle(t.x2,t.y1,n,r,i,o)||d.geometry.isPointInRectangle(t.x2,t.y2,n,r,i,o)}function o(e,t){var n=e.cx-e.size,i=e.cx+e.size,r=e.cy-e.size,o=e.cy+e.size;return t.x1>=n&&t.x2<=i&&t.y1>=r&&t.y2<=o}function s(e){var t=e.size/2;e.topLeft=new n(e.cx-t,e.cy-t,t,e.maxNbElementsPerRegion,e),e.topRight=new n(e.cx+t,e.cy-t,t,e.maxNbElementsPerRegion,e),e.botLeft=new n(e.cx-t,e.cy+t,t,e.maxNbElementsPerRegion,e),e.botRight=new n(e.cx+t,e.cy+t,t,e.maxNbElementsPerRegion,e);for(var i=0;i<e.elements.length;++i)a(e,e.elements[i]);e.elements=null,e.leaf=!1,e.childList=[e.topLeft,e.topRight,e.botLeft,e.botRight]}function a(e,t){e.topLeft.insertElement(t)||e.topRight.insertElement(t)||e.botLeft.insertElement(t)||e.botRight.insertElement(t)}var d=$global.Ogma;d.utils.QuadTree=t,t.prototype.insertElement=function(e){var t,i=e.boundingBox;this.rootRegion||(this.init=!0,this.cx=(i.x1+i.x2)/2,this.cy=(i.y1+i.y2)/2,t=2*Math.max(Math.abs(i.x1-i.x2),Math.abs(i.y1-i.y2)),t<10&&(t=10),this.rootRegion=new n(this.cx,this.cy,t,this.maxNbElementsPerRegion,null));var r=this.rootRegion;for(t=this.rootRegion.size;!o(r,e.boundingBox);)t*=2,r=new n(this.cx,this.cy,t,this.maxNbElementsPerRegion,null);r!=this.rootRegion&&(this.rootRegion.getAllElements().forEach(function(e){r.insertElement(e)}),this.rootRegion=r),this.rootRegion.insertElement(e)},t.prototype.removeElement=function(e){if(this.rootRegion.removeElement(e),3===this.rootRegion.nbChildrenEmpty())for(var t=this.rootRegion.children(),n=0;n<t.length;++n)if(!t[n].isEmpty())return this.rootRegion=t[n],void(t[n].parent=null)};var u=[];t.prototype.getElements=function(e,t){return this.rootRegion?this.rootRegion.getElementList(e,t):u},n.prototype.children=function(){return this.leaf?null:this.childList},n.prototype.insertElement=function(e){var t;if(r(this,e.boundingBox)){if(this.leaf&&!this.final&&this.elements.length===this.maxNbElementsPerRegion){for(var n=0;n<this.elements.length;++n)t=this.elements[n].boundingBox,(Math.abs(t.x2-t.x1)>=this.size||Math.abs(t.y2-t.y1)>=this.size)&&(this.final=!0);this.final||s(this)}return this.leaf?(this.elements.push(e),t=e.boundingBox,i(this,Math.max(Math.abs(t.x1-t.x2),Math.abs(t.y1-t.y2)))):a(this,e),!0}return!1},n.prototype.totalNbElements=function(){return this.leaf?this.elements.length:this.topLeft.totalNbElements()+this.topRight.totalNbElements()+this.botLeft.totalNbElements()+this.botRight.totalNbElements()},n.prototype.getAllElements=function(){return this.leaf?this.elements:this.topLeft.getAllElements().concat(this.topRight.getAllElements()).concat(this.botLeft.getAllElements()).concat(this.botRight.getAllElements())},n.prototype.getElementList=function(e,t){if(this.leaf)return this.elements;var n=this.maxEltSize;if(e<this.cx&&t<this.cy)return this.topLeft.getElementList(e,t);if(e>this.cx&&t<this.cy){var i=this.topRight.getElementList(e,t);return e-n>this.cx?i:i.concat(this.topLeft.getElementList(e,t))}if(e<this.cx&&t>this.cy){var r=this.botLeft.getElementList(e,t);return t-n>this.cy?r:r.concat(this.topLeft.getElementList(e,t))}var o=this.botRight.getElementList(e,t);return e-n<=this.cx&&(o=o.concat(this.botLeft.getElementList(e,t))),t-n<=this.cy&&(o=o.concat(this.topRight.getElementList(e,t))),e-n<=this.cx&&t-n<=this.cy&&(o=o.concat(this.topLeft.getElementList(e,t))),o},n.prototype.isEmpty=function(){return this.leaf?0===this.elements.length:this.topLeft.isEmpty()&&this.topRight.isEmpty()&&this.botLeft.isEmpty()&&this.botRight.isEmpty()},n.prototype.nbChildrenEmpty=function(){return this.leaf?0:this.topLeft.isEmpty()+this.topRight.isEmpty()+this.botLeft.isEmpty()+this.botRight.isEmpty()},n.prototype.removeElement=function(e){if(r(this,e.boundingBox)){if(this.leaf){var t=this.elements.indexOf(e);-1!==t&&this.elements.splice(t,1)}else this.topLeft.removeElement(e)||this.topRight.removeElement(e)||this.botLeft.removeElement(e)||this.botRight.removeElement(e),this.isEmpty()&&(this.leaf=!0,this.elements=[],this.childList=null);return!0}return!1}}.call(),function(){$global.Ogma}(),function(e){var t=$global.Ogma,n={};t.utils.benchmark=function(e,i){var r=t.utils.now(),o=i(),s=t.utils.now()-r,a=n[e];return a?(a.sum+=s,a.nb+=1,a.mean=a.sum/a.nb):(a={sum:0,nb:0,mean:0},n[e]=a),o},t.utils.displayBench=function(e){var t=n[e]||{sum:0,nb:0,mean:0};t.mean>=10?console.log(Math.round(t.mean)):console.log(Math.round(1e3*t.mean)/1e3)},t.utils.resetBench=function(e){n[e]={sum:0,nb:0,mean:0}};var i=$global.performance||Date,r={};t.utils.perf=function(e){r[e]=r[e]||{id:e,time:0,runs:0},r[e].st=i.now()},t.utils.perfEnd=function(e){r[e]&&(r[e].time+=i.now()-r[e].st,r[e].runs++,delete r[e].st)},t.utils.getPerf=function(e){function t(e){return e.mean=e.time/e.runs,e}return e?t(r[e]):Object.keys(r).map(function(e){return t(r[e])})},t.utils.resetPerf=function(){r={}}}.call(),function(e){function t(){this.list=n.memory.allocate(Int32Array),this.size=0,this.capacity=this.list.length}var n=$global.Ogma;n.utils.IndexList=t,t.prototype.add=function(e){this.size===this.capacity&&(this.list=n.memory.expand(this.list),this.capacity=this.list.length),this.list[this.size]=e,this.size+=1},t.prototype.addIfMissing=function(e){return!this.has(e)&&(this.add(e),!0)},t.prototype.remove=function(e){if(0===this.size)return!1;var t=this.list.lastIndexOf(e,this.size-1);return-1!==t&&(this.size-=1,this.list[t]=this.list[this.size],!0)},t.prototype.has=function(e){return 0!==this.size&&-1!==this.list.lastIndexOf(e,this.size-1)},t.prototype.clear=function(){this.size=0},t.prototype.pop=function(){return this.size-=1,this.list[this.size]}}.call(),function(){var e=$global.Ogma,t=0,n=$global.requestAnimationFrame||function(e,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),o=setTimeout(function(){e(i+r)},r);return t=i+r,o},i=$global.cancelAnimationFrame||function(e){clearTimeout(e)};e.utils.requestAnimFrame=function(e,t){return n.call($global,function(){e.call(t)})},e.utils.cancelAnimFrame=function(e){e&&i.call($global,e)}}(),function(e){function t(e){var t=new Blob([e],{type:"application/javascript"}),n=URL.createObjectURL(t);return new Worker(n)}function n(e){return new r(e)}function i(e){return new h(new Function(e))}function r(e){this._f=new Function("self",e),this._main=!0,this._listeners=[],this._terminated=!1,this._otherSide=new o(this),this._f(this._otherSide)}function o(e){this._main=!1,this._listeners=[],this._terminated=!1,this._otherSide=e}function s(e,t){this._listeners.push(t)}function a(e){setTimeout(d,0,this._otherSide,{data:e})}function d(e,t){if(!e._terminated)for(var n=0;n<e._listeners.length;++n)e._listeners[n](t)}var u=$global.Ogma,l=u.require("webworker-threads",{throwOnError:!1}),h=null;l&&(h=l.Worker),u.utils.createWorker=function(e){return h?i(e):"undefined"==typeof URL||-1!==navigator.appVersion.indexOf("MSIE 10")?n(e):t(e)},r.prototype.terminate=function(){this._terminated=!1,this._otherSide._terminated=!0},r.prototype.addEventListener=s,r.prototype.postMessage=a,o.prototype.addEventListener=s,o.prototype.postMessage=a}.call(),function(e){function t(e){this.size=0,this.totalSize=0,this.exists=[],this.attributes={exists:this.exists},this._attributesList=[this.exists],this._availableIndexes=[],this._nbAvailableIndexes=0,e&&this.addAttributes(e)}var n=$global.Ogma;n.utils.StaticList=t,t.prototype.addAttribute=function(e){if(this.attributes[e])throw new Error('Attribute "'+e+'" already exists.');this.attributes[e]=[],this._attributesList.push(this.attributes[e])},t.prototype.addAttributes=function(e){var t=this;n.utils.forEach(e,function(e,n){t.addAttribute(n,e)})},t.prototype.reserve=function(e){},t.prototype.addElement=function(){var e;if(0===this._nbAvailableIndexes){e=this.size,this.totalSize+=1;for(var t=0;t<this._attributesList.length;++t)this._attributesList[t].push(0)}else for(this._nbAvailableIndexes-=1,e=this._availableIndexes[this._nbAvailableIndexes],t=0;t<this._attributesList.length;++t)this._attributesList[t][e]=0;return this.exists[e]=1,this.size+=1,e},t.prototype.removeElement=function(e){return!!(this.size>0&&this.exists[e])&&(this.exists[e]=0,this.size-=1,this._availableIndexes[this._nbAvailableIndexes]=e,this._nbAvailableIndexes+=1,!0)},t.prototype.clear=function(){this.size=0,this._nbAvailableIndexes=0;for(var e=0;e<this._attributesList.length;++e)this._attributesList[e].fill(0)},t.prototype.filter=function(e){var t=this.attributes.exists,n=this.attributes[e];if(!n)throw new Error("attribute "+e+" does not exist");for(var i=new Array(this.size),r=0,o=0,s=this.totalSize;o<s;++o)t[r]&&(i[r]=n[o],r+=1);return i},t.prototype.getIndexList=function(){for(var e=this.attributes.exists,t=new Array(this.size),n=0,i=0,r=this.totalSize;i<r;++i)e[n]&&(t[n]=i,n+=1);return t},t.prototype.remove=t.prototype.removeElement,t.prototype.add=t.prototype.addElement}.call(),function(e){function t(){this.array=new Int32Array(o),this.capacity=o,this.size=0}function n(e,t,i,r){if(i===r)return i;var o=i+((r-i)/2|0),s=e[o],a=t-s;return 0===a?o:a<0?n(e,t,i,o):n(e,t,o+1,r)}function i(e){this._indexSet=new t,this._elementAttributes=e}var r=$global.Ogma,o=8;t.prototype.reserve=function(e){if(this.capacity<e){e=r.utils.upperPowerOf(e,2,o);var t=new Int32Array(e);t.set(this.array),this.capacity=e,this.array=t}},t.prototype.has=function(e){var t=n(this.array,e,0,this.size);return t<this.size&&this.array[t]===e},t.prototype.add=function(e){var t=n(this.array,e,0,this.size),i=t<this.size&&this.array[t]===e;return i||(this.size===this.capacity&&this.reserve(this.size+1),this.array.copyWithin(t+1,t,this.size),this.array[t]=e,this.size+=1),!i},t.prototype.remove=function(e){var t=n(this.array,e,0,this.size),i=t<this.size&&this.array[t]===e;return i&&(this.array.copyWithin(t,t+1,this.size),this.size-=1),i},t.prototype.removeByIndex=function(e){return!(e>=this.size||(this.array.copyWithin(e,e+1,this.size),this.size-=1,0))},t.prototype.clear=function(){this.size=0},t.prototype.slice=function(){return this.array.slice(0,this.size)},i.prototype.add=function(e){return this._indexSet.add(e.__index)},i.prototype.has=function(e){return this._indexSet.has(e.__index)},i.prototype.remove=function(e){return!!e&&this._indexSet.remove(e.__index)},i.prototype.removeByIndex=function(e){return this._indexSet.removeByIndex(e)},i.prototype.clear=function(){this._indexSet.clear()},i.prototype.slice=function(){for(var e=new Array(this._indexSet.size),t=this._elementAttributes.ref,n=this._indexSet.size,i=this._indexSet.array,r=0;r<n;++r)e[r]=t[i[r]];return e},i.prototype.sliceOrNull=function(){return 0===this._indexSet.size?null:this.slice()},i.prototype.$get=function(e){return this._elementAttributes.ref[this._indexSet.array[e]]},i.prototype.$length=function(){return this._indexSet.size},i.prototype.mergeSet=function(e){for(var t=e._indexSet.size,n=0;n<t;++n)this.add(e._elementAttributes.ref[e._indexSet.array[n]])},i.prototype.mergeArray=function(e){for(var t=e.length,n=0;n<t;++n)this.add(e[n])},i.prototype.forEach=function(e){for(var t=this._indexSet.size,n=this._elementAttributes.ref,i=this._indexSet.array,r=0;r<t;++r)e(n[i[r]])},i.prototype.map=function(e){for(var t=this._indexSet.size,n=this._elementAttributes.ref,i=this._indexSet.array,r=new Array(t),o=0;o<t;++o)r[o]=e(n[i[o]]);return r},Object.defineProperty(i.prototype,"length",{get:function(){throw new Error('invalid use of property "length": use "_indexSet.size" instead.')}}),r.utils.IntSet=t,r.utils.ElementSet=i}.call(),function(){var e=$global.Ogma,t=function(){},n=Array.isArray;t.prototype.on=function(e,t){if("string"!=typeof e)throw new TypeError("Event name must be string");if("function"!=typeof t)throw new TypeError("Event handler must be function");var n=this._events=this._events||{};return(n[e]=n[e]||[]).push(t),this},t.prototype.addEventListener=t.prototype.on,t.prototype.off=function(e,t){if("string"!=typeof e)throw new TypeError("Event name must be string");var i=this._event=this._events||{},r=i[e];if(n(r))if("function"!=typeof t)i[e]=null;else{var o=r.indexOf(t);-1!==o&&r.splice(o,1),0===r.length&&(i[e]=null)}return this},t.prototype.removeEventListener=t.prototype.off,t.prototype.fire=function(e){if("string"!=typeof e)throw new TypeError("Event name must be string");var t=this._event=this._events||{},i=t[e];if(n(i))for(var r=Array.prototype.slice.call(arguments,1),o=0,s=i.length;o<s;o++)i[o].apply(this,r);return this},t.prototype.trigger=t.prototype.distpatch=t.prototype.fire,t.prototype.once=function(e,t){var n=this,i=function i(){t.apply(n,Array.prototype.slice.call(arguments,0)),n.off(e,i)};return i.handler=t,this.on(e,i)},t.prototype.addOneTimeEventListener=t.prototype.once,t.prototype.hasListener=function(e,t){if(!e||!t)return!1;var i=this._events=this._events||{},r=i[e];if(n(r))for(var o,s=0,a=r.length;s<a;s++)if((o=r[s])===t||o.handler===t)return!0;return!1},t.prototype.getListeners=function(e){return(this._events=this._events||{})[e]},t.mixin=function(e){for(var n="function"==typeof e?e.prototype:e,i=["addEventListener","removeEventListener","addOneTimeEventListener","dispatch","on","off","once","fire","trigger"],r=0,o=i.length;r<o;r++){var s=i[r];n[s]=t.prototype[s]}return e},e.utils.EventTarget=t}(),function(){$global.Ogma.algorithms={}}(),function(){var e=$global.Ogma;e.algorithms.johnson=function(t){var n,i,r,o,s,a,d=t.sources,u=t.targets,l=t.weights,h=t.indexes,c=t.adjacency,g=t.undirected,f=Number.POSITIVE_INFINITY,p=h?h.length:c.length;if(!h)for(n=0,h=new Uint32Array(p);n<p;n++)h[n]=n;var y=new Array(p),v={};for(n=0;n<p;n++){for(y[n]=new Float32Array(p),r=0;r<p;r++)y[n][r]=n===r?0:f;v[h[n]]=n}var m=p,_=l.length;for(d=d.slice(),u=u.slice(),l=l.slice(),n=0;n<p;n++)d[_+n]=m,u[_+n]=h[n],l[_+n]=0;var b=e.algorithms.bellmanFord({sources:d,targets:u,weights:l,undirected:g,N:p+1,source:m});if(null===b)throw new Error("Graph has negative weight loops");for(o=b.distances,n=0,i=l.length;n<i;n++)s=v[d[n]],a=v[u[n]],void 0!==s&&void 0!==a&&(l[n]=l[n]+o[s]-o[a]);for(d=d.slice(0,_),u=u.slice(0,_),l=l.slice(0,_),n=0;n<p;n++){var x=h[n];for(s=v[x],o=e.algorithms.dijkstra(c,x,void 0,h,v).distances,r=0;r<p;r++)y[n][r]=n===r?0:o[r]}return y}}(),function(){$global.Ogma.algorithms.minHeap=function(){function e(e){for(;;){var s=2*e+1,a=s+1,d=e;if(s<o&&t(n[s],n[d])<0&&(d=s),a<o&&t(n[a],n[d])<0&&(d=a),d===e)return e;var u=n[d];n[d]=n[e],n[e]=u,i[r(n[d])]=d,i[r(u)]=e,e=d}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e-t},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},o=n.length,s={heapify:e,pop:function(){if(!(o<=0)){if(1===o)return o--,n[0];var t=n[0];return n[0]=n[o-1],o--,e(0),t}},decreaseKey:function(e,o){for(void 0!==o&&(n[e]=o,i[r(o)]=e);e>0;){var s=e-1>>1;if(!(t(n[s],n[e])>0))break;var a=n[e];n[e]=n[s],n[s]=a,i[r(n[e])]=e,i[r(a)]=s,e=s}return e},min:function(){return n[0]},remove:function(e){return this.decreaseKey(e,Number.NEGATIVE_INFINITY),this.pop()},push:function(e){o++;var s=o-1;for(n[s]=e;s>0;){var a=s-1>>1;if(!(t(n[a],n[s])>0))break;var d=n[s];n[s]=n[a],n[a]=d,i[r(n[s])]=s,i[r(d)]=a,s=a}return s},empty:function(){return o<=0},toArray:function(){return n.slice(0,o)}};return Object.defineProperty(s,"keys",{get:function(){return i},enumerable:!0}),Object.defineProperty(s,"size",{get:function(){return o},enumerable:!0}),s}}(),function(){var e=$global.Ogma;e.algorithms.dijkstra=function(t,n,i,r,o){var s,a,d=r?r.length:t.length,u=new Float32Array(d),l=new Int32Array(d),h=new Uint32Array(d),c=Number.POSITIVE_INFINITY,g=new Uint32Array(d);if(!r)for(s=0,r=new Uint32Array(d);s<d;s++)r[s]=s;if(!o)for(s=0,o={};s<d;s++)o[r[s]]=s;for(s=0;s<d;s++)u[s]=c,l[s]=-1,h[s]=g[s]=s;var f=e.algorithms.minHeap(function(e,t){return u[e]-u[t]},h,g);for(u[o[n]]=0,f.decreaseKey(g[o[n]]);0!==f.size;){var p=f.pop(),y=u[p],v=t[r[p]];if(y===c)break;for(s=0,a=v.length;s<a;s++){var m=v[s],_=m[0],b=o[m[1]];if(void 0!==b){var x=y+_;x<u[b]&&(u[b]=x,l[b]=p,f.decreaseKey(g[b]))}}}var w=null,A=null;if(void 0!==i){var E=r.indexOf(i);if(u[E]!==c){for(s=E,w=[];-1!==s;s=l[s])w.push(r[s]);w=w.reverse(),A=u[i]}}return{distances:u,path:w,pathLength:A}}}(),function(){$global.Ogma.algorithms.bellmanFord=function(e){var t=e.sources,n=e.targets,i=e.weights,r=e.source,o=e.target,s=e.undirected,a=void 0!==s&&s,d=e.indexes,u=e.N;if(u=d?d.length:u,!isFinite(u)||0===u)throw new Error("Invalid number of nodes "+u);var l,h,c,g,f,p,y,v,m,_,b,x=new Float32Array(u),w=new Int32Array(u),A={},E=Number.POSITIVE_INFINITY;if(!d)for(l=0,d=new Uint32Array(u);l<u;l++)d[l]=l;for(l=0;l<u;l++)x[l]=E,w[l]=-1,A[d[l]]=l;for(x[A[r]]=0,l=1,h=u;l<=h;l++){for(b=!1,c=0,g=i.length;c<g;c++)v=t[c],m=n[c],p=A[v],y=A[m],void 0!==p&&void 0!==y&&(_=i[c],f=x[p]+_,x[p]!==E&&f<x[y]&&(x[y]=f,w[y]=v,b=!0),a&&(f=x[y]+_,x[y]!==E&&f<x[p]&&(x[p]=f,w[p]=m,b=!0)));if(!b)break}if(b)for(l=0,h=i.length;l<h;l++)if(v=t[l],m=n[l],p=A[v],y=A[m],void 0!==p&&void 0!==y&&(_=i[l],x[p]+_<x[y]))return null;var C=null,S=null;if(void 0!==o){var I=A[o];if(void 0!==I&&x[I]!==E){for(l=o,C=[];-1!==l;l=w[A[l]])C.push(l);C=C.reverse(),S=x[I]}}return{distances:x,path:C,pathLength:S}}}(),function(e){var t=$global.Ogma;t.exports={},t.exports.utils={},t.exports.utils.fitZoomAndExport=function(e,n,i,r){r=r||{};var o,s,a,d=e.render,u=e.images,l=e.texts,h=d.screen.width,c=d.screen.height,g=n.margin||10,f=!1,p=!1;!1===n.texts&&(l.isNodeTextDrawingEnabled()&&(f=!0,l.setNodeTextDrawing(!1)),l.isEdgeTextDrawingEnabled()&&(p=!0,l.setEdgeTextDrawing(!1))),r.hideImages&&u.enableImages(!1),n.width&&n.height?(o=n.width,s=n.height):n.size?(o=n.size,s=n.size):n.zoomRatio?(o=h*n.zoomRatio,s=c*n.zoomRatio):(o=h,s=c);var y,v=e.camera,m=e.locate,_=v.saveConfig(),b=m.nodesBoundingBox();y=n.clip?Math.min(o/(o+g),s/(s+g))*v.zoom:Math.min(o/(b.width+g),s/(b.height+g)),v.setZoom(y),n.clip||v.setCenter(b.cx,b.cy),v.move((h-o)/(2*y),(c-s)/(2*y));var x=v.saveConfig();return a=d.export(t.renderers[i],o,s,n.background),v.loadConfig(_),f&&l.setNodeTextDrawing(!0),p&&l.setEdgeTextDrawing(!0),r.hideImages&&u.enableImages(!0),{renderer:a,camera:x}}}.call(),function(e){var t=$global.Ogma;t.exports.csv=function(n,i,r){function o(e){return e=t.utils.convertToString(e),r.textSeparator?r.textSeparator+e.replace(s,"\\"+r.textSeparator)+r.textSeparator:e}r.separator=r.separator||",",r.textSeparator=r.textSeparator===e?'"':r.textSeparator;var s=new RegExp(r.textSeparator,"g");if(r.textSeparator&&'"'!==r.textSeparator&&"'"!==r.textSeparator)throw new TypeError('Invalid argument :"textSeparator" is not single-quote or double-quote, was '+r.textSeparator);var a,d,u,l,h,c,g=n.graph,f=[],p={},y=[],v=0,m=r.categoriesName||"categories";if(!r.what)throw new TypeError('Missing argument: "what".');if("nodes"===r.what)h=r.which?function(e){r.which.forEach(function(t){e(g.getNode(t))})}:function(e){g.nodes.forEach(e)};else{if("edges"!==r.what)throw new TypeError('Invalid argument: "what" is not "nodes" or "edges", was '+r.what);h=r.which?function(e){r.which.forEach(function(t){e(g.getEdge(t))})}:function(e){g.edges.forEach(e)}}p.id=v++,y.push(o("id")),"edges"===r.what&&(p.source=v++,y.push(o("source")),p.target=v++,y.push(o("target"))),c=r.categories&&r.categories.length,c&&(p.categories=v++,y.push(o(m))),h(function(e){u=e,a=t.utils.strToObjectRef(u,r.attributes||"data")||{},Object.keys(a).forEach(function(e){e in p||(p[e]=v++,y.push(o(e)))})}),f.push(y),h(function(e){u=e,l=[],l.length=v,l[0]=o(u.id),"edges"===r.what&&(l[1]=o(u.source),l[2]=o(u.target)),c&&(d=t.utils.strToObjectRef(u,r.categories),Array.isArray(d)&&(d=d.join(r.separator)),l[p.categories]=o(d)),a=t.utils.strToObjectRef(u,r.attributes||"data")||{},Object.keys(a).forEach(function(e){l[p[e]]=o(a[e])}),f.push(l)}),i(f.map(function(e){return e.join(r.separator)}).join("\n"))}}.call(),function(e){function t(e,t,d,u){var l=a.exports.utils.fitZoomAndExport(e,d,"canvas",{}),h=l.renderer,c=l.camera,g=e.geo.isEnabled()&&$or(d.map,!0),f=null,p=function(){try{f=h.canvas.toDataURL("image/"+u)}catch(t){h=a.exports.utils.fitZoomAndExport(e,d,"canvas",{hideImages:!0}).renderer,s(h.canvas,d.textWatermark,n,i),f=h.canvas.toDataURL("image/"+u),console.warn(t.message)}if(g){var r=h.canvas,o=r.width,l=r.height,p=a.utils.pixelRatio(),y=a.utils.createCanvas(o/p,l/p),v=y.getContext("2d");try{e.geo.exportBackground(y,function(){v.drawImage(r,0,0,o,l),t(y.toDataURL("image/"+u),"dataURL")},c)}catch(e){v.clearRect(0,0,o,l),v.drawImage(r,0,0),t(y.toDataURL("image/"+u),"dataURL")}}else t(f,"dataURL")};s(h.canvas,d.textWatermark,n,i),d.imageWatermark?a.utils.getImage(d.imageWatermark.content,function(e){e&&(d.imageWatermark.content=e,s(h.canvas,d.imageWatermark,o,r)),p()}):p()}function n(e,t,n,i){e.textAlign="center",e.textBaseline="middle",e.fillText(t,n,i)}function i(e,t,n){return{width:e.measureText(t).width,height:n}}function r(t,n,i,r,o){return{width:r===e?n.width:r,height:o===e?n.height:o}}function o(e,t,n,i,r,o){e.drawImage(t,n-r/2,i-o/2,r,o)}function s(t,n,i,r){if(n){if("object"!==(void 0===n?"undefined":_typeof(n)))n={content:n};else if(!n.content)return;var o=t.getContext("2d"),s=t.width,a=t.height,d=n.fontFamily||"Arial",u=n.fontSize||48,l=n.fontStyle,h=n.fontColor||"red",c=n.repeat!==e&&n.repeat,g=n.angle===e?0:n.angle,f=n.alpha===e?.65:n.alpha,p=n.space===e?50:n.space,y=n.x===e?s/2:n.x,v=n.y===e?a/2:n.y,m=n.height,_=n.width,b=n.content;g=g/180*Math.PI,o.font=l?l+" "+u+"px "+d:u+"px "+d,o.fillStyle=h,o.globalAlpha=f;var x=r(o,b,u,_,m);if(c){var w=x.width+p,A=x.height+p,E=Math.sqrt(s*s+a*a);o.save(),o.translate(0,0),o.rotate(g);for(var C=0;C<E;C+=w)for(var S=0;S<E;S+=A)i(o,b,C,S,x.width,x.height),0!==S&&i(o,b,C,-S,x.width,x.height);o.restore()}else o.save(),o.translate(y,v),o.rotate(g),i(o,b,0,0,x.width,x.height),o.restore()}}var a=$global.Ogma;a.exports.png=function(e,n,i){return t(e,n,i,"png")},a.exports.jpg=function(e,n,i){return t(e,n,i,"jpeg")},a.exports.tiff=function(e,n,i){return t(e,n,i,"tiff")},a.exports.gif=function(e,n,i){return t(e,n,i,"gif")}}.call(),function(e){var t=$global.Ogma;t.exports.svg=function(e,n,i){var r=t.exports.utils.fitZoomAndExport(e,i,"svg",{}).renderer.svg;r.setAttribute("version","1.1"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),n('<?xml version="1.0" encoding="utf-8"?>'+t.utils.serializeXMLDocument(r))}}.call(),function(e){function t(e,t){return"integer"===t&&"number"==typeof e?n.utils.isInteger(e)||(t="float"):"number"!=typeof e&&(t="string","boolean"==typeof e&&(t="boolean")),t}var n=$global.Ogma;n.exports.gexf=function(e,i,r){var o,s,a,d,u,l,h,c,g,f,p,y,v,m,_,b,x,w,A,E,C=n.utils.createXmlDocument(),S="",I=e.graph,O={},z=0,T={},N=0;x=C.createElement("gexf"),x.setAttribute("xmlns","http://www.gexf.net/1.2draft"),x.setAttribute("xmlns:viz","http://www.gexf.net/1.2draft/viz"),x.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),x.setAttribute("xsi:schemaLocation","http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"),x.setAttribute("version","1.2"),m=C.createElement("meta"),m.setAttribute("lastmodifieddate",n.utils.getDate()),r.creator&&(g=C.createElement("creator"),E=C.createTextNode(""+r.creator),g.appendChild(E),m.appendChild(g)),r.description&&(f=C.createElement("description"),E=C.createTextNode(""+r.description),f.appendChild(E),m.appendChild(f)),v=C.createElement("graph"),v.setAttribute("mode","static"),_=C.createElement("nodes"),I.forEachNode(function(e){if(o=e,b=C.createElement("node"),b.setAttribute("id",o.id),o.text&&b.setAttribute("label",o.text),s=n.utils.strToObjectRef(o,r.nodeAttributes||"data"),s&&(d=C.createElement("attvalues"),Object.keys(s).forEach(function(e){e in O||(O[e]={id:z,type:"integer"},z++);var n=s[e];O[e].type=t(n,O[e].type),u=C.createElement("attvalue"),u.setAttribute("for",O[e].id),u.setAttribute("value",n),d.appendChild(u)}),b.appendChild(d)),o.color){var i=n.colors.toRgb(o.color);i.length>2&&(c=C.createElement("viz:color"),c.setAttribute("r",i[0]),c.setAttribute("g",i[1]),c.setAttribute("b",i[2]),i.length>3&&(5===i.length?c.setAttribute("a",i[3]+"."+i[4]):c.setAttribute("a",i[3])),b.appendChild(c))}w=C.createElement("viz:position"),w.setAttribute("x",o.x),w.setAttribute("y",-parseInt(o.y,10)),b.appendChild(w),o.size&&(A=C.createElement("viz:size"),A.setAttribute("value",o.size),b.appendChild(A)),_.appendChild(b)}),l=C.createElement("attributes"),l.setAttribute("class","node"),Object.keys(O).forEach(function(e){a=C.createElement("attribute"),a.setAttribute("id",O[e].id),a.setAttribute("title",e),a.setAttribute("type",O[e].type),l.appendChild(a)}),p=C.createElement("edges"),I.forEachEdge(function(e){if(o=e,y=C.createElement("edge"),y.setAttribute("id",o.id),y.setAttribute("source",o.source),y.setAttribute("target",o.target),o.size&&y.setAttribute("weight",o.size),o.text&&y.setAttribute("label",o.text),s=n.utils.strToObjectRef(o,r.edgeAttributes||"data"),s&&(d=C.createElement("attvalues"),Object.keys(s).forEach(function(e){e in T||(T[e]={id:N,type:"integer"},N++);var n=s[e];T[e].type=t(n,T[e].type),u=C.createElement("attvalue"),u.setAttribute("for",T[e].id),u.setAttribute("value",n),d.appendChild(u)}),y.appendChild(d)),o.color){var i=n.colors.toRgb(o.color);i.length>2&&i.length<=5&&(c=C.createElement("viz:color"),c.setAttribute("r",i[0]),c.setAttribute("g",i[1]),c.setAttribute("b",i[2]),y.appendChild(c))}o.size&&(A=C.createElement("viz:size"),A.setAttribute("value",o.size),y.appendChild(A)),p.appendChild(y)}),h=C.createElement("attributes"),h.setAttribute("class","edge"),Object.keys(T).forEach(function(e){a=C.createElement("attribute"),a.setAttribute("id",T[e].id),a.setAttribute("title",e),a.setAttribute("type",T[e].type),h.appendChild(a)}),v.appendChild(l),v.appendChild(h),v.appendChild(_),v.appendChild(p),x.appendChild(m),x.appendChild(v),C.appendChild(x),S=n.utils.serializeXMLDocument(C),a&&a.parentNode.removeChild(a),d&&d.parentNode.removeChild(d),u&&u.parentNode.removeChild(u),c&&c.parentNode.removeChild(c),g&&g.parentNode.removeChild(g),f&&f.parentNode.removeChild(f),E&&E.parentNode.removeChild(E),w&&w.parentNode.removeChild(w),A&&A.parentNode.removeChild(A),b&&b.parentNode.removeChild(b),y&&y.parentNode.removeChild(y),l&&l.parentNode.removeChild(l),h&&h.parentNode.removeChild(h),_&&_.parentNode.removeChild(_),p&&p.parentNode.removeChild(p),v&&v.parentNode.removeChild(v),m&&m.parentNode.removeChild(m),x&&x.parentNode.removeChild(x),C=null,i(S)}}.call(),function(e){$global.Ogma.exports.json=function(e,t,n){var i=e.graph,r={nodes:[],edges:[]};i.forEachNode(function(t){var i;if(n.nodeFields){i={id:t.id};for(var o=0;o<n.nodeFields.length;++o){var s=n.nodeFields[o];i[s]=t[s]}}else i=e.graph.cloneNode(t);r.nodes.push(i)}),i.forEachEdge(function(t){var i;if(n.edgeFields){i={id:t.id,source:t.source,target:t.target};for(var o=0;o<n.edgeFields.length;++o){var s=n.edgeFields[o];i[s]=t[s]}}else i=e.graph.cloneEdge(t);r.edges.push(i)}),t(n.pretty?JSON.stringify(r,null," "):JSON.stringify(r))}}.call(),function(e){function t(e,t){for(var n={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},o=0;o!=t.length;++o)for(var s=0;s!=t[o].length;++s){i.s.r>o&&(i.s.r=o),i.s.c>s&&(i.s.c=s),i.e.r<o&&(i.e.r=o),i.e.c<s&&(i.e.c=s);var a={v:t[o][s]};if(null!=a.v){var d=e.utils.encode_cell({c:s,r:o});"number"==typeof a.v?a.t="n":"boolean"==typeof a.v?a.t="b":a.v instanceof Date?(a.t="n",a.z=e.SSF._table[14],a.v=r(a.v)):a.t="s",n[d]=a}}return i.s.c<1e7&&(n["!ref"]=e.utils.encode_range(i)),n}function n(e,t){var n,i,r,a=0,u={},l=[],h=t.nodesAttributes,c=t.nodesCategories,g=t.nodesCategoriesName||"categories",f=0,p=[];return"edges"===t.what&&(h=t.edgesAttributes,c=t.edgesCategories,g=t.edgesCategoriesName||"categories"),f=c&&c.length?1:0,u.id=a++,l.push("id"),"edges"===t.what&&(u.source=a++,l.push("source"),u.target=a++,l.push("target")),f&&(a++,l.push(g)),e(function(e){i=e,n=d.utils.strToObjectRef(i,h||"data")||{},Object.keys(n).forEach(function(e){e in u||(u[e]=a++,l.push(o(e)))})}),p.push(l),e(function(e){i=e,r=[],r.length=a,r[0]=o(i.id),"edges"===t.what?(r[1]=o(i.source),r[2]=o(i.target),f&&(r[3]=s(d.utils.strToObjectRef(i,c)))):f&&(r[1]=s(d.utils.strToObjectRef(i,c))),n=d.utils.strToObjectRef(i,h||"data")||{},Object.keys(n).forEach(function(e){r[u[e]]=o(n[e])}),p.push(r)}),p}function i(){return this instanceof i?(this.SheetNames=[],void(this.Sheets={})):new i}function r(e,t){return t&&(e+=1462),(Date.parse(e)-new Date(Date.UTC(1899,11,30)))/864e5}function o(t){return null===t||t===e?"":"string"==typeof t||"number"==typeof t?t:"function"==typeof t?t.toString():JSON.stringify(t)}function s(t){return null===t||t===e?"":"string"==typeof t||"number"==typeof t?t:Array.isArray(t)?t.join(","):"function"==typeof t?t.toString():JSON.stringify(t)}function a(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i!=e.length;++i)n[i]=255&e.charCodeAt(i);return t}var d=$global.Ogma;d.exports.xlsx=function(e,r,o){var s,u,l=d.require("xlsx",{variable:"XLSX"}),h=e.graph,c=new i,g=o.which?function(e){o.which.forEach(function(t){return e(h.getNode(t))})}:function(e){h.nodes.forEach(e)},f=o.which?function(e){o.which.forEach(function(t){return e(h.getEdge(t))})}:function(e){h.edges.forEach(e)};if(o.what)if("nodes"===o.what)s=t(l,n(g,o));else{if("edges"!==o.what)throw new TypeError('Invalid argument: "what" is not "nodes" or "edges", was '+o.what);u=t(l,n(f,o))}else s=t(l,n(g,o)),u=t(l,n(f,o));s&&(c.SheetNames.push("Nodes"),c.Sheets.Nodes=s),u&&(c.SheetNames.push("Edges"),c.Sheets.Edges=u);var p=l.write(c,{bookType:"xlsx",bookSST:!1,type:"binary"});r(d.utils.createBlob([a(p)]),"blob")}}.call(),function(e){var t=$global.Ogma;t.exports.graphml=function(n,i,r){function o(e,n){var i=4*t.colors.getIndex(n),r=t.colors.rgba;e.r=Math.round(255*r[i]),e.g=Math.round(255*r[i+1]),e.b=Math.round(255*r[i+2])}function s(t,n,i,r,o){i=i||{};var s=l.createElement(n);for(var a in i)if(i.hasOwnProperty(a)){var d=i[a];d!==e&&s.setAttribute(a,d)}if(r!==e||o){"[object Object]"===Object.prototype.toString.call(r)&&(r=JSON.stringify(r));var u=l.createTextNode(r);s.appendChild(u)}return t.appendChild(s),s}function a(n,i,r){var s=t.utils.strToObjectRef(n,r)||{},a={id:n.id};g.forEach(function(t){var r=n[t];"y"===t&&r&&(r=-parseFloat(r)),r!==e&&(a[("edge"===i?"edge_":"")+t]=r,"color"===t&&o(a,r))}),t.utils.forEach(s,function(e,t){-1===g.indexOf(t)&&-1===c.indexOf(t)&&(f[t]?f[t].for!==i&&(f[t].for="all"):f[t]={for:i,type:"string"},a[t]=e)}),"edge"===i?(a.source=n.source,a.target=n.target,y.push(a)):p.push(a)}function d(e,n){var i=s(e,"data",{key:"nodegraphics"}),r=s(i,"y:ShapeNode");s(r,"y:Geometry",{x:n.x,y:n.y,width:n.size,height:n.size}),s(r,"y:Fill",{color:t.colors.colorToHexa(n.color),transparent:!1}),s(r,"y:NodeLabel",null,n.label?n.label:""),s(r,"y:Shape",{type:n.type?n.type:"circle"})}function u(e,n){var i=s(e,"data",{key:"edgegraphics"}),r=s(i,"y:PolyLineEdge");s(r,"y:LineStyle",{type:n.edge_type?n.edge_type:"line",color:n.color?t.utils.colorToHexa(n.color):"#0000ff",width:n.edge_size?n.edge_size:1}),s(r,"y:EdgeLabel",null,n.edge_label?n.edge_label:"")}var l=t.utils.createXmlDocument(),h=n.graph;r=t.utils.deepCopy(r),r.nodeFields=r.nodeFields||[],r.edgeFields=r.edgeFields||[];var c=["id","source","target"],g=["size","x","y","shape","color","label","fixed","hidden","active"],f={size:{for:"all",type:"double"},x:{for:"node",type:"double"},y:{for:"node",type:"double"},shape:{for:"all",type:"string"},color:{for:"all",type:"string"},r:{for:"all",type:"int"},g:{for:"all",type:"int"},b:{for:"all",type:"int"},a:{for:"all",type:"double"},text:{for:"all",type:"string"},pinned:{for:"node",type:"boolean"},hidden:{for:"all",type:"boolean"},active:{for:"all",type:"boolean"}},p=[],y=[];h.forEachNode(function(e){a(e,"node",r.nodeFields)}),h.forEachEdge(function(e){a(e,"edge",r.edgeFields)});var v=s(l,"graphml",{xmlns:"http://graphml.graphdrawing.org/xmlns","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd","xmlns:y":"http://www.yworks.com/xml/graphml","xmlns:java":"http://www.yworks.com/xml/yfiles-common/1.0/java","xmlns:sys":"http://www.yworks.com/xml/yfiles-common/markup/primitives/2.0","xmlns:x":"http://ww.yworks.com/xml/yfiles-common/markup/2.0"});t.utils.forEach(f,function(e,t){"node"!==e.for&&"all"!==e.for||s(v,"key",{"attr.name":t,"attr.type":e.type,for:"node",id:t}),"edge"!==e.for&&"all"!==e.for||s(v,"key",{"attr.name":t,"attr.type":e.type,for:"edge",id:"edge_"+t})}),s(v,"key",{id:"nodegraphics",for:"node","yfiles.type":"nodegraphics","attr.type":"string"}),s(v,"key",{id:"edgegraphics",for:"edge","yfiles.type":"edgegraphics","attr.type":"string"});var m=s(v,"graph",{edgedefault:(r.directedEdges||r.directedEdges)===e?"directed":"undirected",id:r.graphId?r.graphId:"G","parse.nodes":h.nodes.size,"parse.edges":h.edges.size,"parse.order":"nodesfirst"});p.forEach(function(e){var n=s(m,"node",{id:e.id});d(n,e),t.utils.forEach(e,function(e,t){-1===c.indexOf(t)&&s(n,"data",{key:t},e,!0)})}),y.forEach(function(e){var n=s(m,"edge",{id:e.id,source:e.source,target:e.target});u(n,e),t.utils.forEach(e,function(e,t){-1===c.indexOf(t)&&s(n,"data",{key:t},e,!0)})}),i('<?xml version="1.0" encoding="UTF-8"?>'+t.utils.serializeXMLDocument(l))}}.call(),function(e){$global.Ogma.generators=Object.create(null)}.call(),function(e){var t=$global.Ogma;t.generators.grid={configure:function(e){if(!t.utils.isInteger(e.n)||e.n<1)throw new TypeError('Invalid parameter: "n" is not a positive integer, was '+e.n);if(!t.utils.isInteger(e.m)||e.m<1)throw new TypeError('Invalid parameter: "m" is not a positive integer, was '+e.m)},generate:function(e){for(var t=e.n,n=e.m,i=e.hsep||10,r=e.vsep||10,o={nodes:[],edges:[]},s=0,a=0;a<t;++a)for(var d=0;d<n;++d){var u=a*n+d;o.nodes.push({id:u,x:d*i,y:a*r,text:"Node "+u}),d!==n-1&&(o.edges.push({id:s,source:u,target:a*n+d+1,text:"Edge "+s}),s+=1),a!==t-1&&(o.edges.push({id:s,source:u,target:(a+1)*n+d,text:"Edge "+s}),s+=1)}return o}}}.call(),function(e){$global.Ogma.generators.path={configure:function(e){if(!e.length||e.length<0)throw new TypeError('Invalid argument: "length" is not a positive number, was '+e.length)},generate:function(e){for(var t=e.length,n={nodes:[{id:"n0",text:"Node 0",x:100*Math.random(),y:100*Math.random()}],edges:[]},i=1;i<t;++i)n.nodes.push({id:"n"+i,text:"Node "+i,x:100*Math.random(),y:100*Math.random()}),n.edges.push({id:"e"+i,text:"Edge "+i,source:"n"+(i-1),target:"n"+i});return n}}}.call(),function(e){var t=$global.Ogma;t.generators.random={configure:function(e){if(!e)throw new Error("Missing argument: options");if(!t.utils.isObject(e))throw new TypeError("Invalid argument: options is not an object, was "+e);if(!t.utils.isNumber(e.nbNodes)||e.nbNodes<1)throw new TypeError("Invalid argument: options.nbNodes is not a positive number, was "+e.nbNodes);if(!t.utils.isNumber(e.nbEdges)||e.nbEdges<1)throw new TypeError("Invalid argument: options.nbEdges is not a number, was "+e.nbEdges)},generate:function(e){var t,n=e.nbNodes,i=e.nbEdges,r=!0,o={nodes:[],edges:[]};for(void 0!==e.texts&&(r=!!e.texts),t=0;t<n;t++)o.nodes.push({id:"n"+t,text:r?"Node "+t:"",x:200*Math.random(),y:200*Math.random()});for(t=0;t<i;t++)o.edges.push({id:"e"+t,text:r?"Edge "+t:"",source:"n"+(Math.random()*n|0),target:"n"+(Math.random()*n|0)});return o}}}.call(),function(e){var t=$global.Ogma;t.generators.erdosRenyi={configure:function(e){if(!e)throw new Error("Missing argument: options");if(!t.utils.isObject(e))throw new TypeError("Invalid argument: options is not an object, was "+e);if(!t.utils.isNumber(e.nbNodes)||e.nbNodes<1)throw new TypeError("Invalid argument: options.nbNodes is not a positive number, was "+e.nbNodes);if(e.nbNodes<3)throw new TypeError("Invalid argument: options.nbNodes is smaller than 3, was "+e.nbNodes);if("nbEdges"in e&&"p"in e)throw new TypeError("Invalid argument: choose between options.nbEdges and options.p");if(e.p>=0){if(!t.utils.isNumber(e.p)||e.p<0)throw new TypeError("Invalid argument: options.p is not a positive number, was "+e.p)}else if(!t.utils.isNumber(e.nbEdges)||e.nbEdges<1)throw new TypeError("Invalid argument: options.nbEdges is not a positive number, was "+e.nbEdges)},generate:function(e){var t,n,i,r={nodes:[],edges:[]},o=0,s=e.nbNodes,a=e.p;if(e.p>=0)for(n=0;n<s;n++)for(r.nodes.push({id:"n"+n,text:"Node "+n,x:100*Math.random(),y:100*Math.random()}),i=0;i<n;i++)Math.random()<a&&r.edges.push({id:"e"+o++,text:"Edge "+o,source:"n"+n,target:"n"+i});else{var d=[],u=e.nbEdges;for(n=0;n<s;n++)for(r.nodes.push({id:"n"+n,text:"Node "+n,x:100*Math.random(),y:100*Math.random(),size:1}),i=n+1;i<s;i++)d.push({source:"n"+n,target:"n"+i});for(o=d.length-1,n=0;n<u;n++)t=d.splice(Math.floor(Math.random()*o),1)[0],t.id="e"+n,t.text="Edge "+n,r.edges.push(t),o--}return r}}}.call(),function(e){var t=$global.Ogma;t.generators.balancedTree={configure:function(e){if(!e)throw new Error("Missing argument: options");if(!t.utils.isObject(e))throw new TypeError("Invalid argument: options is not an object, was "+e);if(!t.utils.isNumber(e.nbChildren)||e.nbChildren<1)throw new TypeError("Invalid argument: options.nbChildren is not a positive number, was "+e.nbChildren);if(!t.utils.isNumber(e.height)||e.height<1)throw new TypeError("Invalid argument: options.height is not a positive number, was "+e.height)},generate:function(e){for(var t=e.nbChildren,n=Math.pow(e.nbChildren,e.height),i=[],r=[],o=1,s=0,a=0,d=0;d<e.height;++d){for(var u=n/(o+1)/1.5,l=0;l<o;++l){var h=s++;if(i.push({id:h,text:"Node #"+h,x:(l+1)*u*10,y:20*d}),d!==e.height-1)for(var c=0;c<t;++c)r.push({id:a,text:"Edge #"+a,source:h,target:h*t+c+1}),a+=1}o*=t}return{nodes:i,edges:r}}}}.call(),function(e){var t=$global.Ogma;t.generators.barabasiAlbert={configure:function(e){if(!e)throw new Error("Missing argument: options");if(!t.utils.isObject(e))throw new TypeError("Invalid argument: options is not an object, was "+e);if(!t.utils.isNumber(e.nbNodes)||e.nbNodes<1)throw new TypeError("Invalid argument: options.nbNodes is not a positive number, was "+e.nbNodes);if(e.nbNodes<3)throw new TypeError("Invalid argument: options.nbNodes is smaller than 3, was "+e.nbNodes);if(!t.utils.isNumber(e.m0)||e.m0<=0)throw new TypeError("Invalid argument: options.m0 is not a positive number, was "+e.m0);if(!t.utils.isNumber(e.m)||e.m<=0)throw new TypeError("Invalid argument: options.m is not a positive number, was "+e.m);if(e.m0>=e.nbNode)throw new TypeError("Invalid argument: options.m0 is greater than options.nbNodes, was "+e.m0);if(e.m>e.m0)throw new TypeError("Invalid argument: options.m is strictly greater than options.m0, was "+e.m)},generate:function(e){var t,n,i,r,o,s,a,d,u={nodes:[],edges:[]},l={},h=[],c=0,g=e.nbNodes,f=e.m0,p=e.m;for(t=0;t<f;t++)u.nodes.push({id:"n"+t,text:"node "+t,x:Math.random(),y:Math.random()}),h[t]=0;for(t=0;t<f;t++)for(n=t+1;n<f;n++)i={id:"e"+c++,text:"Edge "+c,source:"n"+t,target:"n"+n},l[i.source+"-"+i.target]=i,u.edges.push(i),h[t]++,h[n]++;for(t=f;t<g;t++){for(u.nodes.push({id:"n"+t,text:"node "+t,x:100*Math.random(),y:100*Math.random()}),h[t]=0,r=0,n=0;n<t;n++)r+=h[n];for(o=0,s=0;s<p;s++)for(a=Math.random(),d=0,n=0;n<t;n++)if(!l[t+"-"+n]&&!l[n+"-"+t]&&(1==t?d=1:d+=h[n]/r+o/(t-s),a<=d)){o+=h[n]/r,i={id:"e"+c++,text:"Edge "+c,source:"n"+t,target:"n"+n},l[i.source+"-"+i.target]=i,u.edges.push(i),h[t]++,h[n]++;break}}return u}}}.call(),function(e){$global.Ogma.geometry=Object.create(null)}.call(),function(e){function t(e,t){return e.x===t.x&&e.y===t.y}var n=$global.Ogma;n.geometry.lineFromPoint=function(e,t,i,r,o,s){s=s||{};var a=n.geometry.distance(e,t,i,r),d=(i-e)/a,u=(r-t)/a,l=.5*o*-u,h=.5*o*d;return s.x1=e-l,s.y1=t-h,s.x2=e+l,s.y2=t+h,s},n.geometry.isPointInLine=function(e,t,i,r,o,s,a){var d=n.geometry.distance(i,r,o,s),u=(o-i)/d*(a/2),l=(s-r)/d*(a/2),h=i+l,c=r-u,g=i-l,f=r+u,p=o+l,y=s-u,v=e-h,m=t-c,_=g-h,b=f-c,x=p-h,w=y-c,A=v*_+m*b,E=_*_+b*b,C=v*x+m*w,S=x*x+w*w;return 0<A&&A<E&&0<C&&C<S},n.geometry.distanceFromLine=function(e,t,n,i,r,o){var s=r-n,a=o-i;return Math.abs(a*e-s*t+r*i+r*o)/Math.sqrt(s*s+a*a)},n.geometry.vectorToLine=function(e,t,n,i,r,o){var s,a,d=r-n,u=o-i,l=u/d,h=i-l*n;return 0===d?(s=n,a=t):(s=(d*e+u*t-h*u)/(d+l*u),a=l*s+h),{x:s-e,y:a-t}},n.geometry.twoSegmentsIntersect=function(e,n,i,r,o){if(o&&(t(e,i)||t(e,r)||t(n,i)||t(n,r)))return!1;var s=(e.y-i.y)*(r.x-i.x)-(e.x-i.x)*(r.y-i.y),a=(n.x-e.x)*(r.y-i.y)-(n.y-e.y)*(r.x-i.x);if(0===a)return!1;var d=s/a;s=(e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y);var u=s/a;return!(d<=0||d>=1||u<=0||u>=1)},n.geometry.lineAngle=function(e,t,n,i){return Math.atan2(i-t,n-e)},n.geometry.orthogonal=function(e,t,i,r,o,s){s=s||{};var a=n.geometry.distance(e,t,i,r),d=(i-e)/a,u=(r-t)/a;return s.x=o*-u,s.y=o*d,s},n.geometry.normalize=function(e,t,i,r,o,s){s=s||{};var a=n.geometry.distance(e,t,i,r);return s.x=(i-e)/a*o,s.y=(r-t)/a*o,s},n.geometry.lineIntersectRectangle=function(e,t,n,i,r,o,s,a){var d=(t-i)/(e-n);if(isNaN(d))return r<e&&e<s&&o<t&&t<a;if(isFinite(d)){var u=d,l=t-e*u,h=(o-l)/u,c=(a-l)/u,g=u*r+l,f=u*s+l;return r<h&&h<s||r<c&&c<s&&o<g&&g<a||o<f&&f<a}return r<e&&e<s&&(t>o&&t<a||i>o&&i<a)}}.call(),function(e){var t=$global.Ogma;t.geometry.rotate=function(e,t,n,i,r,o){o=o||{};var s=Math.cos(r),a=Math.sin(r);return o.x=s*(e-n)-a*(t-i)+n,o.y=a*(e-n)+s*(t-i)+i,o},t.geometry.distance=function(e,t,n,i){return Math.sqrt((e-n)*(e-n)+(t-i)*(t-i))},t.geometry.squaredDistance=function(e,t,n,i){var r=e-n,o=t-i;return r*r+o*o},t.geometry.squareContainsSquare=function(e,t,n,i,r,o){return e-n>=i-o&&e+n>=i+o&&t-n>=r-o&&t+n>=r+o},t.geometry.slope=function(e,t){return(e.y-t.y)/(e.x-t.x)},t.geometry.angle=function(e,n,i){var r=t.geometry.lineAngle(e.x,e.y,n.x,n.y)-t.geometry.lineAngle(i.x,i.y,n.x,n.y);return r<0&&(r+=2*Math.PI),r}}.call(),function(e){var t=$global.Ogma,n=t.geometry.distance;t.geometry.getQuadraticControlPoints=function(e,t,n,i,r,o,s){return s=s||{},s.x=(e+n)/r+(i-t)/o,s.y=(t+i)/r+(e-n)/o,s},t.geometry.getPointOnQuadraticCurve=function(e,t,n,i,r,o,s,a){return a=a||{},a.x=(1-e)*(1-e)*t+2*(1-e)*e*o+e*e*i,a.y=(1-e)*(1-e)*n+2*(1-e)*e*s+e*e*r,a},t.geometry.isPointOnQuadraticCurve=function(e,r,o,s,a,d,u,l,h){var c=n(o,s,a,d);if(Math.abs(e-o)>c||Math.abs(r-s)>c)return!1;var g=n(e,r,o,s),f=n(e,r,a,d),p=.5,y=g<f?-.01:.01,v=100;t.geometry.getPointOnQuadraticCurve(p,o,s,a,d,u,l,i);for(var m,_=n(e,r,i.x,i.y);v-- >0&&p>=0&&p<=1&&_>h&&(y>.001||y<-.001);)m=_,t.geometry.getPointOnQuadraticCurve(p,o,s,a,d,u,l,i),_=n(e,r,i.x,i.y),_>m?(y=-y/2,p+=y):p+y<0||p+y>1?(y/=2,_=m):p+=y;return _<h};t.geometry.SELF_LOOP_SIZE_MULTIPLIER=7,t.geometry.getSelfLoopControlPoints=function(e,t,n,i){return i=i||{},i.x1=e-7*n,i.y1=t,i.x2=e,i.y2=t+7*n,i},t.geometry.getPointOnBezierCurve=function(e,t,n,i,r,o,s,a,d,u){u=u||{};var l=(1-e)*(1-e)*(1-e),h=3*e*(1-e)*(1-e),c=3*e*e*(1-e),g=e*e*e;return u.x=l*t+h*o+c*a+g*i,u.y=l*n+h*s+c*d+g*r,u};var i={};t.geometry.isPointOnBezierCurve=function(e,n,i,r,o,s,a,d,u,l,h){var c=t.geometry.distance(i,r,a,d);if(Math.abs(e-i)>c||Math.abs(n-r)>c)return!1;for(var g,f=t.geometry.distance(e,n,i,r),p=t.geometry.distance(e,n,o,s),y=.5,v=f<p?-.01:.01,m=100,_=t.geometry.getPointOnBezierCurve(y,i,r,o,s,a,d,u,l),b=t.geometry.distance(e,n,_.x,_.y);m-- >0&&y>=0&&y<=1&&b>h&&(v>.001||v<-.001);)g=b,t.geometry.getPointOnBezierCurve(y,i,r,o,s,a,d,u,l,_),b=t.geometry.distance(e,n,_.x,_.y),b>g?(v=-v/2,y+=v):y+v<0||y+v>1?(v/=2,b=g):y+=v;return b<h},t.geometry.quadraticCurveLength=function(e,t,n,i,r,o){var s=Math.sqrt,a=Math.log,d=e-2*n+r,u=t-2*i+o,l=2*n-2*e,h=2*i-2*t,c=4*(d*d+u*u),g=4*(d*l+u*h),f=l*l+h*h,p=2*s(c+g+f),y=s(c),v=2*c*y,m=2*s(f),_=g/y;return(v*p+y*g*(p-m)+(4*f*c-g*g)*a((2*y+_+p)/(_+m)))/(4*v)};var r={};t.geometry.cubicCurveLength=function(e,n,i,o,s,a,d,u){for(var l=0,h=e,c=n,g=.01;g<=1;g+=.01)t.geometry.getPointOnBezierCurve(g,e,n,d,u,i,o,s,a,r),l+=t.geometry.distance(h,c,r.x,r.y),h=r.x,c=r.y;return l}}.call(),function(e){var t=$global.Ogma;t.geometry.unitVector=function(e,n,i,r,o,s){if(s=s||{},0===t.geometry.distance(e,n,i,r))s.x=o,s.y=0;else{var a=o/t.geometry.distance(e,n,i,r);s.x=(i-e)*a,s.y=(r-n)*a}return s}}.call(),function(e){function t(e,t,n,i,r,o){return.5*(-i*r+t*(-n+r)+e*(i-o)+n*o)}function n(e,t){return e<0?e+=t:e>=t&&(e-=t),e}function i(e){for(var t=0;t<e.length;++t)if(r(e,t))return t;return 0}function r(e,t){var i=n(t-1,e.length),r=n(t+1,e.length);if(s.geometry.angle(e[i],e[t],e[r])>Math.PI)return!1;for(var o=0;o<e.length;++o)if(o!==t&&o!==i&&o!==r&&s.geometry.isPointInTriangle(e[o].x,e[o].y,e[i].x,e[i].y,e[r].x,e[r].y,e[t].x,e[t].y))return!1;return!0}function o(e){if(3===e.length)return[[e[0].index,e[1].index,e[2].index]];var t=i(e),r=[e[n(t-1,e.length)].index,e[t].index,e[n(t+1,e.length)].index];e.splice(t,1);var s=o(e);return s.push(r),s}var s=$global.Ogma,a=s.geometry.distance;s.geometry.isPointInTriangle=function(e,n,i,r,o,s,a,d){var u=t(i,r,o,s,a,d),l=1/(2*u)*(r*a-i*d+(d-r)*e+(i-a)*n),h=1/(2*u)*(i*s-r*o+(r-s)*e+(o-i)*n);return l>0&&h>0&&1-l-h>0},s.geometry.incenter=function(e,t,n,i,r,o){var s=a(n,i,r,o),d=a(e,t,r,o),u=a(e,t,n,i),l=s+d+u;return 0===l?{x:e,y:t}:{x:(s*e+d*n+u*r)/l,y:(s*t+d*i+u*o)/l}},s.geometry.centroid=function(e,t,n,i,r,o){return{x:(e+n+r)/3,y:(t+i+o)/3}},s.geometry.isPointInRectangle=function(e,t,n,i,r,o){return e>=n&&e<=r&&t>=i&&t<=o},s.geometry.isPointInPolygon=function(t,n,i,r){r===e&&(r=i.length);for(var o=r-1,s=!1,a=0;a<r;++a)(i[a].y<n&&i[o].y>=n||i[o].y<n&&i[a].y>=n)&&(i[a].x<=t||i[o].x<=t)&&(s^=i[a].x+(n-i[a].y)/(i[o].y-i[a].y)*(i[o].x-i[a].x)<t),o=a;return s},s.geometry.triangulatePolygon=function(e){for(var t=e.length,i=(t-2)*Math.PI,r=0,a=0;a<t;++a){r+=s.geometry.angle(e[n(a-1,t)],e[a],e[n(a+1,t)])}var d=e.slice();for(a=0;a<d.length;++a)d[a].index=a;return r-1e-4>i&&d.reverse(),o(d)}}.call(),function(e){$global.Ogma.imports={}}.call(),function(){function e(e){for(var t=new Int32Array(e.length),n=0,i=e.length;n<i;++n)t[n]=e.charCodeAt(n);return t}function t(e,t,n,i){var r=i.length;if(n-t!==r)return!1;for(var o=0;o<r;++o)if(e[t+o]!==i[o])return!1;return!0}function n(e,t,n,i){return r(e.tags,t,n,i)}function i(e,t,n,i){return r(e.attributes,t,n,i)}function r(e,n,i,r){for(var o=e.length,s=0;s<o;++s)if(t(n,i,r,e[s]))return s;return e.push(n.slice(i,r)),o}function o(e){return e.charCodeAt(0)}function s(e,t,n){var r,o,s;if(n=u(t,n),(r=t[n])===v||r===x)return n;for(o=n,n=h(t,n),s=i(e,t,o,n);t[n]!==m;)++n;for(++n,o=n;(r=t[n])!==m;)r===w&&++n,++n;return e.tokens.push(L,s,o,n),n+1}function a(e,t){var i,r,o,a,l=e.length,c={tags:[],attributes:[],tokens:[]},g=c.tokens;for(t=u(e,t);t<l;){if((a=e[t])===y){if(t=u(e,++t),e[t]===x)for(g.push(N);e[++t]!==v;);else{for(i=t,t=h(e,i),o=n(c,e,i,t),g.push(T,o),a=e[t];a!==v&&a!==x;)t=s(c,e,t),a=e[t];if(a===x)for(g.push(N);e[++t]!==v;);}t+=1}else{for(i=t;e[++t]!==y;);for(r=t-1;d(e[r]);)--r;g.push(P,i,r+1)}t=u(e,t)}return c}function d(e){return e===p||e===_||e===b}function u(e,t){for(;d(e[t]);)++t;return t}function l(e){return e>=A&&e<=E||e>=C&&e<=S||e===z||e>=I&&e<=O}function h(e,t){for(;l(e[t]);)++t;return t}function c(e,t){var n=["this.id = undefined;","this.text = undefined;","this.color = undefined;","this.size = undefined;"];e?n.push("this.x = undefined;","this.y = undefined;"):n.push("this.source = undefined;","this.target = undefined;");var i=Object.keys(t);i.length&&n.push("  this.data = {");for(var r=0;r<i.length;++r){var o=i[r],s=t[o],a=s.title;n.push('  "'+a+'": '+(void 0!==s.default?JSON.stringify(s.default):void 0)+(r===i.length-1?"":","))}return i.length&&n.push("};"),new Function(n.join("\n"))}function g(e){return-1===e.indexOf("\\")?e:e=e.replace(/\\"/g,'"')}var f=$global.Ogma,p=o(" "),y=o("<"),v=o(">"),m=o('"'),_=o("\n"),b=o("\r"),x=o("/"),w=(o("="),o("\\")),A=o("a"),E=o("z"),C=o("A"),S=o("Z"),I=o("0"),O=o("9"),z=o(":"),T=-1,N=-2,L=-3,P=-4;f.imports.gexf=function(t){var n=e(t),i=a(n,t.indexOf("<gexf ")),r={},o=[],s={},d=[];i.tags.forEach(function(e,t){var n=String.fromCharCode.apply(null,e);r[n]=t,o.push(n)}),i.attributes.forEach(function(e,t){var n=String.fromCharCode.apply(null,e);s[n]=t,d.push(n)});for(var u,l=r.attributes,h=r.attribute,f=r.node,p=r.edge,y=r.default,v=r["viz:position"],m=r["viz:size"],_=r["viz:color"],b=r.attvalue,x=s.class,w=s.id,A=s.type,E=s.title,C=s.label,S=s.source,I=s.target,O=s.x,z=s.y,k=s.r,F=s.g,M=s.b,D=s.a,R=s.value,B=s.for,j=s.weight,U={float:1,double:1,integer:2,boolean:3,string:4,"list-string":5},X=0,W=i.tokens,V=W.length,Y=new Array(16),G=0,q=0,H=0,J=!0,Z={},Q={},K=null,$=null,ee=null,te=void 0,ne=null,ie=0,re=0,oe=0,se=1,ae=null,de=void 0,ue=!1,le=!0,he=null,ce=null,ge=[],fe=[],pe=0;X<V;){var ye=W[X];if(ye===T)q=G,G=W[X+1],Y[H]=G,H+=1,G===f?(he||(he=c(!0,Z)),ne=new he,le=!0,u=Z):G===p&&(ce||(ce=c(!1,Q)),ne=new ce,le=!1,u=Q),X+=2;else if(ye===N){if(K&&G===h){u=J?Z:Q;var ve=U[$],me=te;me&&(1===ve?me=+me:2===ve?me=0|+me:3===ve?me="true"===me:5===ve&&(me=me.split(" ").filter(function(e){return e}))),u[K]={title:ee||K,type:ve,default:me},K=null,ee=null,$=null,te=void 0}else if(G===f&&4===H)ue&&(ne.color="rgba("+ie+", "+re+", "+oe+", "+se+")",ie=0,re=0,oe=0,se=1,ue=!1),ne.id||(ne.id=++pe),ge.push(ne);else if(G===p&&4===H)ne.id||(ne.id=++pe),fe.push(ne);else if(G===b&&6===H&&ae){var _e=(le?Z:Q)[ae];_e&&(void 0===de?de=_e.default:(ve=_e.type)&&(de=1===ve?+de:2===ve?0|+de:3===ve?"true"===de:5===ve?de.split(" ").filter(function(e){return e}).map(function(e){return g(e)}):g(de)),ne.data[u[ae].title]=de),ae=null,de=null}H-=1,G=q,q=Y[H-2],X+=1}else if(ye===L){var be=W[X+1];me=t.substring(W[X+2],W[X+3]),G===l?be===x&&(J="edges"!==me):G===h?be===w?K=me:be===A?$=me:be===E&&(ee=me):G!==f&&G!==p||4!==H?G===v&&5===H?be===O?ne.x=+me:be===z&&(ne.y=-me):G===_&&5===H?(ue=!0,be===k?ie=me:be===F?re=me:be===M?oe=me:be===D&&(se=me)):G===m&&5===H?be===R&&(ne.size=+me):G===b&&6===H&&(be===B||be===w?ae=me:be===R&&(de=me)):be===w?ne.id=me:be===C?ne.text=me:be===S?ne.source=me:be===I?ne.target=me:be===j&&(ne.size=+me),X+=4}else{if(ye!==P)throw new Error("at index "+X+": token "+ye);me=t.substring(W[X+1],W[X+2]),G===y&&(te=me),X+=3}}return{nodes:ge,edges:fe}}}(),function(e){var t=$global.Ogma;t.imports.json=function(e){var t;try{t=JSON.parse(e)}catch(e){t=null}for(var n=t.nodes||[],i=t.edges||[],r=0,o=n.length;r<o;++r){var s=n[r];"string"==typeof s.size&&(s.size=+s.size),"string"==typeof s.x&&(s.x=+s.x),"string"==typeof s.y&&(s.y=+s.y)}for(var a=0,d=i.length;a<d;++a){var u=i[a];"string"==typeof u.size&&(u.size=+u.size)}return t},t.imports.json.webWorkerCompatible=!1}.call(),function(e){$global.Ogma.layouts=Object.create(null)}.call(),function(){function e(e){return void 0===e||"number"==typeof e&&isFinite(e)&&e>0}var t=$global.Ogma;t.layouts.grid={configure:function(n,i){var r,o,s=i.graph.nodes,a=n.sortBy;if(!e(n.nbRows))throw new TypeError('"nbRows" should be a positive integer');if(!e(n.nbCols))throw new TypeError('"nbCols" should be a positive integer');n.nodes&&(s=i.graph.getNodeList(n.nodes));var d=s.length;n.nbRows?(r=n.nbRows,o=Math.ceil(d/r)):n.nbCols?(o=n.nbCols,r=Math.ceil(d/o)):(o=Math.ceil(Math.sqrt(d)),r=Math.ceil(d/o));for(var u=[],l=0;l<d;++l){var h=s[l],c=l;h.pinned||("random"===a?c=Math.random():a&&(c=t.utils.strToObjectRef(h,a)),u.push({id:h.id,attr:c}))}var g=i.locate.nodesBoundingBox(s),f=1.1*g.maxSize,p=g.minX+f,y=g.maxX-f,v=g.minY+f,m=g.maxY-f;return g.width<f*o*2&&(p=g.cx-f*o+f,y=g.cx+f*o-f),g.height<f*r*2&&(v=g.cy-f*r+f,m=g.cy+f*r-f),{sort:!!a,nbRows:r,nbCols:o,nodes:u,reverse:!!n.reverse,minX:p,maxX:y,minY:v,maxY:m}},update:function(e){e.sort&&e.nodes.sort(function(e,t){var n=e.attr,i=t.attr;return n<i?-1:n>i?1:0}),e.reverse&&e.nodes.reverse();var t=(e.maxX-e.minX)/(e.nbCols-1),n=(e.maxY-e.minY)/(e.nbRows-1),i=0,r=0,o=e.minX,s=e.minY;isFinite(t)||(t=0),isFinite(n)||(n=0);for(var a=0;a<e.nodes.length;++a){var d=e.nodes[a];d.x=o+i*t,d.y=s+r*n,(i+=1)===e.nbCols&&(r+=1,i=0)}return e.nodes},onSync:function(e,t,n){for(var i=0;i<e.length;++i){var r=e[i],o=n.graph.getNode(r.id);o.x=r.x,o.y=r.y}}}}(),function(e){var t=$global.Ogma;t.layouts.forceLink={context:function(){return{}},update:function(e,t){function n(e,t,n,i){var r=n-e,o=i-t;return Math.sqrt(r*r+o*o)}function i(e,t,n,i,r){return(r-i)*(e-t)/(n-t)+i}function r(e){return Math.acos(e.x/Math.sqrt(e.x*e.x+e.y*e.y))}function o(e,t,n,i){return{xi:-(i-t),yi:n-e,xi_prime:i-t,yi_prime:-(n-e)}}function s(e,t){return{x:(e.xi_prime-e.xi)/t,y:(e.yi_prime-e.yi)/t}}function a(e,t,n,i,r){return{x:e+(n-e)*r,y:t+(i-t)*r}}function d(e,t){if(e%g.ppn!=0)throw new Error('Invalid argument in np: "i" is not correct ('+e+").");if(e!==parseInt(e))throw new TypeError('Invalid argument in np: "i" is not an integer.');if(t in v)return e+v[t];throw new Error("ForceLink.Worker - Inexistant node property given ("+t+").")}function u(e,t){switch(t.randomize){case"globally":return Math.random()*(t.randomizeFactor||1);case"locally":return e+Math.random()*(t.randomizeFactor||1);default:return e}}function l(e,t){var n,i,r,o=e.nodes,s=e.edges,a=Object.keys(e.nodes),d=Object.keys(e.edges),l=a.length*g.ppn,h=d.length*g.ppe,c={},f=new Float32Array(l),p=new Float32Array(h);for(n=i=0,r=a.length;n<r;n++){var y=a[n],v=o[y];c[y]=i,f[i]=u(v.x,t),f[i+1]=u(v.y,t),f[i+2]=0,f[i+3]=0,f[i+4]=0,f[i+5]=0,f[i+6]=1+v.degree,f[i+7]=1,f[i+8]=v.size,f[i+9]=v.pinned||0,i+=g.ppn}for(n=i=0,r=d.length;n<r;n++){y=d[n];var m=s[y];p[i]=c[m.source],p[i+1]=c[m.target],p[i+2]=m.weight||0,i+=g.ppe}return{nodes:f,edges:p}}function h(){var e,t,u,l,h,c,v,m,_,b,x,w,A,E,C,S,I;for(u=0;u<g.nodesLength;u+=g.ppn)p[u+4]=p[u+2],p[u+5]=p[u+3],p[u+2]=0,p[u+3]=0;if(g.settings.outboundAttractionDistribution){for(_=0,u=0;u<g.nodesLength;u+=g.ppn)_+=p[u+6];_/=g.nodesLength}if(g.settings.barnesHutOptimize){var O,z,T=1/0,N=-1/0,L=1/0,P=-1/0;for(f=[],u=0;u<g.nodesLength;u+=g.ppn)T=Math.min(T,p[u]),N=Math.max(N,p[u]),L=Math.min(L,p[u+1]),P=Math.max(P,p[u+1]);for(f[0]=-1,f[1]=(T+N)/2,f[2]=(L+P)/2,f[3]=Math.max(N-T,P-L),f[4]=-1,f[5]=-1,f[6]=0,f[7]=0,f[8]=0,e=1,u=0;u<g.nodesLength;u+=g.ppn)for(t=0;;)if(f[t+5]>=0)O=p[u]<f[t+1]?p[u+1]<f[t+2]?f[t+5]:f[t+5]+g.ppr:p[u+1]<f[t+2]?f[t+5]+2*g.ppr:f[t+5]+3*g.ppr,f[t+7]=(f[t+7]*f[t+6]+p[u]*p[u+6])/(f[t+6]+p[u+6]),f[t+8]=(f[t+8]*f[t+6]+p[u+1]*p[u+6])/(f[t+6]+p[u+6]),f[t+6]+=p[u+6],t=O;else{if(f[t]<0){f[t]=u;break}if(f[t+5]=e*g.ppr,v=f[t+3]/2,m=f[t+5],f[m]=-1,f[m+1]=f[t+1]-v,f[m+2]=f[t+2]-v,f[m+3]=v,f[m+4]=m+g.ppr,f[m+5]=-1,f[m+6]=0,f[m+7]=0,f[m+8]=0,m+=g.ppr,f[m]=-1,f[m+1]=f[t+1]-v,f[m+2]=f[t+2]+v,f[m+3]=v,f[m+4]=m+g.ppr,f[m+5]=-1,f[m+6]=0,f[m+7]=0,f[m+8]=0,m+=g.ppr,f[m]=-1,f[m+1]=f[t+1]+v,f[m+2]=f[t+2]-v,f[m+3]=v,f[m+4]=m+g.ppr,f[m+5]=-1,f[m+6]=0,f[m+7]=0,f[m+8]=0,m+=g.ppr,f[m]=-1,f[m+1]=f[t+1]+v,f[m+2]=f[t+2]+v,f[m+3]=v,f[m+4]=f[t+4],f[m+5]=-1,f[m+6]=0,f[m+7]=0,f[m+8]=0,e+=4,O=p[f[t]]<f[t+1]?p[f[t]+1]<f[t+2]?f[t+5]:f[t+5]+g.ppr:p[f[t]+1]<f[t+2]?f[t+5]+2*g.ppr:f[t+5]+3*g.ppr,f[t+6]=p[f[t]+6],f[t+7]=p[f[t]],f[t+8]=p[f[t]+1],f[O]=f[t],f[t]=-1,z=p[u]<f[t+1]?p[u+1]<f[t+2]?f[t+5]:f[t+5]+g.ppr:p[u+1]<f[t+2]?f[t+5]+2*g.ppr:f[t+5]+3*g.ppr,O!==z){f[z]=u;break}t=O}}if(g.settings.barnesHutOptimize)for(b=g.settings.scalingRatio,u=0;u<g.nodesLength;u+=g.ppn)for(t=0;;)if(f[t+5]>=0){if(S=Math.sqrt((p[u]-f[t+7])*(p[u]-f[t+7])+(p[u+1]-f[t+8])*(p[u+1]-f[t+8])),2*f[t+3]/S<g.settings.barnesHutTheta){if(x=p[u]-f[t+7],w=p[u+1]-f[t+8],g.settings.adjustSizes?S>0?(I=b*p[u+6]*f[t+6]/S/S,p[u+2]+=x*I,p[u+3]+=w*I):S<0&&(I=-b*p[u+6]*f[t+6]/S,p[u+2]+=x*I,p[u+3]+=w*I):S>0&&(I=b*p[u+6]*f[t+6]/S/S,p[u+2]+=x*I,p[u+3]+=w*I),f[t+4]<0)break;t=f[t+4];continue}t=f[t+5]}else{if(f[t]>=0&&f[t]!==u&&(x=p[u]-p[f[t]],w=p[u+1]-p[f[t]+1],S=Math.sqrt(x*x+w*w),g.settings.adjustSizes?S>0?(I=b*p[u+6]*p[f[t]+6]/S/S,p[u+2]+=x*I,p[u+3]+=w*I):S<0&&(I=-b*p[u+6]*p[f[t]+6]/S,p[u+2]+=x*I,p[u+3]+=w*I):S>0&&(I=b*p[u+6]*p[f[t]+6]/S/S,p[u+2]+=x*I,p[u+3]+=w*I)),f[t+4]<0)break;t=f[t+4]}else for(b=g.settings.scalingRatio,l=0;l<g.nodesLength;l+=g.ppn)for(h=0;h<l;h+=g.ppn)x=p[l]-p[h],w=p[l+1]-p[h+1],g.settings.adjustSizes?(S=Math.sqrt(x*x+w*w)-p[l+8]-p[h+8],S>0?(I=b*p[l+6]*p[h+6]/S/S,p[l+2]+=x*I,p[l+3]+=w*I,p[h+2]+=x*I,p[h+3]+=w*I):S<0&&(I=100*b*p[l+6]*p[h+6],p[l+2]+=x*I,p[l+3]+=w*I,p[h+2]-=x*I,p[h+3]-=w*I)):(S=Math.sqrt(x*x+w*w))>0&&(I=b*p[l+6]*p[h+6]/S/S,p[l+2]+=x*I,p[l+3]+=w*I,p[h+2]-=x*I,p[h+3]-=w*I);for(m=g.settings.gravity/g.settings.scalingRatio,b=g.settings.scalingRatio,u=0;u<g.nodesLength;u+=g.ppn)I=0,x=p[u],w=p[u+1],S=Math.sqrt(x*x+w*w),g.settings.strongGravityMode?S>0&&(I=b*p[u+6]*m):S>0&&(I=b*p[u+6]*m/S),p[u+2]-=x*I,p[u+3]-=w*I;for(b=1*(g.settings.outboundAttractionDistribution?_:1),c=0;c<g.edgesLength;c+=g.ppe)l=y[c],h=y[c+1],v=y[c+2],C=Math.pow(v,g.settings.edgeWeightInfluence),x=p[l]-p[h],w=p[l+1]-p[h+1],g.settings.adjustSizes?(S=Math.sqrt(x*x+w*w)-p[l+8]-p[h+8],g.settings.linLogMode?g.settings.outboundAttractionDistribution?S>0&&(I=-b*C*Math.log(1+S)/S/p[l+6]):S>0&&(I=-b*C*Math.log(1+S)/S):g.settings.outboundAttractionDistribution?S>0&&(I=-b*C/p[l+6]):S>0&&(I=-b*C)):(S=Math.sqrt(x*x+w*w),g.settings.linLogMode?g.settings.outboundAttractionDistribution?S>0&&(I=-b*C*Math.log(1+S)/S/p[l+6]):S>0&&(I=-b*C*Math.log(1+S)/S):g.settings.outboundAttractionDistribution?(S=1,I=-b*C/p[l+6]):(S=1,I=-b*C)),S>0&&(p[l+2]+=x*I,p[l+3]+=w*I,p[h+2]-=x*I,p[h+3]-=w*I);var k,F,M,D,R=0;if(g.settings.adjustSizes)for(u=0;u<g.nodesLength;u+=g.ppn)p[d(u,"pinned")]||(k=Math.sqrt(p[u+2]*p[u+2]+p[u+3]*p[u+3]),k>g.maxForce&&(p[u+2]=p[u+2]*g.maxForce/k,p[u+3]=p[u+3]*g.maxForce/k),F=p[u+6]*Math.sqrt((p[u+4]-p[u+2])*(p[u+4]-p[u+2])+(p[u+5]-p[u+3])*(p[u+5]-p[u+3])),M=Math.sqrt((p[u+4]+p[u+2])*(p[u+4]+p[u+2])+(p[u+5]+p[u+3])*(p[u+5]+p[u+3]))/2,D=.1*Math.log(1+M)/(1+Math.sqrt(F)),A=p[u],E=p[u+1],p[u]=p[u]+p[u+2]*(D/g.settings.slowDown),p[u+1]=p[u+1]+p[u+3]*(D/g.settings.slowDown),x=p[u],w=p[u+1],S=Math.sqrt((x-A)*(x-A)+(w-E)*(w-E)),R+=S);else for(u=0;u<g.nodesLength;u+=g.ppn)p[d(u,"pinned")]||(F=p[u+6]*Math.sqrt((p[u+4]-p[u+2])*(p[u+4]-p[u+2])+(p[u+5]-p[u+3])*(p[u+5]-p[u+3])),M=Math.sqrt((p[u+4]+p[u+2])*(p[u+4]+p[u+2])+(p[u+5]+p[u+3])*(p[u+5]+p[u+3]))/2,D=p[u+7]*Math.log(1+M)/(1+Math.sqrt(F)),p[u+7]=Math.min(1,Math.sqrt(D*(p[u+2]*p[u+2]+p[u+3]*p[u+3])/(1+Math.sqrt(F)))),A=p[u],E=p[u+1],p[u]=p[u]+p[u+2]*(D/g.settings.slowDown),p[u+1]=p[u+1]+p[u+3]*(D/g.settings.slowDown),x=p[u],w=p[u+1],S=Math.sqrt((x-A)*(x-A)+(w-E)*(w-E)),R+=S);if(g.iterations++,g.settings.autoStop&&(g.converged=g.iterations>g.settings.maxIterations||R/g.nodesLength<g.settings.avgDistanceThreshold,g.converged&&g.settings.alignNodeSiblings)){var B,j,U={},X={};for(c=0;c<g.edgesLength;c+=g.ppe)l=y[c],h=y[c+1],l!==h&&(U[l]=U[l]||{},U[h]=U[h]||{},U[l][h]=!0,U[h][l]=!0);Object.keys(U).forEach(function(e){e=~~e,j=Object.keys(U[e]),2==j.length&&(B=j[0]+";"+j[1],B in X?X[B].push(e):(B=j[1]+";"+j[0],X[B]||(X[B]=[~~j[1],~~j[0]]),X[B].push(e)))});var W,V,Y,G,q,H,J,Z,Q,K,$,ee,te,ne,ie,re=g.settings.nodeSiblingsAngleMin;Object.keys(X).forEach(function(e){if(V=X[e].shift(),Y=X[e].shift(),W=X[e].filter(function(e){return!p[d(e,"pinned")]}),1!=W.length){if(H=p[V],J=p[V+1],Z=p[Y],Q=p[Y+1],G=Object.keys(U[V]).length,q=Object.keys(U[Y]).length,K=i(G/(G+q),0,1,.25,.75),ee=a(H,J,Z,Q,K),te=o(H,J,Z,Q),$=n(H,J,Z,Q),ne=s(te,$),ie=r(ne),2*re>Math.PI)throw new Error("ForceLink.Worker - Invalid parameter: angleMin must be smaller than 2 PI.");re>0&&(ie<re||ie>Math.PI-re&&ie<=Math.PI?ne={x:2*Math.cos(Math.PI-re),y:2*Math.sin(Math.PI-re)}:(ie>2*Math.PI-re||ie>=Math.PI&&ie<Math.PI+re)&&(ne={x:2*Math.cos(re),y:2*Math.sin(re)}));var t=0,u=1,l=1;W.length%2==1&&(l=0,t=1);for(var h=0;h<W.length;h++)p[W[h]]=ee.x+u*ne.x*l*(t||h>=2?g.settings.nodeSiblingsScale:2*g.settings.nodeSiblingsScale/3),p[W[h]+1]=ee.y+u*ne.y*l*(t||h>=2?g.settings.nodeSiblingsScale:2*g.settings.nodeSiblingsScale/3),u=-u,l+=(h+t)%2}})}}function c(e){for(var t=Object.keys(e),n={},i=0;i<p.length;i+=g.ppn){var r=t[i/g.ppn];n[r]={id:r,x:p[i],y:p[i+1]}}return n}var g;t.W?g=t.W:(g={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:100,strongGravityMode:!0,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:10,iterationsPerRender:10,maxIterations:1e3,avgDistanceThreshold:.01,autoStop:!0,alignNodeSiblings:!0,nodeSiblingsScale:5,nodeSiblingsAngleMin:0}},t.W=g,function(e,n){var i=l(e,n);t.NodeMatrix=i.nodes,t.EdgeMatrix=i.edges,g.nodesLength=t.NodeMatrix.length,g.edgesLength=t.EdgeMatrix.length}(e,e.config),g.settings=function(){var e,t,n={},i=arguments.length;for(e=i-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n}(e.config,g.settings),t.nodes=e.nodes,t.edges=e.edges);var f,p=t.NodeMatrix,y=t.EdgeMatrix,v={x:0,y:1,dx:2,dy:3,old_dx:4,old_dy:5,mass:6,convergence:7,size:8,pinned:9};return function(){if(g.settings.autoStop)for(;!g.converged;)h();else for(var e=0===g.iterations?g.settings.startingIterations:g.iterations+g.settings.iterationsPerRender;g.iterations!==e;)h();return c(t.nodes)}()},isRunning:function(e){return!e.W.settings.autoStop},configure:function(e,n,i){var r=n.settings.get("shapes"),o=r.nodeInnerStrokeWidth+r.nodeOuterStrokeWidth,s=n.graph.nodes,a=[],d={},u={};e.nodes&&(s=n.graph.getNodeList(e.nodes),e=t.utils.deepCopy(e),delete e.nodes);var l=0,h=0;for(v=0;v<s.length;++v){var c=s[v];d[c.id]={x:c.x,y:c.y,degree:c.degree,size:c.size+o,pinned:c.pinned},l+=c.x,h+=c.y}if(s.length>1)for(s[0].x,s[0].y,v=0;v<s.length;++v){var g=d[s[v].id];if(!g.pinned){var f=1e-10*Math.random(),p=1e-10*Math.random();g.x+=f,g.y+=p,l+=f,h+=p}}l/=s.length,h/=s.length,i.barycentre={x:l,y:h};for(var y=new t.utils.Set,v=0;v<s.length;++v)for(var m=s[v].edges,_=0;_<m.length;++_)b=m[_],d[b.source]&&d[b.target]&&y.add(n.topology.edgeBiDirection(b))&&a.push(b);for(v=0;v<a.length;++v){var b=a[v];u[b.id]={source:b.source,target:b.target}}return{nodes:d,edges:u,config:e}},onSync:function(e,t,n){var i=n.graph,r=Object.keys(e),o=0,s=0;for(u=0;u<r.length;++u)l=r[u],h=e[l],o+=h.x,s+=h.y;for(var a=o/r.length-t.barycentre.x,d=s/r.length-t.barycentre.y,u=0;u<r.length;++u){var l=r[u],h=e[l],c=i.getNode(l);c&&(c.x=h.x-a,c.y=h.y-d)}}}}.call(),function(){var e=$global.Ogma;e.layouts.concentric={context:function(){return{dijkstra:function(e,t,n,i,r){var o,s,a,d=Math.pow(2,31)-1,u=new Int32Array(i),l=new Int32Array(i),h=new Int8Array(i);for(a=0;a<i;++a)u[a]=d,l[a]=-1;for(a=0;a<i;++a)void 0!==(o=t[a])&&(u[o]=d,l[o]=-1);for(u[r]=0;;){var c=d,g=-1;for(a=0;a<n;++a)o=t[a],s=u[o],!h[o]&&s<c&&(c=s,g=o,h[o]=!0);if(-1===g)break;var f=e[g],p=f.length,y=c+1;for(a=0;a<p;++a)o=f[a],s=u[o],y<s&&(u[o]=y,l[o]=g)}return u},determinePropertyType:function(e,t,n){for(var i=0;i<n;++i)if("number"!=typeof e[t[i]])return"string";return"number"}}},configure:function(t,n){if(void 0===t.centralNode)throw new Error('concentric layout: missing parameter "centralNode"');var i,r,o,s=n.graph.getNode(t.centralNode,!0),a=n.graph._elts.nodes,d=null;if(t.sortBy)if("random"===t.sortBy)d="random";else for(d=new Array(a.totalSize),i=0,r=a.totalSize;i<r;++i){var u=a.attributes.ref[i];u&&(d[i]=e.utils.strToObjectRef(u,t.sortBy))}var l=n.nodes;t.nodes&&(l=n.graph.getNodeList(t.nodes));var h=[];for(i=0,r=l.length;i<r;i++)o=l[i],o.pinned&&o.__index!==s.__index||h.push(o.__index);var c=h.length;if(-1===h.indexOf(s.__index))throw new RangeError("concentric layout: central node does not belong to the provided list of nodes");return{sourceNodeIndex:s.__index,centerX:"number"===t.centerX?t.centerX:s.x,centerY:"number"===t.centerY?t.centerY:s.y,list:h,size:c,totalSize:a.totalSize,attributes:{adjacentNodes:a.attributes.adjacentNodes.map(function(e){return e?e.map(function(e){return e.__index}):[]}),size:a.attributes.size},sortAttr:d,clockWise:void 0===t.clockWise||t.clockWise,circleHopRatio:t.circleHopRatio||5,allowOverlap:!!t.allowOverlap}},update:function(e,t){var n,i=e.attributes.adjacentNodes,r=e.attributes.size,o=e.list,s=e.size,a=e.sourceNodeIndex,d=e.centerX,u=e.centerY,l=e.sortAttr,h=new Float32Array(e.totalSize),c=new Float32Array(e.totalSize),g=t.dijkstra(i,o,e.size,e.totalSize,a),f=0,p={};for(n=0;n<s;++n){var y=r[o[n]];y>f&&(f=y)}var v=f*e.circleHopRatio,m=0,_=0,b=Math.PI/9;for(n=0;n<s;++n){var x=o[n],w=g[x],A=p[w];A||(A=[],p[w]=A),A.push(x)}var E=null,C=!0;if("random"===l)E=function(){return Math.random()-.5};else if(l){var S=t.determinePropertyType(l,o,y);E="number"===S?function(e,t){return l[e]-l[t]}:function(e,t){return l[e]<l[t]?-1:1}}else C=!1;var I=Object.keys(p).sort(function(e,t){return parseInt(e)-parseInt(t)});for(n=0;n<I.length;++n){var O=p[I[n]],z=O.length,T=_,N=2*Math.PI/z;if(0!==n&&!e.allowOverlap){var L=2*Math.PI*m,P=0,k=0;for(F=0;F<z;++F)P+=r[O[F]];(k=2*P*Math.SQRT2)>L&&(m+=k/(2*Math.PI)-m)}C&&(O.sort(E),e.clockWise||O.reverse());for(var F=0;F<z;++F){x=O[F],h[x]=Math.cos(T)*m+d,c[x]=Math.sin(T)*m+u,y=r[x];T+=N*(e.allowOverlap?1:y/P*z)}m+=v,_+=b}return{x:h,y:c,indexes:o}},isRunning:function(){return!1},onSync:function(e,t,n){for(var i=n.graph.nodeAttributes.x,r=n.graph.nodeAttributes.y,o=e.indexes,s=e.x,a=e.y,d=o.length,u=0;u<d;++u){var l=o[u];i[l]=s[l],r[l]=a[l]}}}}.call(),function(e){function t(e,t){for(var n=e.BYTES_PER_ELEMENT*t,i=0;i<s.length;++i){var r=s[i];if(r.byteLength>=n)return s.splice(i,1),new e(r)}return new e(t)}function n(e){for(var t=0;t<a.length;++t){var n=a[t];if(n.length>=e)return a.splice(t,1),n}return new Array(e)}function i(e){for(var t=e.buffer,n=0;n<s.length;++n)if(s[n].byteLentgh>t.byteLength)return void s.splice(n,0,t);s.push(t)}function r(e){for(var t=0;t<a.length;++t)if(a[t].length>e.length)return void a.splice(t,0,e);s.push(e)}var o=$global.Ogma;o.memory={};var s=[],a=[];o.memory.allocate=function(e,i){return i=o.utils.upperPowerOf(i,2,8),e===Array?n(i):t(e,i)},o.memory.release=function(e){return e.constructor===Array?r(e):i(e)},o.memory.expand=function(t,n,i){if(n=n?o.utils.upperPowerOf(n,2):2*t.length,i===e&&(i=!0),t.length>=n)return t;var r=o.memory.allocate(t.constructor,n);if(i)if(t.constructor===Array)for(var s=t.length,a=0;a<s;++a)r[a]=t[a];else r.set(t);return o.memory.release(t),r}}.call(),function(e){$global.Ogma.pathfinding=Object.create(null)}.call(),function(undefined){function toString(e){return"function"==typeof e?e.toString():"undefined"}var Ogma=$global.Ogma;Ogma.pathfinding.astar={configure:function(e,t,n){if(!e.source)throw new Error("source node is not defined");if(!e.target)throw new Error("target node is not defined");if(-1===["undefined","function"].indexOf(_typeof(e.pathLengthFunction)))throw new TypeError('"pathLengthFunction" is not a function');if(-1===["undefined","function"].indexOf(_typeof(e.heuristicLengthFunction)))throw new TypeError('"heuristicLengthFunction" is not a function');var i=e.directed===undefined||e.directed?"adjacentOutNodes":"adjacentNodes",r=n.graph.getNode(e.source,!0),o=n.graph.getNode(e.target,!0),s=n.graph.nodeAttributes[i].map(function(e){return e._indexSet.array.slice(0,e._indexSet.size)});return{source:r.__index__,target:o.__index__,adjacentNodesList:s,pathLengthFunction:toString(e.pathLengthFunction),heuristicLengthFunction:toString(e.heuristicLengthFunction)}},compute:function compute(data){var source=data.source,target=data.target;if(source===target)return[source];var adjacentNodesList=data.adjacentNodesList,pathLengthFunction=data.pathLengthFunction||DEFAULT_PATH_LENGTH_FUNCTION,heuristicLengthFunction=data.heuristicLengthFunction||pathLengthFunction,totalNbNodes=adjacentNodesList.length;eval("var pathLengthFunction = "+data.pathLengthFunction);for(var closedSet=[],openSet=[],cameFrom=new Int32Array(totalNbNodes),gScore=new Float32Array(totalNbNodes),fScore=new Float32Array(totalNbNodes),i=0;i<totalNbNodes;++i)cameFrom[i]=-1,gScore[i]=1/0,fScore[i]=1/0;for(openSet.push(source),gScore[sourceIndex]=0,fScore[sourceIndex]=heuristicLengthFunction(source,target);0!==openSet._indexSet.size;){var len=openSet._indexSet.size,currentNode=openSet._elementAttributes.ref[openSet._indexSet.array[0]],currentNodeIndex=0,minScore=fScore[currentNode.__index__];for(i=1;i<len;++i){var node=openSet._elementAttributes.ref[openSet._indexSet.array[i]],score=fScore[node.__index__];score<minScore&&(minScore=score,currentNode=node,currentNodeIndex=i)}if(currentNode===target)return constructPath(cameFrom,sourceIndex,targetIndex,refs);openSet.removeByIndex(currentNodeIndex),closedSet.add(currentNode);var neighbors=this._topology.getAdjacentNodes(currentNode,adjacencyOptions);for(i=0;i<neighbors.length;++i){var n=neighbors[i],nIndex=n.__index__;if(!closedSet.has(n)){var gScoreTentative=gScore[currentNode.__index__]+pathLengthFunction(currentNode,n);!openSet.add(n)&&gScoreTentative>=gScore[nIndex]||(cameFrom[nIndex]=currentNode.__index__,gScore[nIndex]=gScoreTentative,fScore[nIndex]=gScoreTentative+heuristicLengthFunction(n,target))}}}return null}}}.call(),function(e){function t(e,t,i,r){this.width=e,this.height=t,this.animationsEnabled=!0,this.animationMode=!1,this.animationDuration=0,this.animationEndDate=0,this.defaultFont=r.defaultFont,this._visibilityConditionTolerance=0,this.shadowsEnabled=!1,this.shadowOffsetY=0,this.shadowBlur=0,this.subLayers=i,this.options=r,this.noRefresh=r.noRefresh,this.now=n.utils.now();var o=this,s=function(e){r.onRender&&r.onRender(e),o.currentTime=n.utils.now(),o.render(e),o.currentTime<=o.animationEndDate&&o.refresh()};this.frameManager=new $global.FrameManager(s,r.debug),this.imageManager=new $global.ImageManager(r.imgCrossOrigin),this.DEFAULT_LAYER={camera:{x:0,y:0,zoom:1,angle:0}}}var n=$global.Ogma;n.renderers={},t.prototype.kill=function(){},t.prototype.setOffset=function(e){this._offset=e},t.prototype.animate=function(e,t){this.currentTime=n.utils.now(),this.animationMode=!0,this.animationDuration=e,this.currentTime+e>this.animationEndDate&&(this.animationEndDate=this.currentTime+e),t(),this.animationMode=!1},t.prototype.setAnimationsEnabled=function(e){this.animationsEnabled=!!e},t.prototype.setVisibilityConditionTolerance=function(e){this._visibilityConditionTolerance=e},t.prototype.getSubLayer=function(t){if(t===e)return this.DEFAULT_LAYER;var n=this.subLayers[t];if(!n)throw new Error('sub-layer "'+t+'" does not exist');return n},t.prototype.refresh=function(){this.noRefresh||this.frameManager.requestNewFrame()},t.prototype.atNextFrame=function(e){this.frameManager.atNextFrame(e),this.refresh()},t.prototype.wrappedUpdate=function(e,t,n){for(var i=this.updateComposite(e,t),r=0;r<i.length;++r)i[r]=n(i[r],r);return this.composite(e,i)},t.prototype.hide=function(e){return this.setDepth(e,-1)},t.prototype.clear=function(){},t.prototype.domElement=function(){},t.prototype.resize=function(e,t){},t.prototype.delete=function(e){},t.prototype.updateComposite=function(e,t){return[]},t.prototype.composite=function(e,t){},t.prototype.setDepth=function(e,t){},t.prototype.setSymbolicSize=function(e,t){},t.prototype.setColor=function(e,t){},t.prototype.setVisibilityCondition1=function(e,t,n,i){},t.prototype.setVisibilityCondition2=function(e,t,n,i){},t.prototype.setBackgroundColor=function(e){},t.prototype.circle=function(e,t,n,i,r,o,s,a){},t.prototype.triangle=function(e,t,n,i,r,o,s,a){},t.prototype.rectangle=function(e,t,n,i,r,o,s,a){},t.prototype.quadrilateral=function(e,t,n,i,r,o,s,a,d,u){},t.prototype.polygon=function(e,t,n,i,r,o){},t.prototype.line=function(e,t,n,i,r,o,s,a,d){},t.prototype.quadraticCurve=function(e,t,n,i,r,o,s,a,d,u){},t.prototype.cubicCurve=function(e,t,n,i,r,o,s,a,d,u,l){},t.prototype.image=function(e,t,n,i,r,o,s,a,d){},t.prototype.text=function(e,t,n,i,r,o,s,a,d,u,l,h,c,g){},t.prototype.textWidth=function(e,t,n,i){},t.prototype.render=function(e){},n.renderers.dummy=t}.call(),function(){function e(e,t,n,i){g.call(this,e,t,n,i||{}),this.svg=h.utils.createSvgElement("svg"),this.svg.style.userSelect="none",this.svg.style.webkitUserSelect="none",this.svg.style.MozUserSelect="none",this.defs=h.utils.createSvgElement("defs"),this.svg.appendChild(this.defs),this.resize(e,t),this.shapes=new h.utils.StaticList({dom:Array,components:Array,type:Int8Array,subLayer:Array,depth:Float32Array,symbolicSize:Float32Array,info:Array,prevInfo:Array,animationDuration:Float32Array,creationDate:Int32Array,visibilityCondition1:Array,visibilityCondition2:Array}),this._refresh=this.refresh.bind(this)}function t(e,t,n,i,r){e.setAttribute("viewBox",t+" "+n+" "+i+" "+r)}function n(e){return"number"==typeof e&&e%1==0&&e>=0}function i(e,t,i,o,a,d,u){void 0===u&&(u=-1),void 0===d&&(d=1);var l,g=e.getSubLayer(a),f=e.shapes.attributes,y=!0;return n(t)?f.type[t]!==i?e.delete(t,!0):y=!1:t=e.shapes.add(),g.transparency&&(d-=c),f.prevInfo[t]=y||!e.animationMode?void 0:f.info[t],f.info[t]=o,f.creationDate[t]=e.currentTime,f.animationDuration[t]=e.animationMode?e.animationDuration:0,f.type[t]=i,f.subLayer[t]=g,f.depth[t]=d,f.symbolicSize[t]=u,f.visibilityCondition1[t]=null,f.visibilityCondition2[t]=null,y?(l=h.utils.createSvgElement(p[i]),l.__index__=t,f.dom[t]=l,r(e,t)):s(e,t),t}function r(e,t){var n=e.shapes.attributes,i=e.svg.childNodes,r=n.dom[t],o=n.depth[t],s=n.subLayer[t].level;if(0!==o){for(var a=1;a<i.length;++a){var d=i[a],u=d.__index__,l=n.depth[u],h=n.subLayer[u].level;if(o<l||o===l&&s<h)break}a===i.length?e.svg.appendChild(r):e.svg.insertBefore(r,i[a]),e.refresh()}}function o(e,t){var n=e.shapes.attributes.dom[t];n.parentNode===e.svg&&e.svg.removeChild(n)}function s(e,t){o(e,t),r(e,t)}function a(e,t,i,r,o){var s=e.shapes.attributes;if(n(t))if(s.type[t]===f.COMPOSITE)for(var d=s.components[t],u=0;u<d.length;++u)a(e,d[u],i,r,o);else s.subLayer[t].transparency&&(r-=c),s[i][t]=r,o&&o(e,t),e.refresh()}function d(e){if(e){for(var t={},n=0;n<y.length;++n){var i=y[n];t[i]=e[i]}return t}}function u(e,t){var n=e._offset,i=h.utils.deepCopy(t);return n&&(i.x+=n.x,i.y+=n.y,i.zx+=n.zx,i.zy+=n.zy,i.ax+=n.ax,i.ay+=n.ay,i.ox+=n.ox,i.oy+=n.oy),i}function l(e){for(var t=0;t<e.length;++t)if(-1===L.indexOf(e.charAt(t)))return!1;return!0}var h=$global.Ogma,c=h.constants.EPSILON;h.renderers.svg=e;var g=h.renderers.dummy;e.prototype=Object.create(g.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(this.shapes.clear(),this.shapes.attributes.type.fill(f.DELETED);this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild)};var f={DELETED:-1,COMPOSITE:0,POLYGON:1,CIRCLE:2,IMAGE:3,TEXT:4,LINE:5,QUADRATIC:6,CUBIC:7,DUPLICATE_IMG:8},p=["g","polygon","circle","image","text","line","path","path","rect"];e.available=function(){return!0},e.prototype.domElement=function(){return this.svg},e.prototype.resize=function(e,n){this.width=e,this.height=n,t(this.svg,0,0,e,n),this.svg.setAttribute("width",e),this.svg.setAttribute("height",n)},e.prototype.delete=function(e,t){var i=this.shapes.attributes;if(!n(e)||i.type[e]===f.DELETED)return-1;if(i.type[e]===f.COMPOSITE)for(var r=i.components[e],s=0;s<r.length;++s)this.delete(r[s]);else o(this,e);return t||(this.shapes.remove(e),i.type[e]=f.DELETED),-1},e.prototype.updateComposite=function(e,t){var i=this.shapes.attributes,r=i.type[e];if(!n(e))return[];var s=i.components[e];if(r!==f.COMPOSITE)return o(this,i.dom[e]),i.type[e]=f.COMPOSITE,[];if(s.length!==t){for(var a=0;a<s.length;++a)this.delete(s[a]);return[]}return s},e.prototype.composite=function(e,t){var i=this.shapes.attributes;if(n(e)&&i.type[e]===f.COMPOSITE){return i.components[e]!==t&&(i.components[e]=t),e}var r=this.shapes.add();return i.type[r]=f.COMPOSITE,i.components[r]=t,r},e.prototype.setDepth=function(e,t){a(this,e,"depth",t,s)},e.prototype.setSymbolicSize=function(e,t){a(this,e,"symbolicSize",t)},e.prototype.setColor=function(e,t){a(this,e,"color",t)},e.prototype.setVisibilityCondition1=function(e,t,n,i,r){a(this,e,"visibilityCondition1",t?[n,i,r]:null)},e.prototype.setVisibilityCondition2=function(e,t,n,i,r){a(this,e,"visibilityCondition2",t?[n,i,r]:null)};var y=["textWidth","textHeight","angle","length","size","strokeSize","ratio"];e.prototype.triangle=function(e,t,n,r,o,s,a,d){return i(this,e,f.POLYGON,[o,void 0,u(this,t),u(this,n),u(this,r)],s,a,d)},e.prototype.circle=function(e,t,n,r,o,s,a,d){return i(this,e,f.CIRCLE,[o,u(this,t),n,r],s,a,d)};var v=new h.utils.Position,m=new h.utils.Position,_=new h.utils.Position,b=new h.utils.Position;e.prototype.rectangle=function(e,t,n,i,r,o,s,a){return h.utils.rectangleFromCenterAndDimensions(t,n,v,m,_,b),this.quadrilateral(e,v,m,_,b,i,r,o,s,a)},e.prototype.quadrilateral=function(e,t,n,r,o,s,a,l,h,c){return i(this,e,f.POLYGON,[s,d(c),u(this,t),u(this,n),u(this,r),u(this,o)],a,l,h)},e.prototype.polygon=function(e,t,n,r,o,s){var a=new Array(t.length+2);a[0]=n;for(var d=0;d<t.length;++d)a[d+2]=t[d].clone();return i(this,e,f.POLYGON,a,r,o,s)},e.prototype.line=function(e,t,n,r,o,s,a,d,l){return i(this,e,f.LINE,[s,r,o,u(this,t),u(this,n)],a,d,l)},e.prototype.quadraticCurve=function(e,t,n,r,o,s,a,d,l,h){return i(this,e,f.QUADRATIC,[a,o,s,u(this,t),u(this,n),u(this,r)],d,l,h)},e.prototype.cubicCurve=function(e,t,n,r,o,s,a,d,l,h,c){return i(this,e,f.CUBIC,[d,s,a,u(this,t),u(this,n),u(this,r),u(this,o)],l,h,c)},e.prototype.image=function(e,t,n,r,o,s,a,d,l){return this.imageManager.use(r,this._refresh,!0),i(this,e,!o&&s?f.DUPLICATE_IMG:f.IMAGE,[r,u(this,t),u(this,n),o,s],a,d,l)},e.prototype.text=function(e,t,n,r,o,s,a,l,h,c,g,p,y,v){return i(this,e,f.TEXT,[a,n,u(this,t),o,s,r,l,h,c,d(v)],g,p,y)};var x=null,w=null,A=null,E=null,C=null;"undefined"!=typeof document&&(x=document.createElement("canvas"),w=x.getContext("2d")),e.prototype.textWidth=function(e,t,n,i){return t===E&&n===A&&i===C||(w.font=("italic"===i||"bold"===i?i+" ":"")+n+"px "+t,A=n,E=t,C=i),w.measureText(e).width};var S=(Math.PI,Math.PI/2),I=Math.PI,O=180/I,z=new Array(128),T={left:"start",right:"end",center:"middle"},N={top:"hanging",bottom:"baseline",middle:"central"},L="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ";e.prototype.stopAnimations=function(){this.shapes.attributes.animationDuration.fill(0),this._refresh()},e.prototype.setBackgroundColor=function(e){this.options.backgroundColor=e},e.prototype.render=function(e){function t(e,t,n){var i,r,o,s,a=oe[e],d=-1!==k?se[e]:void 0,u=void 0!==t?oe[t]:void 0;if(u){C=0;var l,h,c=u.size*H;if(-1===u.ratio?(l=u.textWidth,h=u.textHeight):(l=u.textWidth*H,h=u.textHeight*H),u.length>-99999&&u.length*H<l)E=0;else{E=q-u.angle;var g=-1;E<-S?(E+=I)<-S&&(E+=I):E>S?(E-=I)>S&&(E-=I):g=1,u.length<-99999&&(g=-1),C=g*((h+c)/2+u.strokeSize)}i=(a.x-Y)*H,r=(a.y-G)*H;var f=J*i+Z*r,v=-Z*i+J*r;if(n)if(C+=a.oy,d){i=(d.x-Y)*H,r=(d.y-G)*H;var m=J*i+Z*r,_=-Z*i+J*r;p=m+(f-m)*k,y=_+(v-_)*k}else p=f,y=v;else{var b=Math.cos(E),x=Math.sin(E),w=a.ox+a.zx*H,A=a.oy+a.zy*H+C;p=b*w+x*A+f,y=-x*w+b*A+v,d&&(i=(d.x-Y)*H,r=(d.y-G)*H,m=J*i+Z*r,_=-Z*i+J*r,o=b*w+x*A+m,s=-x*w+b*A+_,p=o+(p-o)*k,y=s+(y-s)*k)}}else i=(a.x-Y)*H+a.ax,r=(a.y-G)*H+a.ay,p=J*i+Z*r+a.zx*H+a.ox,y=-Z*i+J*r+a.zy*H+a.oy,d&&(i=(d.x-Y)*H+d.ax,r=(d.y-G)*H+d.ay,o=J*i+Z*r+d.zx*H+d.ox,s=-Z*i+J*r+d.zy*H+d.oy,p=o+(p-o)*k,y=s+(y-s)*k);p|=0,y|=0}function n(){v=se&&-1!==k?(se[2]+(oe[2]-se[2])*k)*H+(se[3]+(oe[3]-se[3])*k):oe[2]*H+oe[3],v|=0}function i(){v=se&&-1!==k?(se[1]+(oe[1]-se[1])*k)*H+(se[2]+(oe[2]-se[2])*k):oe[1]*H+oe[2],v|=0}function r(){var e=M-a.creationDate[j];k=se&&F&&e<a.animationDuration[j]?e/a.animationDuration[j]:-1}function o(e){if(!e)return!0;var t=(e[0]-Y)*H,n=(e[1]-G)*H;return p=J*t+Z*n,y=-Z*t+J*n,v=e[2]*H,p+v>-D&&y+v>-D&&p-v<c+D&&y-v<g+D}var s,a=this.shapes.attributes,d=this.svg.childNodes,u=d.length,c=this.width,g=this.height,p=0,y=0,v=0,m="",_=-1,b=z,x=0,w=!1,A=null,E=0,C=0,L="black",P=h.colors.rgba,k=-1,F=this.animationsEnabled,M=this.currentTime,D=this._visibilityConditionTolerance;for(this.svg.style.background=this.options.backgroundColor;this.defs.firstChild;)this.defs.removeChild(this.defs.firstChild);for(var R=1;R<u;++R){var B=d[R],j=B.__index__,U=a.subLayer[j],X=a.symbolicSize[j],W=U.symbolicSizeThreshold,V=U.camera,Y=V.x,G=V.y,q=V.angle,H=V.zoom,J=Math.cos(q),Z=Math.sin(q);if(U.disabled||-1!==X&&X*U.camera.zoom<W)B.setAttribute("visibility","hidden");else{B.setAttribute("visibility","visible");var Q=a.visibilityCondition1[j],K=a.visibilityCondition2[j];if(o(Q)||o(K)){if(B.setAttribute("visibility","visible"),U.defineClipSpace)m=a.depth[j],_!==m||A!==U?(_=m,x=1,A=U,b[0]=j):(b[x]=j,x+=1);else if(U.useClipSpace&&a.depth[j]===_)for(H=a.subLayer[j].camera.zoom,w=!0,s=h.utils.createSvgElement("clipPath"),s.setAttribute("id",j),this.defs.appendChild(s),de=0;de<x;++de){var $=b[de];if(re=a.type[$],oe=a.info[$],se=a.prevInfo[$],r(),re===f.POLYGON){for(var ee=h.utils.createSvgElement("polygon"),te="",ne=2;ne<oe.length;++ne)t(ne,1),te+=p+","+y+" ";ee.setAttribute("points",te),s.appendChild(ee)}else if(re===f.CIRCLE){var ie=h.utils.createSvgElement("circle");t(1),n(),ie.setAttribute("cx",p),ie.setAttribute("cy",y),ie.setAttribute("r",v),s.appendChild(ie)}}var re=a.type[j],oe=a.info[j],se=a.prevInfo[j];if(r(),re!==f.IMAGE&&function(){if(se&&0===k){var e=4*h.colors.getIndex(se[0]),t=4*h.colors.getIndex(oe[0]);if(e===t)L=oe[0];else{var n=P[e]+P[t-P[e]]*k,i=P[e+1]+(P[t+1]-P[e+1])*k,r=P[e+2]+(P[t+2]-P[e+2])*k,o=P[e+3]+(P[t+3]-P[e+3])*k;L="rgb("+(255*n|0)+", "+(255*i|0)+", "+(255*r|0)+", "+o+")"}}else L=oe[0]}(),re===f.POLYGON){for(var ae="",de=2;de<oe.length;++de)t(de,1),ae+=p+","+y+" ";B.setAttribute("points",ae),B.setAttribute("fill",L)}else if(re===f.CIRCLE)t(1),n(),B.setAttribute("cx",p),B.setAttribute("cy",y),B.setAttribute("r",v),B.setAttribute("fill",L);else if(re===f.LINE)i(),t(3),B.setAttribute("x1",p),B.setAttribute("y1",y),t(4),B.setAttribute("x2",p),B.setAttribute("y2",y),B.setAttribute("stroke",L),B.setAttribute("stroke-width",v);else if(re===f.QUADRATIC)i(),m="",t(3),m+="M "+p+" "+y,t(4),m+=" Q "+p+" "+y,t(5),m+=" "+p+" "+y,B.setAttribute("d",m),B.setAttribute("stroke",L),B.setAttribute("stroke-width",v),B.setAttribute("fill","none");else if(re===f.CUBIC)i(),m="",t(3),m+="M "+p+" "+y,t(4),m+=" C "+p+" "+y,t(5),m+=" "+p+" "+y,t(6),m+=" "+p+" "+y,B.setAttribute("d",m),B.setAttribute("stroke",L),B.setAttribute("stroke-width",v),B.setAttribute("fill","none");else if(re===f.TEXT){var ue=oe[3],le=oe[4],he=oe[5],ce=oe[6],ge=oe[7],fe=oe[8],pe=ue*H+le,ye=oe[1];"FontAwesome"===he&&l(ye)&&(he=this.defaultFont),t(2,9,!0),B.setAttribute("x",p),B.setAttribute("y",y),B.setAttribute("text-anchor",T[ge]),B.setAttribute("fill",L),B.setAttribute("font-size",pe),B.setAttribute("font-family",he),B.setAttribute("alignment-baseline",N[fe]),B.setAttribute("font-weight","bold"===ce?"bold":"normal"),B.setAttribute("font-style","italic"===ce?"italic":"normal"),B.firstChild?B.firstChild.nodeValue=ye:B.appendChild(document.createTextNode(ye)),oe[9]&&B.setAttribute("transform","rotate("+(-O*E|0)+" "+p+" "+y+") translate(0 "+C+")")}else if(re===f.IMAGE){var ve=this.imageManager.getImage(oe[0]),me=oe[3],_e=oe[2],be=(_e.zx+_e.x)*H+_e.ox,xe=(_e.zy+_e.y)*H+_e.oy;if(!ve)continue;t(1),me?(B.setAttribute("x",p-be),B.setAttribute("y",y-xe),B.setAttribute("width",2*be),B.setAttribute("height",2*xe),B.setAttribute("preserveAspectRatio",""),B.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",oe[0])):(B.setAttribute("x",p-ve.width/2),B.setAttribute("y",y-ve.height/2),B.setAttribute("width",ve.width),B.setAttribute("height",ve.height),B.setAttribute("preserveAspectRatio","none"),B.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",oe[0]))}else if(re===f.DUPLICATE_IMG){if(ve=this.imageManager.getImage(oe[0]),_e=oe[2],be=_e.zx*H+_e.ox,xe=_e.zy*H+_e.oy,!ve)continue;t(1);var we=h.utils.createSvgElement("pattern"),Ae=h.utils.createSvgElement("image"),Ee="img_"+j;we.setAttribute("id",Ee),we.setAttribute("patternUnits","userSpaceOnUse"),we.setAttribute("x",p-be),we.setAttribute("y",y-xe),we.setAttribute("width",ve.width),we.setAttribute("height",ve.height),Ae.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",oe[0]),Ae.setAttribute("x",0),Ae.setAttribute("y",0),Ae.setAttribute("width",ve.width),Ae.setAttribute("height",ve.height),we.appendChild(Ae),this.defs.appendChild(we),B.setAttribute("x",p-be),B.setAttribute("y",y-xe),B.setAttribute("width",2*be),B.setAttribute("height",2*xe),B.setAttribute("fill","url(#"+Ee+")")}w?(B.setAttribute("clip-path","url(#"+j+")"),w=!1):B.removeAttribute("clip-path")}else B.setAttribute("visibility","hidden")}}}}.call(),function(e){function t(e,r,o,s){var a=$global.webgl.RenderStep;s=s||{},I.renderers.dummy.call(this,e,r,o,s),this.samplingLevel="super-sampling"===s.antialias?2:1;for(var d=I.utils.pixelRatio();this.samplingLevel>1&&"firefox"===I.utils.browser&&(this.samplingLevel*window.innerWidth*d>O||this.samplingLevel*window.innerHeight*d>z);)this.samplingLevel/=2;var u="native"===s.antialias||"super-sampling"===s.antialias&&1!==I.utils.pixelRatio(),l={stencil:!0,antialias:u,alpha:!0,premultipliedAlpha:!1};this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("webgl",l),this.gl||($info('Using "experimental-webgl"'),this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("experimental-webgl",l)),this.canvas.className="ogma";var c=this.gl;this.setBackgroundColor(s.backgroundColor),c.enable(c.BLEND),c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.SRC_ALPHA,c.ONE),c.enable(c.DEPTH_TEST),c.depthFunc(c.LEQUAL),this._nbAttributesEnabled=0;var g=this;this._createTextureFromCanvas=function(e,t){return h(g,e,t,"text")},this.programs={};for(var f=Object.keys(t.programs),p=0;p<f.length;++p){var y=f[p],v=t.programs[y];this.programs[y]=new t.Program(c,y,v.uniforms,v.attributes,v.varyings,v.functions,v.vertex,v.fragment)}this.shapeList=new I.utils.StaticList({bufferOffset:Int32Array,bufferIndex:Int32Array,components:Array}),this.texturesByUrl={},this.textureCounter=0,this.fontSamplingSize=s.fontSamplingSize,this.minSvgSize=s.minSvgSize,this.bitmapFontCounter=0,this.bitmapFontsByIndex={},this.bitmapFonts={},this.buffersBySubLayer={},this.bufferList=[],this._offset=null,this._renderSteps=[],this._renderSteps.push(new a(this,n,{ratio:this.samplingLevel})),1!==this.samplingLevel&&(this.antiAliasBuffer=this.programs.antialias.createBuffer(),this.antiAliasBuffer.add(),this.antiAliasBuffer.add(),this.antiAliasBuffer.positionOnScreen.set3(0,-1,-1,1,-1,1,1),this.antiAliasBuffer.positionOnScreen.set3(1,1,1,-1,1,-1,-1),this._renderSteps.push(new a(this,i))),this._sortSubLayerFunction=function(e,t){return w(g,e,t)},this.resize(48,48)}function n(e,t,n){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),E(e),S(e,n.renderWidth,n.renderHeight)}function i(e,t,n,i){t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),e._nbAttributesEnabled=e.programs.antialias.prepare(e._nbAttributesEnabled),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i.texture),t.generateMipmap(t.TEXTURE_2D);var r=e.programs.antialias.uniforms,o=n.renderWidth/(i.textureWidth/i.ratio),s=n.renderHeight/(i.textureHeight/i.ratio);r.texture.set(0),r.screenTextureRatio.set(o,s),e.antiAliasBuffer.draw()}function r(e){return"number"==typeof e&&e%1==0&&e>=0}function o(e,t,n,i){if(r(n)){var s=e.shapeList.attributes,a=s.components[n];if(a)for(var d=0;d<a.length;++d)o(e,t,a[d],i);else{var u=s.bufferIndex[n],l=s.bufferOffset[n],h=e.bufferList[u];"depth"===t&&h.transparency&&i>=0&&(i-=M),h[t].set(l,i),e.refresh()}}}function s(e,t,n,i,o,a,d){if(r(n)){var u=e.shapeList.attributes,l=u.components[n];if(l)for(var h=0;h<l.length;++h)s(e,t,l[h],i,o,a,d);else{var c=u.bufferIndex[n],g=u.bufferOffset[n];e.bufferList[c][t].set(g,i,o,a,d),e.refresh()}}}function a(t,n,i,o,s,d,u,l,h,c,g){var f,p,y=t.shapeList.attributes;if(r(n)&&-2!==y.bufferIndex[n]){if(f=t.bufferList[y.bufferIndex[n]],p=y.bufferOffset[n],y.components[n]||!f||f.programName!==o||f.texture!==c)return t.delete(n),a(t,-1,i,o,s,d,u,l,h,c,g);f.animation.set(p,+t.animationMode,t.currentTime,t.animationDuration),l!==e&&f.depth.set(p,l)}else{n=t.shapeList.add(),y.components[n]=e;var m=v(t.buffersBySubLayer,i),_=v(m,o);f=_[c],f||(f=t.programs[o].createBuffer(),f.index=t.bufferList.length,f.transparency=g,f.texture=c,_[c]=f,t.bufferList.push(f)),p=f.add(),y.components[n]=e,y.bufferOffset[n]=p,y.bufferIndex[n]=f.index,f.animation.set(p,0,0,0),f.depth.set(p,$or(l,1))}var b=t._offset||D;return f.absolutePosition.shift(p,s.x+b.x,s.y+b.y,d.x+b.x,d.y+b.y,u.x+b.x,u.y+b.y),f.zoomOffset.shift(p,s.zx+b.zx,s.zy+b.zy,d.zx+b.zx,d.zy+b.zy,u.zx+b.zx,u.zy+b.zy),f.offset.shift(p,s.ox+b.ox,s.oy+b.oy,d.ox+b.ox,d.oy+b.oy,u.ox+b.ox,u.oy+b.oy),f.visibilityCondition1.set(p,0,0,0,0),f.visibilityCondition2.set(p,0,0,0,0),"lineText"!==o&&"linePolygon"!==o&&f.angleOffset.shift(p,s.ax+b.ax,s.ay+b.ay,d.ax+b.ax,d.ay+b.ay,u.ax+b.ax,u.ay+b.ay),"circle"===o&&f.circleMultiplier.set2x3(p,-1,1,-1,-N,N,1),f.symbolicSize.set(p,h),t.refresh(),n}function d(t,n,i,r,o,s,d,u,l,h){return l===e&&(l=-1),h===e&&(h="default"),a(t,n,i,r,o,s,d,u,l,h,t.getSubLayer(i).transparency)}function u(e,t){e.texturesByUrl[t]||e.imageManager.use(t,function(n){var i=t.endsWith(".svg"),r=h(e,n,null,i?"svg":null);r.width=n.width,r.height=n.height,e.texturesByUrl[t]=r,e.refresh()})}function l(e,t,n){var i=t.width,r=t.height,o=!1;if(n&&e.minSvgSize){var s=Math.max(e.minSvgSize/i,e.minSvgSize/r);s>1&&(i=i*s|0,r=r*s|0,o=!0)}if(I.utils.isPowerOfTwo(i)&&I.utils.isPowerOfTwo(r)||(i=I.utils.upperPowerOf(i,2),r=I.utils.upperPowerOf(r,2),o=!0),o){var a=document.createElement("canvas"),d=a.getContext("2d");return a.width=i,a.height=r,d.drawImage(t,0,0,i,r),a}return t}function h(e,t,n,i){var r,o,s=e.gl;n?(o=n.texture,r=n):(o=s.createTexture(),r={index:e.textureCounter,texture:o},e.textureCounter+=1),t=l(e,t,"svg"===i),s.bindTexture(s.TEXTURE_2D,o);try{s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,t)}catch(t){console.error(t),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,e.imageManager.getErrorImage())}return s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,"text"===i?s.LINEAR:s.NEAREST_MIPMAP_LINEAR),s.generateMipmap(s.TEXTURE_2D),s.bindTexture(s.TEXTURE_2D,null),r}function c(t,n){if(n!==e&&!t.subLayers[n])throw new Error('Sub-layer "'+n+'" does not exist.');return n}function g(e,t,n,i,r,o,s,a,u,l,h,g,f){l=c(e,l),X.ax=(n.ax+o.ax)/2,X.ay=(n.ay+o.ay)/2,X.zx=(n.zx+o.zx)/2,X.zy=(n.zy+o.zy)/2,X.ox=(n.ox+o.ox)/2,X.oy=(n.oy+o.oy)/2,f(0,n,i,r,o,X,B),f(1/R,n,i,r,o,X,j),I.utils.lineFromBoundaries(B,j,s,a,W,V,Y,G);for(var p=e.updateComposite(t,2*R),y=2;y<=R;++y)f(y/R,n,i,r,o,X,U),I.utils.lineFromBoundaries(j,U,s,a,q,H,J,Z),p[2*(y-2)]=d(e,p[2*(y-2)],l,"polygon",W,V,H,h,g),p[2*(y-2)+1]=d(e,p[2*(y-2)+1],l,"polygon",H,q,W,h,g),B.set(j),j.set(U),W.set(q),V.set(H);for(I.utils.lineFromBoundaries(B,o,s,a,q,H,J,Z),p[2*R-2]=d(e,p[2*R-2],l,"polygon",q,H,J,h,g),p[2*R-1]=d(e,p[2*R-1],l,"polygon",J,Z,q,h,g),y=0;y<p.length;++y)e.setColor(p[y],u);return e.composite(t,p)}function f(e,t,n,i,r,o,s){I.geometry.getPointOnQuadraticCurve(e,t.x,t.y,r.x,r.y,n.x,n.y,s),s.add(o)}function p(e,t,n,i,r,o,s){I.geometry.getPointOnBezierCurve(e,t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y,s),s.add(o)}function y(e,t,n,i,r,o,s,a,d,u,l,h){var c=e.shapeList.attributes,g=c.bufferIndex[t],f=c.bufferOffset[t],p=e.bufferList[g];n||(p.textureBox.set(f,r,o),p.duplicate.set(f,+i)),p.textureCoords.set2x3(f,s,a,d,u,l,h)}function v(e,t){var n=e[t];return n||(n={},e[t]=n),n}function m(e,t,n){"italic"!==n&&"bold"!==n&&(n="none");var i=e.bitmapFonts[t];i||(i={},e.bitmapFonts[t]=i);var r=i[n];return r||(r=new I.renderers.webgl.BitmapFont(t,n,e._createTextureFromCanvas,e.defaultFont,e.fontSamplingSize),r.index=e.bitmapFontCounter++,e.bitmapFontsByIndex[r.index]=r,i[n]=r),r}function _(e,t,n,i,r,o,s,a,u,l,h,g,f,p,y){g=c(e,g);for(var v,_,w=0,A=s,E=o,C=y?"lineText":"text",S=m(e,r,u),I=0;I<i.length;++I){w+=S.get(i[I]).ratio}v=w*o,w*=s,Q.reset(),"center"===l?(Q.ox-=w/2,Q.zx-=v/2):"right"===l&&(Q.ox-=w,Q.zx-=v),"middle"===h?(Q.oy-=A/2,Q.zy-=E/2):"bottom"===h&&(Q.oy-=A,Q.zy-=E),L.set(n).add(Q),P.set(n).add(Q),k.set(n).add(Q),F.set(n).add(Q),P.oy+=A,F.oy+=A,P.zy+=E,F.zy+=E;var O=e.updateComposite(t,2*i.length),z=S.index;for(I=0;I<i.length;++I){var T=S.get(i[I]);_=T.ratio,k.ox=L.ox+s*_,F.ox=P.ox+s*_,k.zx=L.zx+o*_,F.zx=P.zx+o*_,O[2*I]=d(e,O[2*I],g,C,L,k,F,f,p,z),O[2*I+1]=d(e,O[2*I+1],g,C,F,P,L,f,p,z),e.setColor(O[2*I],a,!0),e.setColor(O[2*I+1],a,!0),b(e,O[2*I],T.x1,T.y1,T.x2,T.y1,T.x2,T.y2,o,s),b(e,O[2*I+1],T.x2,T.y2,T.x1,T.y2,T.x1,T.y1,o,s),y&&(x(e,O[2*I],y.textWidth,y.textHeight,y.ratio,y.angle,y.length,y.size,y.strokeSize),x(e,O[2*I+1],y.textWidth,y.textHeight,y.ratio,y.angle,y.length,y.size,y.strokeSize)),L.set(k),P.set(F)}return e.composite(t,O)}function b(e,t,n,i,r,o,s,a,d,u){var l=e.shapeList.attributes,h=l.bufferIndex[t],c=l.bufferOffset[t];e.bufferList[h].textureCoords.set2x3(c,n,i,r,o,s,a)}function x(e,t,n,i,r,o,s,a,d){var u=e.shapeList.attributes,l=u.bufferIndex[t],h=u.bufferOffset[t],c=e.bufferList[l];c.textDimensions.set(h,n,i,r),c.lineInfo.set(h,o,s,a,d)}function w(e,t,n){return A(e,t)-A(e,n)}function A(e,t){if("undefined"===t)return 1e4;var n=e.subLayers[t],i=n.level;return n.transparency&&(i+=5e3),i}function E(e){I.utils.forEach(e.bitmapFonts,function(e){I.utils.forEach(e,function(e){e.updateIfNecessary()})})}function C(e,t){t.defineClipSpace||t.useClipSpace?(e.enable(e.STENCIL_TEST),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),t.defineClipSpace?(e.clear(e.STENCIL_BUFFER_BIT),e.depthFunc(e.LEQUAL),e.stencilFunc(e.ALWAYS,1,1)):(e.depthFunc(e.EQUAL),e.stencilFunc(e.EQUAL,1,1))):(e.depthFunc(e.LEQUAL),e.disable(e.STENCIL_TEST))}function S(e,t,n){var i=e.gl,r=e.buffersBySubLayer,o=Object.keys(r).sort(e._sortSubLayerFunction),s=I.utils.pixelRatio();i.enable(i.DEPTH_TEST);for(var a=0;a<o.length;++a){var d=o[a],u=e.subLayers[d]||e.DEFAULT_LAYER,l=r[d],h=Object.keys(e.programs),c=u.camera;if(!u.disabled){C(i,u);for(var g=0;g<h.length;++g){var f=h[g],p=l[f];if(p){var y=e.programs[f],v=y.uniforms,m=Object.keys(p);e._nbAttributesEnabled=y.prepare(e._nbAttributesEnabled),v.pixelRatio.set(s),v.textureMultiplier.set(e.samplingLevel),v.animationMode.set(+e.animationsEnabled),v.symbolicSizeThreshold.set(u.symbolicSizeThreshold),v.screenSize.set(t,n),v.camPosition.set(c.x,c.y),v.camAngle.set(c.angle),v.cosCamAngle.set(Math.cos(c.angle)),v.sinCamAngle.set(Math.sin(c.angle)),v.camZoom.set(c.zoom),v.currentTime.set(e.currentTime),v.vcMargin.set(e._visibilityConditionTolerance);for(var _=0;_<m.length;++_){var b=m[_],x=p[b];if("nonScaledImage"===f||"image"===f){var w=e.texturesByUrl[b];if(!w)continue;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,w.texture),y.uniforms.texture.set(0),"nonScaledImage"===f&&v.textureDimensions.set(w.width,w.height)}else if("text"===f||"lineText"===f){var A=e.bitmapFontsByIndex[b],E=A.bigTexture;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,E.texture),y.uniforms.bigTexture.set(0)}x.draw()}}}}}}var I=$global.Ogma;$global.webgl={};var O=4096,z=4096,T=!1;if("undefined"!=typeof document)try{T=!!(document.createElement("canvas").getContext("webgl")||document.createElement("canvas").getContext("experimental-webgl"))}catch(e){}var N=Math.SQRT2+1;t.prototype=Object.create(I.renderers.dummy.prototype),t.prototype.constructor=t,t.prototype.render=function(e){for(var t=null,n=0;n<this._renderSteps.length;++n){var i=this._renderSteps[n];i.render(t),t=i}this.gl.flush()},t.prototype.resize=function(e,t){I.utils.resizeElement(this.canvas,e,t),this.width=e,this.height=t;for(var n=0,i=this._renderSteps.length;n<i;++n)this._renderSteps[n].resize(e,t,n!==i-1);this.refresh()},t.prototype.usedMemory=function(){return(this.bufferList.map(function(e){return e._attributeList.map(function(t){return 4*e[t]._content.length}).reduce(function(e,t){return e+t})},0).reduce(function(e,t){return e+t},0)/1e3|0)+"K"};var L=new I.utils.Position,P=new I.utils.Position,k=new I.utils.Position,F=new I.utils.Position;t.prototype.setDepth=function(e,t){o(this,"depth",e,t),this.refresh()},t.prototype.setSymbolicSize=function(e,t){o(this,"symbolicSize",e,t),this.refresh()},t.prototype.setVisibilityCondition1=function(e,t,n,i,r){s(this,"visibilityCondition1",e,n,i,r,+t),this.refresh()},t.prototype.setVisibilityCondition2=function(e,t,n,i,r){s(this,"visibilityCondition2",e,n,i,r,+t),this.refresh()},t.prototype.reloadFonts=function(){I.utils.forEach(this.bitmapFonts,function(e){I.utils.forEach(e,function(e){e.reload()})})},t.infoName="WebGL";var M=I.constants.EPSILON;t.prototype.updateComposite=function(e,t){var n=this.shapeList.attributes;if(!r(e)||-2===n.bufferIndex[e])return[];var i=n.components[e];if(!i)return this.deleteTriangle(e),[];if(i.length!==t){for(var o=0;o<i.length;++o)this.delete(i[o]);return[]}return i},t.prototype.composite=function(e,t){var n,i=this.shapeList.attributes;if(r(e)&&-2!==i.bufferIndex[e]){i.components[e]!==t&&(i.components[e]=t),n=e}else{var o=this.shapeList.add();i.bufferIndex[o]=-1,i.bufferOffset[o]=-1,i.components[o]=t,n=o}return n},t.prototype.setColor=function(e,t,n){if(r(e)){var i=this.shapeList.attributes,o=i.components[e];if(o)for(var s=0;s<o.length;++s)this.setColor(o[s],t,n);else{var a=i.bufferIndex[e],d=i.bufferOffset[e],u=this.bufferList[a],l=4*I.colors.getIndex(t),h=I.colors.rgba;if("shadowPolygon"===u.programName||"shadowCircle"===u.programName)return;this.animationMode&&u.prevColor.copy(u.color,d),this.shadowsEnabled?u.color.set(d,0,0,0,.9):u.color.set(d,h[l],h[l+1],h[l+2],n?0:h[l+3]),this.refresh()}}},t.prototype.stopAnimations=function(){for(var e=this.bufferList,t=e.length,n=0;n<t;++n)e[n].animation.fill(0);this.refresh()};var D=new I.utils.Position;t.prototype._nbTriangles=function(){for(var e=0,t=0;t<this.bufferList.length;++t)e+=this.bufferList[t]._nbTriangles;return e},t.prototype.delete=function(t){if(!r(t))return-1;var n=this.shapeList.attributes,i=n.bufferIndex[t],o=n.components[t];if(-2===i)return-1;if(o)for(var s=0;s<o.length;++s)this.delete(o[s]);else this.deleteTriangle(t);return n.bufferIndex[t]=-2,n.components[t]=e,this.shapeList.remove(t),this.refresh(),-1},t.prototype.deleteTriangle=function(e){var t=this.shapeList.attributes,n=t.bufferIndex[e],i=t.bufferOffset[e];this.bufferList[n].remove(i)},t.prototype.domElement=function(){return this.canvas},t.available=T,t.prototype.triangle=function(e,t,n,i,r,o,s,a){var u=d(this,e,c(this,o),"polygon",t,n,i,s,a);return this.setColor(u,r),u},t.prototype.circle=function(e,t,n,i,r,o,s,a){return L.set(t).addZXY(-n,n).addOXY(-i,i),P.set(t).addZXY(-n,-n*N).addOXY(-i,-i*N),k.set(t).addZXY(n*N,n).addOXY(i*N,i),this._relativeRadius=n,this._absoluteRadius=i,e=d(this,e,c(this,o),"circle",L,P,k,s,a),this.setColor(e,r),e},t.prototype.rectangle=function(e,t,n,i,r,o,s,a){return I.utils.rectangleFromCenterAndDimensions(t,n,L,P,k,F),this.quadrilateral(e,L,P,k,F,i,r,o,s,a)},t.prototype.quadrilateral=function(e,t,n,i,r,o,s,a,u,l){var h=l?"linePolygon":"polygon";s=c(this,s);var g=this.updateComposite(e,2);return g[0]=d(this,g[0],s,h,t,n,i,a,u),g[1]=d(this,g[1],s,h,i,r,t,a,u),l&&(x(this,g[0],l.textWidth,l.textHeight,l.ratio,l.angle,l.length,l.size,l.strokeSize),x(this,g[1],l.textWidth,l.textHeight,l.ratio,l.angle,l.length,l.size,l.strokeSize)),e=this.composite(e,g),this.setColor(e,o),e},t.prototype.polygon=function(e,t,n,i,r,o){if(!t instanceof I.utils.PositionList)throw new Error('Argument "points" must be of type Ogma.utils.PositionList.');if(t.length<3)throw new Error("A polygon must have at least 3 points.");i=c(this,i);for(var s=I.geometry.triangulatePolygon(t.getXYList()),a=this.updateComposite(e,s.length),u=0;u<s.length;++u){var l=s[u],h=t[l[0]],g=t[l[1]],f=t[l[2]];a[u]=d(this,a[u],i,"polygon",h,g,f,r,o),this.setColor(a[u],n)}return this.composite(e,a)};var R=50,B=new I.utils.Position,j=new I.utils.Position,U=new I.utils.Position,X=new I.utils.Position,W=new I.utils.Position,V=new I.utils.Position,Y=new I.utils.Position,G=new I.utils.Position,q=new I.utils.Position,H=new I.utils.Position,J=new I.utils.Position,Z=new I.utils.Position;t.prototype.quadraticCurve=function(e,t,n,i,r,o,s,a,d,u){return g(this,e,t,n,n,i,r,o,s,a,d,u,f)},t.prototype.cubicCurve=function(e,t,n,i,r,o,s,a,d,u,l){return g(this,e,t,n,i,r,o,s,a,d,u,l,p)},t.prototype.line=function(e,t,n,i,r,o,s,a,d){return I.utils.lineFromBoundaries(t,n,i,r,L,P,k,F),this.quadrilateral(e,L,P,k,F,o,s,a,d)},t.prototype.image=function(e,t,n,i,r,o,s,a,l){u(this,i),I.utils.rectangleFromCenterAndDimensions(t,n,L,P,k,F),s=c(this,s);var h=r?"image":"nonScaledImage",g=this.updateComposite(e,2);return g[0]=d(this,g[0],s,h,L,P,k,a,l,i),g[1]=d(this,g[1],s,h,k,F,L,a,l,i),y(this,g[0],r,o,2*n.zx,2*n.zy,0,0,1,0,1,1),y(this,g[1],r,o,2*n.zx,2*n.zy,1,1,0,1,0,0),this.composite(e,g)};var Q=new I.utils.Position;t.prototype.text=function(e,t,n,i,r,o,s,a,d,u,l,h,c,g){return _(this,e,t,n,i,r,o,s,a,d,u,l,h,c,g)},t.prototype.textWidth=function(e,t,n,i){for(var r=m(this,t,i),o=0,s=0;s<e.length;++s){o+=r.get(e[s]).ratio}return o*n},t.prototype.clear=function(){this.shapeList.clear(),this.shapeList.attributes.bufferIndex.fill(-2);for(var e=0;e<this.bufferList.length;++e)this.bufferList[e].clear()},t.prototype.setBackgroundColor=function(e){if(e){var t=4*I.colors.getIndex(e),n=I.colors.rgba;this.gl.clearColor(n[t],n[t+1],n[t+2],n[t+3])}else this.gl.clearColor(0,0,0,0)},I.renderers.webgl=t}.call(),function(e){function t(e,t,n,i){f.call(this,e,t,n,i||{}),this.canvas=h.utils.createCanvas(e,t),this.ctx=this.canvas.getContext("2d"),this.backgroundColor=i.backgroundColor,this.atomicShapes=[],this.nbAtomicShapes=0,this.shapes=new h.utils.StaticList({type:Int8Array,components:Array,info:Array,prevInfo:Array,depth:Float32Array,subLayer:Array,symbolicSize:Float32Array,animationDuration:Float32Array,creationDate:Int32Array,visibilityCondition1:Array,visibilityCondition2:Array}),this._refresh=function(){this.refresh()}.bind(this)}function n(e){return"number"==typeof e&&e%1==0&&e>=0}function i(e,t){s(e,t),o(e,t)}function r(e,t,i,o,s){var a=e.shapes.attributes;if(n(t)&&a.type[t]!==p.DELETED)if(a.type[t]===p.COMPOSITE)for(var d=a.components[t],u=0;u<d.length;++u)r(e,d[u],i,o,s);else"depth"===i&&a.subLayer[t].transparency&&(o-=g),a[i][t]=o,s&&s(e,t)}function o(e,t){var n=e.shapes.attributes,i=e.atomicShapes,r=e.atomicShapes.length,o=n.depth[t],s=n.subLayer[t],a=s.level;if(!(o<0)){for(var d=0;d<r;++d){var u=i[d],l=n.depth[u],h=n.subLayer[u],c=h.level;if(o<l||o===l&&a<c)break}d===r?i.push(t):i.splice(d,0,t),e.nbAtomicShapes+=1,e.refresh()}}function s(e,t){var n=e.atomicShapes.lastIndexOf(t,e.nbAtomicShapes-1);e.nbAtomicShapes>0&&-1!==n&&(e.atomicShapes.splice(n,1),e.nbAtomicShapes-=1)}function a(t,r,s,a,d,u,l){l===e&&(l=-1);var h=t.shapes.attributes,c=!0;if(n(r)&&h.type[r]!==p.DELETED)if(h.type[r]===p.COMPOSITE)for(var f=h.components[r],y=0;y<f.length;++y)t.delete(f[y]);else c=!1;else r=t.shapes.add();var v=t.getSubLayer(d);return(c||u!==e)&&(u=$or(u,1),v.transparency&&(u-=g),h.depth[r]=u),h.components[r]=e,h.prevInfo[r]=c||!t.animationMode?e:h.info[r],h.creationDate[r]=t.currentTime,h.animationDuration[r]=t.animationMode?t.animationDuration:0,h.info[r]=a,h.visibilityCondition1[r]=null,h.visibilityCondition2[r]=null,h.type[r]=s,h.subLayer[r]=v,h.symbolicSize[r]=l,c?o(t,r):i(t,r),r}function d(t){if(!t)return e;for(var n={},i=0;i<b.length;++i){var r=b[i];n[r]=t[r]}return n}function u(e,t){var n=e._offset,i=h.utils.deepCopy(t);return n&&(i.x+=n.x,i.y+=n.y,i.zx+=n.zx,i.zy+=n.zy,i.ax+=n.ax,i.ay+=n.ay,i.ox+=n.ox,i.oy+=n.oy),i}function l(e){for(var t=0;t<e.length;++t)if(-1===S.indexOf(e.charAt(t)))return!1;return!0}var h=$global.Ogma,c="undefined"!=typeof document&&null!=document.createElement("canvas").getContext("2d"),g=h.constants.EPSILON,f=h.renderers.dummy;t.prototype=Object.create(f.prototype),t.prototype.constructor=t,t.prototype.clear=function(){this.shapes.clear(),this.shapes.attributes.type.fill(p.DELETED),this.atomicShapes=[],this.nbAtomicShapes=0},t.prototype.domElement=function(){return this.canvas},t.prototype.resize=function(e,t){h.utils.resizeElement(this.canvas,e,t),this.refresh(),this.width=e,this.height=t},t.available=c,t.prototype.delete=function(e){var t=this.shapes.attributes;if(!n(e)||t.type[e]===p.DELETED)return-1;if(t.type[e]===p.COMPOSITE)for(var i=t.components[e],r=0;r<i.length;++r)this.delete(i[r]);else s(this,e);return t.type[e]=p.DELETED,this.shapes.remove(e),-1},t.prototype.updateComposite=function(e,t){var i=this.shapes.attributes,r=i.type[e];if(!n(e)||r===p.DELETED)return[];var o=i.components[e];if(r!==p.COMPOSITE)return s(this,e),i.type[e]=p.COMPOSITE,[];if(o.length!==t){for(var a=0;a<o.length;++a)this.delete(o[a]);return[]}return o},t.prototype.composite=function(e,t){var i=this.shapes.attributes;if(n(e)&&i.type[e]===p.COMPOSITE){return i.components[e]!==t&&(i.components[e]=t),e}var r=this.shapes.add();return i.type[r]=p.COMPOSITE,i.components[r]=t,r},t.prototype.setDepth=function(e,t){r(this,e,"depth",t,i),this.refresh()},t.prototype.setSymbolicSize=function(e,t){r(this,e,"symbolicSize",t),this.refresh()},t.prototype.setColor=function(e,t){r(this,e,"color",t),this.refresh()},t.prototype.setVisibilityCondition1=function(e,t,n,i,o){r(this,e,"visibilityCondition1",t?[n,i,o]:null)},t.prototype.setVisibilityCondition2=function(e,t,n,i,o){r(this,e,"visibilityCondition2",t?[n,i,o]:null)};var p={DELETED:-1,COMPOSITE:0,POLYGON:1,CIRCLE:2,IMAGE:3,TEXT:4,LINE:5,QUADRATIC:6,CUBIC:7},y=new h.utils.Position,v=new h.utils.Position,m=new h.utils.Position,_=new h.utils.Position,b=["textWidth","textHeight","angle","length","size","strokeSize","ratio"];t.prototype.triangle=function(t,n,i,r,o,s,d,l){return a(this,t,p.POLYGON,[o,e,u(this,n),u(this,i),u(this,r)],s,d,l)},t.prototype.circle=function(e,t,n,i,r,o,s,d){return a(this,e,p.CIRCLE,[r,u(this,t),n,i],o,s,d)},t.prototype.rectangle=function(e,t,n,i,r,o,s,a){return h.utils.rectangleFromCenterAndDimensions(t,n,y,v,m,_),this.quadrilateral(e,y,v,m,_,i,r,o,s,a)},t.prototype.quadrilateral=function(e,t,n,i,r,o,s,l,h,c){return a(this,e,p.POLYGON,[o,d(c),u(this,t),u(this,n),u(this,i),u(this,r)],s,l,h)},t.prototype.polygon=function(e,t,n,i,r,o){var s=new Array(t.length+2);s[0]=n;for(var d=0;d<t.length;++d)s[d+2]=u(this,t[d]);return a(this,e,p.POLYGON,s,i,r,o)},t.prototype.line=function(e,t,n,i,r,o,s,d,l){return a(this,e,p.LINE,[o,i,r,u(this,t),u(this,n)],s,d,l)},t.prototype.quadraticCurve=function(e,t,n,i,r,o,s,d,l,h){return a(this,e,p.QUADRATIC,[s,r,o,u(this,t),u(this,n),u(this,i)],d,l,h)},t.prototype.cubicCurve=function(e,t,n,i,r,o,s,d,l,h,c){return a(this,e,p.CUBIC,[d,o,s,u(this,t),u(this,n),u(this,i),u(this,r)],l,h,c)},t.prototype.image=function(e,t,n,i,r,o,s,d,l){return this.imageManager.use(i,this._refresh,!0),a(this,e,p.IMAGE,[i,u(this,t),u(this,n),r,o],s,d,l)},t.prototype.text=function(e,t,n,i,r,o,s,l,h,c,g,f,y,v){return a(this,e,p.TEXT,[s,n,u(this,t),r,o,i,l,h,c,d(v)],g,f,y)};var x=null,w=null,A=null,E=null,C=null;"undefined"!=typeof document&&(x=document.createElement("canvas"),w=x.getContext("2d")),t.prototype.textWidth=function(e,t,n,i){return t===E&&n===A&&i===C||(w.font=("italic"===i||"bold"===i?i+" ":"")+n+"px "+t,A=n,E=t,C=i),w.measureText(e).width};var S="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ";t.prototype.stopAnimations=function(){this.shapes.attributes.animationDuration.fill(0),this._refresh()},t.prototype.setBackgroundColor=function(e){this.options.backgroundColor=e};var I=2*Math.PI,O=Math.PI/2,z=Math.PI,T=new Array(128);t.prototype.render=function(t){function n(t,n,i){var r,o,a,d,u=oe[t],l=-1!==D?se[t]:e,h=n!==e?oe[n]:e;if(h){k=0;var c,g,f=h.size*Z;if(-1===h.ratio?(c=h.textWidth,g=h.textHeight):(c=h.textWidth*Z,g=h.textHeight*Z),h.length>-99999&&h.length*Z<c)P=0;else{P=J-h.angle;var p=-1;P<-O?(P+=z)<-O&&(P+=z):P>O?(P-=z)>O&&(P-=z):p=1,h.length<-99999&&(p=-1),k=p*((g+f)/2+h.strokeSize)}r=(u.x-q)*Z,o=(u.y-H)*Z;var m=Q*r+K*o,_=-K*r+Q*o;if(i)if(k+=u.oy,l){r=(l.x-q)*Z,o=(l.y-H)*Z;var b=Q*r+K*o,x=-K*r+Q*o;y=b+(m-b)*D,v=x+(_-x)*D}else y=m,v=_;else{var w=Math.cos(P),A=Math.sin(P),E=u.ox+u.zx*Z,C=u.oy+u.zy*Z+k;y=w*E+A*C+m,v=-A*E+w*C+_,l&&(r=(l.x-q)*Z,o=(l.y-H)*Z,b=Q*r+K*o,x=-K*r+Q*o,a=w*E+A*C+b,d=-A*E+w*C+x,y=a+(y-a)*D,v=d+(v-d)*D)}}else r=(u.x-q)*Z+u.ax,o=(u.y-H)*Z+u.ay,y=Q*r+K*o+u.zx*Z+u.ox,v=-K*r+Q*o+u.zy*Z+u.oy,l&&(r=(l.x-q)*Z+l.ax,o=(l.y-H)*Z+l.ay,a=Q*r+K*o+l.zx*Z+l.ox,d=-K*r+Q*o+l.zy*Z+l.oy,y=a+(y-a)*D,v=d+(v-d)*D);y*=s,v*=s}function i(){if(se&&-1!==D){var e=4*h.colors.getIndex(se[0]),t=4*h.colors.getIndex(oe[0]);if(e===t)F=oe[0];else{var n=M[e]+(M[t]-M[e])*D,i=M[e+1]+(M[t+1]-M[e+1])*D,r=M[e+2]+(M[t+2]-M[e+2])*D,o=M[e+3]+(M[t+3]-M[e+3])*D;F="rgba("+(255*n|0)+", "+(255*i|0)+", "+(255*r|0)+", "+o+")"}}else F=oe[0]}function r(){var e=B-a.creationDate[X];D=se&&R&&e<a.animationDuration[X]?e/a.animationDuration[X]:-1}function o(e){if(!e)return!0;var t=(e[0]-q)*Z,n=(e[1]-H)*Z;return y=Q*t+K*n,v=-K*t+Q*n,m=e[2]*Z,y+m>-j&&v+m>-j&&y-m<g+j&&v-m<f+j}var s=h.utils.pixelRatio(),a=this.shapes.attributes,d=this.atomicShapes,u=this.nbAtomicShapes,c=this.ctx,g=this.width,f=this.height,y=0,v=0,m=0,_=null,b=null,x=null,w=null,A=null,E=-1,C=T,S=0,N=null,L=!1,P=0,k=0,F="black",M=h.colors.rgba,D=-1,R=this.animationsEnabled,B=this.currentTime,j=this._visibilityConditionTolerance;this.options.backgroundColor?(c.fillStyle=this.options.backgroundColor,c.fillRect(0,0,g*s,f*s)):c.clearRect(0,0,g*s,f*s);for(var U=0;U<u;++U){var X=d[U],W=a.subLayer[X],V=a.symbolicSize[X],Y=W.symbolicSizeThreshold,G=W.camera,q=G.x,H=G.y,J=G.angle,Z=G.zoom,Q=Math.cos(J),K=Math.sin(J);if(!(W.disabled||-1!==V&&V*W.camera.zoom<Y)){var $=a.visibilityCondition1[X],ee=a.visibilityCondition2[X];if(o($)||o(ee)){if(W.defineClipSpace){var te=a.depth[X];E!==te||N!==W?(E=te,N=W,S=1,C[0]=X):(C[S]=X,S+=1)}else if(W.useClipSpace&&a.depth[X]===E&&a.type[X]!==p.TEXT){for(Z=a.subLayer[X].camera.zoom,L=!0,c.save(),c.beginPath(),ae=0;ae<S;++ae){var ne=C[ae];if(re=a.type[ne],oe=a.info[ne],se=a.prevInfo[ne],r(),re===p.POLYGON){for(var ie=2;ie<oe.length;++ie)n(ie),c[2===ie?"moveTo":"lineTo"](y,v);c.closePath()}else re===p.CIRCLE&&(n(1),m=oe[2]*Z+oe[3],c.arc(y,v,m,0,I))}c.clip()}var re=a.type[X],oe=a.info[X],se=a.prevInfo[X];if(r(),re===p.POLYGON||re===p.TEXT||re===p.CIRCLE?(i(),c.fillStyle=F,c.strokeStyle=F,c.lineWidth=.08*s):re!==p.LINE&&re!==p.QUADRATIC&&re!==p.CUBIC||(i(),c.strokeStyle=F,c.lineWidth=(oe[1]*Z+oe[2])*s),c.beginPath(),re===p.POLYGON){for(var ae=2;ae<oe.length;++ae)n(ae,1),1===ae?c.moveTo(y,v):c.lineTo(y,v);c.closePath(),c.fill(),c.stroke()}else if(re===p.CIRCLE)n(1),function(){m=se&&-1!==D?(se[2]+(oe[2]-se[2])*D)*Z+(se[3]+(oe[3]-se[3])*D):oe[2]*Z+oe[3],m*=s}(),c.arc(y,v,m,0,I),c.fill();else if(re===p.LINE)n(3),c.moveTo(y,v),n(4),c.lineTo(y,v),c.stroke();else if(re===p.QUADRATIC){n(3),c.moveTo(y,v),n(4);var de=y,ue=v;n(5),c.quadraticCurveTo(de,ue,y,v),c.stroke()}else if(re===p.CUBIC){n(3),c.moveTo(y,v),n(4);var le=y,he=v;n(5);var ce=y,ge=v;n(6),c.bezierCurveTo(le,he,ce,ge,y,v),c.stroke()}else if(re===p.TEXT){var fe=oe[3],pe=oe[4],ye=oe[5],ve=oe[6],me=oe[7],_e=oe[8],be=(fe*Z+pe)*s,xe=oe[1];if("FontAwesome"===ye&&l(xe)&&(ye=this.defaultFont),be!==b||ye!==_||ve!==x){var we=("italic"===ve||"bold"===ve?ve+" ":"")+be+"px "+ye;c.font=we,b=be,_=ye,x=ve}me!==w&&(c.textAlign=me,w=me),_e!==A&&(c.textBaseline=_e,A=_e),n(2,9,!0),oe[9]?(c.save(),c.translate(y,v),c.rotate(-P),c.fillText(xe,0,k),c.restore()):c.fillText(xe,y,v)}else if(re===p.IMAGE){var Ae=this.imageManager.getImage(oe[0]),Ee=oe[3],Ce=oe[4],Se=oe[2];if(Ae){n(1);var Ie=(Se.zx+Se.x)*Z+Se.ox,Oe=(Se.zy+Se.y)*Z+Se.oy;if(Ee)c.drawImage(Ae,y-Ie,v-Oe,2*Ie,2*Oe);else{if(c.save(),c.beginPath(),c.rect(y-Ie,v-Oe,2*Ie,2*Oe),c.clip(),Ce){var ze=0,Te=0,Ne=y-Ie,Le=v-Oe;for(y-=Ae.width/2;y>Ne;)y-=Ae.width,ze+=1;for(v-=Ae.height/2;v>Le;)v-=Ae.height,Te+=1;var Pe=v;for(ze=2*ze+1,Te=2*Te+1,ae=0;ae<ze;++ae){for(ie=0;ie<Te;++ie)c.drawImage(Ae,y,v,Ae.width,Ae.height),v+=Ae.height;v=Pe,y+=Ae.width}}else c.drawImage(Ae,y-Ae.width/2,v-Ae.height/2,Ae.width,Ae.height);c.restore()}}}L&&(L=!1,c.restore())}}}},h.renderers.canvas=t}.call(),function(e){function t(e,t,i,r){this._gl=e,this._glprogram=i,this.programName=t,this._capacity=d,this._attributeList=Object.keys(r),this._pointSize=0;for(var o=0;o<this._attributeList.length;++o){var s=this._attributeList[o],l=u[r[s]],h=e.getAttribLocation(i,s);if(!l)throw new Error("attribute "+s+" has invalid type "+r[s]);if(-1===h)throw new Error("program "+t+": attribute location "+s+" should not be -1");this[s]=new n(e,s,l,h,d,s),this._pointSize+=l}this._availableOffsets=new a.utils.IndexList,this._nbTriangles=0}function n(e,t,n,i,r,s){this._location=i,this._id=l++,this._gl=e,this._size=n,this._glBuffer=e.createBuffer(),this._eltBuffer=new Float32Array(3*n),this._nbToUpdate=0,this._name=s,this._bufferAll=!0,this.programName=t,this._content=new Float32Array(0),this._toUpdate=new Int8Array(0),1===n?(this.set=this.set1x1,this.set3=this.set1x3):2===n?(this.set=this.set2x1,this.set3=this.set2x3):3===n?(this.set=this.set3x1,this.set3=this.set3x3):4===n&&(this.set=this.set4x1,this.set3=this.set4x3),o(this,r)}function i(e,t){e._bufferAll||e._toUpdate[t]||(e._nbToUpdate+=1,e._nbToUpdate>1e4?e._bufferAll=!0:e._toUpdate[t]=1)}function r(e){var t=e._gl;if(e._bufferAll)t.bufferSubData(t.ARRAY_BUFFER,0,e._content),e._toUpdate.fill(0),e._bufferAll=!1,e._nbToUpdate=0;else if(0!==e._nbToUpdate){for(var n=e._toUpdate,i=n.length,r=3*e._size,o=e._eltBuffer,s=e._content,a=0;a<i;++a)if(n[a]){for(var d=a*r,u=0;u<r;++u)o[u]=s[d+u];t.bufferSubData(t.ARRAY_BUFFER,4*d,o),n[a]=0}e._nbToUpdate=0}}function o(e,t){var n=e._gl;n.bindBuffer(n.ARRAY_BUFFER,e._glBuffer),n.bufferData(n.ARRAY_BUFFER,t*e._size*3*4,n.DYNAMIC_DRAW),n.bufferSubData(n.ARRAY_BUFFER,0,e._content);var i=new Float32Array(t*e._size*3),r=new Int8Array(t);i.set(e._content),r.set(e._toUpdate),e._content=i,e._toUpdate=r}function s(e){var t=e._gl;t.bindBuffer(t.ARRAY_BUFFER,e._glBuffer),r(e),t.vertexAttribPointer(e._location,e._size,t.FLOAT,!1,0,0)}var a=$global.Ogma;a.renderers.webgl.Buffer=t;var d=256,u={float:1,vec2:2,vec3:3,vec4:4};t.prototype.draw=function(){if(0!==this._nbTriangles){for(var e=this._gl,t=0;t<this._attributeList.length;++t){s(this[this._attributeList[t]])}e.drawArrays(e.TRIANGLES,0,3*this._nbTriangles)}},t.prototype.add=function(){var e;if(this._availableOffsets.size>0)e=this._availableOffsets.pop();else{if(this._nbTriangles===this._capacity){this._capacity=1.5*this._capacity|0;for(var t=0;t<this._attributeList.length;++t){o(this[this._attributeList[t]],this._capacity)}}e=this._nbTriangles,this._nbTriangles+=1}return e},t.prototype.remove=function(e){return!this._availableOffsets.has(e)&&(this._availableOffsets.add(e),this.depth.set1x1(e,-1),!0)},t.prototype.clear=function(){this._nbTriangles=0,this._availableOffsets.clear()};var l=0;n.prototype.clear=function(){this._bufferAll=!0},n.prototype.copy=function(e,t){i(this,t);var n=this._content,r=e._content,s=3*t*this._size,a=s+3*this._size;n.length<r.length&&(o(this,r.length/(3*this._size)),n=this._content);for(var d=s;d<a;++d)n[d]=r[d]},n.prototype.fill=function(e){this._content.fill(e),this._bufferAll=!0},n.prototype.shift=function(e,t,n,r,o,s,a){i(this,e);var d=this._content;e*=12,d[e+2]=d[e],d[e+3]=d[e+1],d[e+6]=d[e+4],d[e+7]=d[e+5],d[e+10]=d[e+8],d[e+11]=d[e+9],d[e]=t,d[e+1]=n,d[e+4]=r,d[e+5]=o,d[e+8]=s,d[e+9]=a},n.prototype.set1x3=function(e,t,n,r){i(this,e);var o=this._content;e*=3,o[e]=t,o[e+1]=n,o[e+2]=r},n.prototype.set1x1=function(e,t){i(this,e);var n=this._content;e*=3,n[e]=t,n[e+1]=t,n[e+2]=t},n.prototype.set2x3=function(e,t,n,r,o,s,a){i(this,e);var d=this._content;e*=6,d[e]=t,d[e+1]=n,d[e+2]=r,d[e+3]=o,d[e+4]=s,d[e+5]=a},n.prototype.set2x1=function(e,t,n){i(this,e);var r=this._content;e*=6,r[e]=t,r[e+1]=n,r[e+2]=t,r[e+3]=n,r[e+4]=t,r[e+5]=n},n.prototype.set3x3=function(e,t,n,r,o,s,a,d,u,l){i(this,e);var h=this._content;e*=9,h[e]=t,h[e+1]=n,h[e+2]=r,h[e+3]=o,h[e+4]=s,h[e+5]=a,h[e+6]=d,h[e+7]=u,h[e+8]=l},n.prototype.set3x1=function(e,t,n,r){i(this,e);var o=this._content;e*=9,o[e]=t,o[e+1]=n,o[e+2]=r,o[e+3]=t,o[e+4]=n,o[e+5]=r,o[e+6]=t,o[e+7]=n,o[e+8]=r},n.prototype.set4x3=function(e,t,n,r,o,s,a,d,u,l,h,c,g){i(this,e);var f=this._content;e*=12,f[e]=t,f[e+1]=n,f[e+2]=r,f[e+3]=o,f[e+4]=s,f[e+5]=a,f[e+6]=d,f[e+7]=u,f[e+8]=l,f[e+9]=h,f[e+10]=c,f[e+11]=g},n.prototype.set4x1=function(e,t,n,r,o){i(this,e);var s=this._content;e*=12,s[e]=t,s[e+1]=n,s[e+2]=r,s[e+3]=o,s[e+4]=t,s[e+5]=n,s[e+6]=r,s[e+7]=o,s[e+8]=t,s[e+9]=n,s[e+10]=r,s[e+11]=o}}.call(),function(e){function t(e,t,i,r,o,l,h,c){var g=n(i),f=n(r),p=n(o),y=d(e,t,s(g,f,p,l,h),!0),v=d(e,t,a(g,p,l,c),!1),m=e.createProgram();if(e.attachShader(m,y),e.attachShader(m,v),e.linkProgram(m),!e.getProgramParameter(m,e.LINK_STATUS))throw new Error("unable to initialize WebGL program "+t+": \n"+e.getProgramInfoLog(m));this._gl=e,this.programName=t,this._glProgram=m,this._attributeDef=f,this._attributeList=Object.keys(f),this.uniforms=new u.renderers.webgl.UniformList(e,t,m,g)}function n(e){e instanceof Array||(e=[e]);for(var t={},n=0;n<e.length;++n)i(t,e[n]);return t}function i(e,t){for(var n=Object.keys(t),i=0;i<n.length;++i){var r=n[i];e[r]=t[r]}}function r(e){if("string"==typeof e)return e+"\n";for(var t="",n=0;n<e.length;++n)t+=r(e[n]);return t}function o(e,t){t=t||{};for(var n=Object.keys(t),i=[],r=0;r<n.length;++r){var o=n[r],s=t[o];i.push(e+" "+s+" "+o+";")}return i}function s(e,t,n,i,s){var a=[];return s=["void main() {",s,"}"],a.push(l),a.push(o("uniform",e)),a.push(o("attribute",t)),a.push(o("varying",n)),(i||[]).forEach(function(e){a.push(e)}),a.push(s),a.map(function(e){return r(e)}).join("\n")}function a(e,t,n,i){var s=[];return i=["void main() {",i,"}"],s.push(l),s.push(o("uniform",e)),s.push(o("varying",t)),(n||[]).forEach(function(e){s.push(e)}),s.push(i),s.map(function(e){return r(e)}).join("\n")}function d(e,t,n,i){var r=e.createShader(i?e.VERTEX_SHADER:e.FRAGMENT_SHADER);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=0;throw console.log(n.split("\n").map(function(e){return++o+"  "+e}).join("\n")),new Error("Error in program "+t+":"+(i?"vertex":"fragment")+":\n"+e.getShaderInfoLog(r))}return r}var u=$global.Ogma,l=["precision mediump float;","precision mediump int;"];t.prototype.prepare=function(e){this._gl.useProgram(this._glProgram);for(var t=e;t<this._attributeList.length;++t)this._gl.enableVertexAttribArray(t);for(t=this._attributeList.length;t<e;++t)this._gl.disableVertexAttribArray(t);return this._attributeList.length},t.prototype.createBuffer=function(){return new u.renderers.webgl.Buffer(this._gl,this.programName,this._glProgram,this._attributeDef)},u.renderers.webgl.Program=t}.call(this),function(e){function t(){return["vec2 positionOnCamera, _position, _angleOffset, _zoomOffset, _offset;","bool thresholdPassed = symbolicSize < 0.0 || (symbolicSize * camZoom) > symbolicSizeThreshold;","if (!thresholdPassed || depth < 0.0) {","  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);","  return;","}","vec2 vcScreenSize = screenSize / textureMultiplier / pixelRatio;","if (!checkVisibilityCondition(visibilityCondition1, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle) && !checkVisibilityCondition(visibilityCondition2, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle)) {;","  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);","  return;","}","float animationRatio = 2.0;","if (animationMode == 1 && animation.x > 0.5) animationRatio = (currentTime - animation.y) / animation.z;","if (animationRatio >= 1.0) {","  _position = absolutePosition.xy;","  _angleOffset = angleOffset.xy;","  _zoomOffset = zoomOffset.xy;","  _offset = offset.xy;","} else {","  _position = interpolate(absolutePosition.zw, absolutePosition.xy, animationRatio);","  _angleOffset = interpolate(angleOffset.zw, angleOffset.xy, animationRatio);","  _zoomOffset = interpolate(zoomOffset.zw, zoomOffset.xy, animationRatio);","  _offset = interpolate(offset.zw, offset.xy, animationRatio);","}","vec2 tmp = ((_position - camPosition) * camZoom + _angleOffset);","vec2 refPoint = vec2(","  cosCamAngle * tmp.x + sinCamAngle * tmp.y,","  -sinCamAngle * tmp.x + cosCamAngle * tmp.y",");","positionOnCamera = (refPoint + _zoomOffset * camZoom + _offset) * pixelRatio;",n()]}function n(){return["vec2 clipSpace = (positionOnCamera * textureMultiplier / screenSize) * 2.0 - 1.0;","gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 1.0 - depth, 1.0);"]}function i(){return["  const float PI = 3.1415926535897932384626433832795;","  const float PI_2 = PI / 2.0;","  bool thresholdPassed = symbolicSize < 0.0 || symbolicSizeThreshold <= (symbolicSize * camZoom);","  if (!thresholdPassed || depth < 0.0) {","    gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);","    return;","  }","  vec2 vcScreenSize = screenSize / textureMultiplier / pixelRatio;","  if (!checkVisibilityCondition(visibilityCondition1, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle) && !checkVisibilityCondition(visibilityCondition2, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle)) {","    gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);","    return;","  }","  float absoluteEdgeLength = lineInfo.y * camZoom;","  float absoluteEdgeSize = lineInfo.z * camZoom;","  float textWidth, textHeight;","  if (textDimensions.z < 0.0) {","    textWidth = textDimensions.x;","    textHeight = textDimensions.y;","  } else {","    textWidth = camZoom * textDimensions.x;","    textHeight = camZoom * textDimensions.y;","  }","  float cosToUse, sinToUse, s = 1.0;","  vec2 additionalOffset, _position, _zoomOffset, _offset;","  if (!isSelfLoop(lineInfo) && absoluteEdgeLength < textWidth) {","    cosToUse = 1.0;","    sinToUse = 0.0;","    additionalOffset = vec2(0.0, 0.0);","  } else {","    float v = (textHeight + absoluteEdgeSize + lineInfo.w) / -2.0;","    float angleToUse = camAngle - lineInfo.x;","    if (!isSelfLoop(lineInfo)) {","      if (angleToUse < -PI_2) { angleToUse += PI; if (angleToUse < -PI_2) { angleToUse += PI; } }","      else if (angleToUse > PI_2) { angleToUse -= PI; if (angleToUse > PI_2) { angleToUse -= PI; } }","    } else if (angleToUse > -PI_2 && angleToUse < PI_2) {","      v = - v + absoluteEdgeSize * 2.0;","    } else {","      if (angleToUse < -PI_2) { angleToUse += PI; if (angleToUse < -PI_2) { angleToUse += PI; } }","      else if (angleToUse > PI_2) { angleToUse -= PI; if (angleToUse > PI_2) { angleToUse -= PI; } }","    }","    additionalOffset = vec2(0.0, v);","    cosToUse = cos(angleToUse);","    sinToUse = sin(angleToUse);","  }","  float animationRatio = 2.0;","  if (animationMode == 1 && animation.x > 0.5) animationRatio = (currentTime - animation.y) / animation.z;","  if (animationRatio > 1.0) {","    _position = absolutePosition.xy;","    _zoomOffset = zoomOffset.xy * camZoom;","    _offset = offset.xy + additionalOffset;","  } else {","    _position = interpolate(absolutePosition.zw, absolutePosition.xy, animationRatio);","    _zoomOffset = interpolate(zoomOffset.zw, zoomOffset.xy, animationRatio) * camZoom;","    _offset = interpolate(offset.zw, offset.xy, animationRatio) + additionalOffset;","  }","  vec2 center, positionOnCamera;","  center = rotate((_position - camPosition) * camZoom, cosCamAngle, sinCamAngle);","  positionOnCamera = (center + rotate(_zoomOffset + _offset, cosToUse, sinToUse)) * pixelRatio;","  vec2 clipSpace = (positionOnCamera * textureMultiplier / screenSize) * 2.0 - 1.0;","  gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 1.0 - depth, 1.0);"]}function r(){return["vTextureCoords = textureCoords;",s()]}function o(){return["vec4 textureColor = texture2D(bigTexture, vTextureCoords);","float alpha = textureColor.a;","gl_FragColor = vec4(textureColor.rgb, alpha) + vColor;"]}function s(){return["vec4 selectedColor = color;","if (animationRatio < 1.0) {","  selectedColor = interpolate(prevColor, color, animationRatio);","}","vColor = selectedColor;"]}var a=$global.Ogma,d={},u={depth:"float",symbolicSize:"float",animation:"vec3",absolutePosition:"vec4",angleOffset:"vec4",zoomOffset:"vec4",offset:"vec4",visibilityCondition1:"vec4",visibilityCondition2:"vec4"},l={depth:"float",symbolicSize:"float",animation:"vec3",absolutePosition:"vec4",zoomOffset:"vec4",offset:"vec4",textDimensions:"vec3",lineInfo:"vec4",visibilityCondition1:"vec4",visibilityCondition2:"vec4"},h={screenSize:"vec2",camPosition:"vec2",cosCamAngle:"float",sinCamAngle:"float",camAngle:"float",animationMode:"int",symbolicSizeThreshold:"float",camZoom:"float",currentTime:"float",textureMultiplier:"float",vcMargin:"float",pixelRatio:"float"},c={texture:"sampler2D"},g={textureCoords:"vec2"},f={vTextureCoords:"vec2"},p={bigTexture:"sampler2D",smallTexture:"sampler2D"},y={textureCoords:"vec2"},v={vTextureCoords:"vec2"},m={color:"vec4",prevColor:"vec4"},_={vColor:"vec4"},b=["float interpolate(in float start, in float end, in float ratio) {","  return start + (end - start) * ratio;","}","vec2 interpolate(in vec2 start, in vec2 end, in float ratio) {","  return start + (end - start) * ratio;","}","vec3 interpolate(in vec3 start, in vec3 end, in float ratio) {","  return start + (end - start) * ratio;","}","vec4 interpolate(in vec4 start, in vec4 end, in float ratio) {","  return start + (end - start) * ratio;","}"],x=["vec2 rotate(in vec2 v, in float cosAngle, in float sinAngle) {","  return vec2(cosAngle * v.x + sinAngle * v.y, -sinAngle * v.x + cosAngle * v.y);","}"],w=["bool isSelfLoop(in vec4 lineInfo) {","  return lineInfo.y < -99999.0;","}"],A=["vec2 computePositionOnScreen(in vec2 absoluteCoords, in vec2 camPos, in float zoom, in float cosAngle, in float sinAngle) {","  vec2 tmp = (absoluteCoords - camPos) * zoom;","  return vec2(","    cosAngle * tmp.x + sinAngle * tmp.y,","    -sinAngle * tmp.x + cosAngle * tmp.y","  );","}"],E=["bool checkVisibilityCondition(in vec4 condition, in vec2 screenDimensions, in vec2 camPos, in float zoom, in float cosAngle, in float sinAngle) {","  if (condition.w == 0.0) return true;","  vec2 posOnScreen = computePositionOnScreen(condition.xy, camPos, zoom, cosAngle, sinAngle);","  float radiusOnScreen = zoom * condition.z;","  return posOnScreen.x - radiusOnScreen - vcMargin < screenDimensions.x && posOnScreen.x + radiusOnScreen + vcMargin > 0.0 && posOnScreen.y - radiusOnScreen - vcMargin < screenDimensions.y && posOnScreen.y + radiusOnScreen + vcMargin > 0.0;","}"],C=[b,x,A,E],S={circleMultiplier:"vec2"},I={vMultiplier:"vec2"};d.polygon={uniforms:h,attributes:[u,m],varyings:_,functions:C,vertex:[t(),s()],fragment:["gl_FragColor = vColor;"]},d.circle={uniforms:h,attributes:[u,m,S],varyings:[_,I],functions:C,vertex:[t(),s(),"vMultiplier = circleMultiplier;"],fragment:["const vec3 black = vec3(0.0, 0.0, 0.0);","float d = length(vMultiplier);","if (d <= 1.0) {","  gl_FragColor = vColor;","} else {","  discard;","}"]},d.image={uniforms:[h,c],attributes:[u,g],varyings:[f],functions:C,vertex:[t(),"vTextureCoords = textureCoords;"],fragment:["gl_FragColor = texture2D(texture, vTextureCoords);"]},d.nonScaledImage={uniforms:[h,c,{textureDimensions:"vec2"}],attributes:[u,g,{textureBox:"vec2",duplicate:"float"}],varyings:[f,{vDuplicateTexture:"float"}],functions:C,vertex:[t(),"float offsetW = ((textureBox.x * camZoom) / (textureDimensions.x * 2.0)) + 0.5;","float offsetH = ((textureBox.y * camZoom) / (textureDimensions.y * 2.0)) + 0.5;","vTextureCoords = vec2(","  textureCoords.x == 1.0 ? offsetW : 1.0 - offsetW,","  textureCoords.y == 1.0 ? offsetH : 1.0 - offsetH",");","vDuplicateTexture = duplicate;"],fragment:["if (vDuplicateTexture == 0.0 && (vTextureCoords.x < 0.0 || vTextureCoords.x > 1.0 || vTextureCoords.y < 0.0 || vTextureCoords.y > 1.0)) {","  discard;","} else {","  gl_FragColor = texture2D(texture, vTextureCoords);","}"]},d.text={uniforms:[h,p],attributes:[u,y,m],varyings:[v,_],functions:C,vertex:[t(),r()],fragment:[o()]},d.lineText={uniforms:[h,p],attributes:[l,y,m],varyings:[v,_],functions:[C,w],vertex:[i(),r()],fragment:[o()]},d.linePolygon={uniforms:[h],attributes:[l,m],varyings:[_],functions:[C,w],vertex:[i(),s()],fragment:["gl_FragColor = vColor;"]};var O={texture:"sampler2D",screenTextureRatio:"vec2"},z={positionOnScreen:"vec2"},T={vTextureCoords:"vec2"};d.antialias={uniforms:[O],attributes:[z],varyings:[T],functions:[],vertex:["float coordX, coordY;","float difRatioX = (1.0 - screenTextureRatio.x) / 2.0;","float difRatioY = (1.0 - screenTextureRatio.y) / 2.0;","if (positionOnScreen.x == -1.0) coordX = 0.0; else coordX = screenTextureRatio.x;","if (positionOnScreen.y == -1.0) coordY = 0.0; else coordY = screenTextureRatio.y;","vTextureCoords = vec2(coordX, coordY);","gl_Position = vec4(positionOnScreen, 0.0, 1.0);"],fragment:["gl_FragColor = texture2D(texture, vTextureCoords);"]},a.renderers.webgl.programs=d}.call(),function(e){function t(e,t,i,r,o){this.fontFamily=e,this.fontStyle=t,this.updateTexture=i,this.defaultFont=r,this.characterResolution=o,this.textureSize=s.utils.upperPowerOf(o*a,2),this.bigCanvas=n(this,t,e),this.bigCtx=this.bigCanvas.getContext("2d"),this.charList=d,this.mustUpdate=!1,this.reload(),this.updateIfNecessary()}function n(e,t,n){var r=document.createElement("canvas");r.width=e.textureSize,r.height=e.textureSize;var o=r.getContext("2d");return o.textBaseline="middle",o.textAlign="center",i(o,n,t,e.characterResolution),o.fillStyle="black",r}function i(e,t,n,i){e.font=("italic"===n||"bold"===n?n+" ":"")+i+"px "+t}function r(e){return-1!==d.indexOf(e)}function o(e,t){var n=e.characterResolution;if(e.full)return null;var o="FontAwesome"!==e.fontFamily||r(t)?e.bigCtx.measureText(t).width/n:1.2,s=o+u,d=1+l;if(e.nextX+s>a&&(e.nextX=0,e.nextY+=d,e.nextY>=a))return e.full=!0,null;var h=e.nextX+s/2,c=e.nextY+d/2;"FontAwesome"===e.fontFamily&&(r(t)?i(e.bigCtx,e.defaultFont,e.fontStyle,n):i(e.bigCtx,e.fontFamily,e.fontStyle,n)),e.bigCtx.fillText(t,Math.round(h*n),Math.round(c*n));var g={x1:e.nextX/a,y1:e.nextY/a,x2:(e.nextX+s)/a,y2:(e.nextY+d)/a,ratio:s/d};return e.nextX+=s,e.charMap[t]=g,e.charList+=t,g}var s=$global.Ogma,a=16,d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 _";t.prototype.get=function(e){var t=this.charMap[e];if(!t){if(!(t=o(this,e)))return console.warn('Cannot create texture for character "'+e+'": BitMap font ('+this.fontFamily+") ["+this.fontStyle+"] full."),null;this.mustUpdate=!0}return t},t.prototype.updateIfNecessary=function(){this.mustUpdate&&(this.bigTexture=this.updateTexture(this.bigCanvas,this.bigTexture),this.mustUpdate=!1)},t.prototype.reload=function(){this.nextX=0,this.nextY=0,this.charMap={},this.full=!1,this.bigCtx.clearRect(0,0,this.textureSize,this.textureSize);var e=this.charList;this.charList="";for(var t=0;t<e.length;++t)o(this,e[t]);this.mustUpdate=!0};var u=.11,l=.15;t.TOTAL_CHAR_HEIGHT=1+l,s.renderers.webgl.BitmapFont=t}.call(),function(){function e(e,t,n){n=n||{},this.renderer=e,this.gl=e.gl,this.renderFunction=t,this.ratio=$or(n.ratio,1),this.wrap=$or(n.wrap,this.gl.CLAMP_TO_EDGE),this.minFilter=$or(n.minFilter,this.gl.NEAREST_MIPMAP_LINEAR),this.magFilter=$or(n.magFilter,this.gl.NEAREST),this.texture=null,this.framebuffer=null,this.depthStencilBuffer=null,this.screenWidth=null,this.screenHeight=null,this.renderWidth=null,this.renderHeight=null}var t=$global.Ogma;e.prototype.resize=function(e,n,i){var r=t.utils.pixelRatio();if(e*=r,n*=r,this.screenWidth=e,this.screenHeight=n,this.renderWidth=e*this.ratio,this.renderHeight=n*this.ratio,i){var o=this.gl,s=t.utils.upperPowerOf(e,2)*this.ratio,a=t.utils.upperPowerOf(n,2)*this.ratio;s===this.textureWidth&&a===this.textureHeight||(this.textureWidth=s,this.textureHeight=a,this.texture&&o.deleteTexture(this.texture),this.framebuffer&&o.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&o.deleteRenderbuffer(this.depthStencilBuffer),this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,this.wrap),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,this.wrap),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.minFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,this.magFilter),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,this.textureWidth,this.textureHeight,0,o.RGBA,o.UNSIGNED_BYTE,null),o.bindTexture(o.TEXTURE_2D,null),this.depthStencilBuffer=o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,this.depthStencilBuffer),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,this.textureWidth,this.textureHeight),this.framebuffer=o.createFramebuffer(),o.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,this.texture,0),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,this.depthStencilBuffer))}},e.prototype.render=function(e){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.viewport(0,0,this.renderWidth,this.renderHeight),this.renderFunction(this.renderer,t,this,e)},$global.webgl.RenderStep=e}(),function(e){function t(e,t,i,r){for(var o=Object.keys(r),s=0;s<o.length;++s){var a=o[s],d=r[a],u=new n(e,t,i,a,d);this[a]=u}}function n(e,t,n,i,r){var o=e.getUniformLocation(n,i);if(-1===o)throw new Error("program "+t+": uniform location "+i+" should not be -1");this.set="vec4"===r?function(t,n,i,r){e.uniform4f(o,t,n,i,r)}:"vec3"===r?function(t,n,i){e.uniform3f(o,t,n,i)}:"vec2"===r?function(t,n){e.uniform2f(o,t,n)}:"float"===r?function(t){e.uniform1f(o,t)}:function(t){e.uniform1i(o,t)}}$global.Ogma.renderers.webgl.UniformList=t}.call(),function(e){function t(e){this.renderFunction=e;var t=this;this._animationFrame=function(e){t._newFrame(e)},this._time=0,this._inFrame=!1,this._mustRefresh=!1,this._updateTimeCouter=!0,this._nextFrame=[],this._nbFrames=0,this._totalElapsed=0}var n="undefined"!=typeof window&&window.requestAnimationFrame?function(e){window.requestAnimationFrame(e)}:function(e){setTimeout(e,17)};$global.FrameManager=t,t.prototype.kill=function(){$kill(this),this._nextFrame=e},t.prototype.requestNewFrame=function(){this._inFrame?(this._mustRefresh=!0,this._updateTimeCouter=!0):this._requestDone||(this._requestDone=!0,n(this._animationFrame))},t.prototype.atNextFrame=function(e){this._nextFrame.push(e)},t.prototype._newFrame=function(e){var t=e-this._time;if(this._inFrame=!0,this._mustRefresh=!1,this._time=e,this.renderFunction(this._updateTimeCouter?t:0),this._nextFrame.length){var i=this._nextFrame;this._nextFrame=[];for(var r=0;r<i.length;++r)i[r]()}this._mustRefresh?n(this._animationFrame):(this._inFrame=!1,this._requestDone=!1,this._updateTimeCouter=!1)}}.call(),function(e){function t(e){this.images={},this.crossOrigin=e}$global.ImageManager=t;var n="undefined"!=typeof Image?Image:function(){},i=new n;i.src="data:image/png;base64,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",t.prototype.use=function(t,r,o){var s=this.images[t];if(s){if(o)return;s.loaded?r(s.content):s.onLoad.push(r)}else{var a=new n;s={content:a,loaded:!1,onLoad:[r]},s.content.crossOrigin=this.crossOrigin,s.content.src=t,s.content.onload=function(){s.loaded=!0,s.onLoad.forEach(function(e){e(s.content)}),s.onLoad=e}.bind(this),s.content.onerror=function(n){this.images[t]||(this.images[t].content=i,s.loaded=!0,s.onLoad.forEach(function(e){e(s.content)}),s.onLoad=e)}.bind(this),this.images[t]=s}},t.prototype.kill=function(){$kill(this),this.images=e},t.prototype.getErrorImage=function(){return i},t.prototype.getImage=function(e){var t=this.images[e];return t&&t.loaded?t.content:null}}.call(),function(e){$global.Ogma}.call(),function(e){function t(e){return"string"!=typeof e?null:"#"===e.charAt(0)?i(e):n(e)}function n(t){var n=t.match(/(\d*\.\d+)|(\d+)/g);return n&&n.length>=3?(u[0]=parseInt(n[0])/255,u[1]=parseInt(n[1])/255,u[2]=parseInt(n[2])/255,u[3]=n[3]===e?1:parseFloat(n[3]),u):null}function i(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,i){return t+t+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?(u[0]=parseInt(n[1],16)/255,u[1]=parseInt(n[2],16)/255,u[2]=parseInt(n[3],16)/255,u[3]=1,u):null}function r(e,t){return d===s.colors.indexToStr.length&&(s.colors.indexToStr=s.memory.expand(s.colors.indexToStr),s.colors.rgba=s.memory.expand(s.colors.rgba)),a[e]=d,s.colors.indexToStr[d]=e,s.colors.rgba[4*d]=t[0],s.colors.rgba[4*d+1]=t[1],s.colors.rgba[4*d+2]=t[2],s.colors.rgba[4*d+3]=t[3],(d+=1)-1}function o(e){return e<16?"0"+e.toString(16):e.toString(16)}var s=$global.Ogma;s.colors=Object.create(null);var a={},d=1;s.colors.indexToStr=s.memory.allocate(Array,256),s.colors.rgba=s.memory.allocate(Float32Array,1024);var u=new Float32Array(4);s.colors.is=function(e){return 0!==this.getIndex(e)},s.colors.getIndex=function(n){var i=a[n];if(i===e){var o=t(n);o?i=r(n,o):(i=0,a[n]=0)}return i},s.colors.colorToHexa=function(e){var t=4*s.colors.getIndex(e),n=s.colors.rgba;return"#"+o(255*n[t]|0)+o(255*n[t+1]|0)+o(255*n[t+2]|0)},s.colors.toRgb=function(e){var t=4*s.colors.getIndex(e),n=s.colors.rgba;return[255*n[t]|0,255*n[t+1]|0,255*n[t+2]|0]},s.colors.toRgba=function(e){var t=4*s.colors.getIndex(e),n=s.colors.rgba;return[255*n[t]|0,255*n[t+1]|0,255*n[t+2]|0,n[t+3]]};for(var l=["AliceBlue","#F0F8FF","AntiqueWhite","#FAEBD7","Aqua","#00FFFF","Aquamarine","#7FFFD4","Azure","#F0FFFF","Beige","#F5F5DC","Bisque","#FFE4C4","Black","#000000","BlanchedAlmond","#FFEBCD","Blue","#0000FF","BlueViolet","#8A2BE2","Brown","#A52A2A","BurlyWood","#DEB887","CadetBlue","#5F9EA0","Chartreuse","#7FFF00","Chocolate","#D2691E","Coral","#FF7F50","CornflowerBlue","#6495ED","Cornsilk","#FFF8DC","Crimson","#DC143C","Cyan","#00FFFF","DarkBlue","#00008B","DarkCyan","#008B8B","DarkGoldenRod","#B8860B","DarkGray","#A9A9A9","DarkGrey","#A9A9A9","DarkGreen","#006400","DarkKhaki","#BDB76B","DarkMagenta","#8B008B","DarkOliveGreen","#556B2F","DarkOrange","#FF8C00","DarkOrchid","#9932CC","DarkRed","#8B0000","DarkSalmon","#E9967A","DarkSeaGreen","#8FBC8F","DarkSlateBlue","#483D8B","DarkSlateGray","#2F4F4F","DarkSlateGrey","#2F4F4F","DarkTurquoise","#00CED1","DarkViolet","#9400D3","DeepPink","#FF1493","DeepSkyBlue","#00BFFF","DimGray","#696969","DimGrey","#696969","DodgerBlue","#1E90FF","FireBrick","#B22222","FloralWhite","#FFFAF0","ForestGreen","#228B22","Fuchsia","#FF00FF","Gainsboro","#DCDCDC","GhostWhite","#F8F8FF","Gold","#FFD700","GoldenRod","#DAA520","Gray","#808080","Grey","#808080","Green","#008000","GreenYellow","#ADFF2F","HoneyDew","#F0FFF0","HotPink","#FF69B4","IndianRed","#CD5C5C","Indigo","#4B0082","Ivory","#FFFFF0","Khaki","#F0E68C","Lavender","#E6E6FA","LavenderBlush","#FFF0F5","LawnGreen","#7CFC00","LemonChiffon","#FFFACD","LightBlue","#ADD8E6","LightCoral","#F08080","LightCyan","#E0FFFF","LightGoldenRodYellow","#FAFAD2","LightGray","#D3D3D3","LightGrey","#D3D3D3","LightGreen","#90EE90","LightPink","#FFB6C1","LightSalmon","#FFA07A","LightSeaGreen","#20B2AA","LightSkyBlue","#87CEFA","LightSlateGray","#778899","LightSlateGrey","#778899","LightSteelBlue","#B0C4DE","LightYellow","#FFFFE0","Lime","#00FF00","LimeGreen","#32CD32","Linen","#FAF0E6","Magenta","#FF00FF","Maroon","#800000","MediumAquaMarine","#66CDAA","MediumBlue","#0000CD","MediumOrchid","#BA55D3","MediumPurple","#9370DB","MediumSeaGreen","#3CB371","MediumSlateBlue","#7B68EE","MediumSpringGreen","#00FA9A","MediumTurquoise","#48D1CC","MediumVioletRed","#C71585","MidnightBlue","#191970","MintCream","#F5FFFA","MistyRose","#FFE4E1","Moccasin","#FFE4B5","NavajoWhite","#FFDEAD","Navy","#000080","OldLace","#FDF5E6","Olive","#808000","OliveDrab","#6B8E23","Orange","#FFA500","OrangeRed","#FF4500","Orchid","#DA70D6","PaleGoldenRod","#EEE8AA","PaleGreen","#98FB98","PaleTurquoise","#AFEEEE","PaleVioletRed","#DB7093","PapayaWhip","#FFEFD5","PeachPuff","#FFDAB9","Peru","#CD853F","Pink","#FFC0CB","Plum","#DDA0DD","PowderBlue","#B0E0E6","Purple","#800080","RebeccaPurple","#663399","Red","#FF0000","RosyBrown","#BC8F8F","RoyalBlue","#4169E1","SaddleBrown","#8B4513","Salmon","#FA8072","SandyBrown","#F4A460","SeaGreen","#2E8B57","SeaShell","#FFF5EE","Sienna","#A0522D","Silver","#C0C0C0","SkyBlue","#87CEEB","SlateBlue","#6A5ACD","SlateGray","#708090","SlateGrey","#708090","Snow","#FFFAFA","SpringGreen","#00FF7F","SteelBlue","#4682B4","Tan","#D2B48C","Teal","#008080","Thistle","#D8BFD8","Tomato","#FF6347","Turquoise","#40E0D0","Violet","#EE82EE","Wheat","#F5DEB3","White","#FFFFFF","WhiteSmoke","#F5F5F5","Yellow","#FFFF00","YellowGreen","#9ACD32"],h=0;h<l.length;h+=2){r(l[h].toLowerCase(),t(l[h+1]))}}.call(),function(e){var t=$global.Ogma;t.shapes={nodes:{},edges:{}};var n=new t.utils.Position,i=new t.utils.Position,r={},o={};t.shapes.utils={getCurveControlPoint:function(e,n,i,r,o,s){return o<0?t.geometry.getQuadraticControlPoints(e,n,i,r,2,4/o,s):t.geometry.getQuadraticControlPoints(i,r,e,n,2,4/o*-1,s)},getLoopControlPoints:function(e,n,i,r,o){return t.geometry.getSelfLoopControlPoints(e,n,r+i,o)},createDashedEdgeType:function(e,s){return{drawStraight:function(r,o,a,d,u,l,h,c,g,f,p,y,v,m){for(var _=h*e,b=_*s,x=_+b,w=t.geometry.distance(a,d,u,l),A=(u-a)/w,E=(l-d)/w,C=.7*g,S=(w-C)/x|0,I=C,O=r.updateComposite(o,S),z=0;z<S;++z)n.setXY(a+A*I,d+E*I),I+=_,i.setXY(a+A*I,d+E*I),I+=b,O[z]=r.line(O[z],n,i,h,c,p,y,v,m);return r.composite(o,O)},drawCurved:function(o,a,d,u,l,h,c,g,f,p,y,v,m,_,b){for(var x=c*e,w=x*s,A=x+w,E=t.shapes.utils.getCurveControlPoint(d,u,l,h,f,E),C=t.geometry.quadraticCurveLength(d,u,E.x,E.y,l,h),S=.7*p,I=(C-S)/A|0,O=x/C,z=w/C,T=S/C,N=o.updateComposite(a,I),L=0;L<I;++L)t.geometry.getPointOnQuadraticCurve(T,d,u,l,h,E.x,E.y,r),n.setXY(r.x,r.y),T+=O,t.geometry.getPointOnQuadraticCurve(T,d,u,l,h,E.x,E.y,r),i.setXY(r.x,r.y),T+=z,N[L]=o.line(N[L],n,i,c,g,v,m,_,b);return o.composite(a,N)},drawLoop:function(r,o,a,d,u,l,h,c,g,f,p,y){var v=u*e,m=v*s,_=t.shapes.utils.getLoopControlPoints(a,d,h,c,_),b=t.geometry.cubicCurveLength(a,d,_.x1,_.y1,_.x2,_.y2,a,d),x=.7*c,w=v/b,A=m/b,E=x/b,C=0;r.delete(o);for(var S=[];E<=1;){t.geometry.getPointOnBezierCurve(E,a,d,a,d,_.x1,_.y1,_.x2,_.y2,n),E+=w;do{t.geometry.getPointOnBezierCurve(E,a,d,a,d,_.x1,_.y1,_.x2,_.y2,i),E+=.01}while(t.geometry.distance(n.x,n.y,i.x,i.y)<v);do{t.geometry.getPointOnBezierCurve(E,a,d,a,d,_.x1,_.y1,_.x2,_.y2,i),E-=.01}while(t.geometry.distance(n.x,n.y,i.x,i.y)>v);E+=A+.01,S[C]=r.line(S[C],n,i,u,l,g,f,p,y),++C}return r.composite(-1,S)},detectStraight:function(e,n,i,r,o,s,a,d,u){return t.geometry.isPointInLine(e,n,i,r,o,s,a)},detectCurved:function(e,n,i,r,s,a,d,u,l,h){return t.shapes.utils.getCurveControlPoint(i,r,s,a,u,o),t.geometry.isPointOnQuadraticCurve(e,n,i,r,s,a,o.x,o.y,d/2)},detectLoop:function(e,n,i,r,s,a,d){return t.shapes.utils.getLoopControlPoints(i,r,a,d,o),t.geometry.isPointOnBezierCurve(e,n,i,r,i,r,o.x1,o.y1,o.x2,o.y2,s/2)}}}}}.call(),function(e){function t(e,t,n,i,r,a,d,u,l,h,c,g,f,p){return o.x=n,o.y=i,s.x=r,s.y=a,e.line(t,o,s,d,u,c,g,f,p)}function n(e,t,n,i,o,s,a,u,c,g,f,p,y,v,m){return d.reset(),l.reset(),h.reset(),l.x=n,l.y=i,h.x=o,h.y=s,r.shapes.utils.getCurveControlPoint(n,i,o,s,c,d),e.quadraticCurve(t,l,d,h,a,u,p,y,v,m)}function i(e,t,n,i,o,s,h,c,g,f,p,y){return d.reset(),u.reset(),l.reset(),d.reset(),u.reset(),l.reset(),l.x=n,l.y=i,r.shapes.utils.getLoopControlPoints(n,i,h,c,a),d.x=a.x1,d.y=a.y1,u.x=a.x2,u.y=a.y2,e.cubicCurve(t,l,d,u,l,o,s,g,f,p,y)}var r=$global.Ogma,o=new r.utils.Position,s=new r.utils.Position,a={},d=new r.utils.Position,u=new r.utils.Position,l=new r.utils.Position,h=new r.utils.Position;r.shapes.edges.line={drawStraight:t,drawCurved:n,drawLoop:i,detectStraight:function(e,t,n,i,o,s,a,d,u){return r.geometry.isPointInLine(e,t,n,i,o,s,a)},detectCurved:function(e,t,n,i,o,s,d,u,l,h){return r.shapes.utils.getCurveControlPoint(n,i,o,s,u,a),r.geometry.isPointOnQuadraticCurve(e,t,n,i,o,s,a.x,a.y,d/2)},detectLoop:function(e,t,n,i,o,s,d){return r.shapes.utils.getLoopControlPoints(n,i,s,d,a),r.geometry.isPointOnBezierCurve(e,t,n,i,n,i,a.x1,a.y1,a.x2,a.y2,o/2)},haloStraight:t,haloCurved:n,haloLoop:i}}.call(),function(e){function t(t,n){return n===e&&(n=3),t+Math.log(t+1)*n}function n(e){return function(n,i,r,o,s,l,h,f,p,y,v,m,_,b,x){x=x||g;var w=t(h,x.arrowSizeRatio),A=f/2,E=a.geometry.distance(r,o,s,l),C=(s-r)/E,S=(l-o)/E,I=s-C*(w+y),O=l-S*(w+y),z=s-C*y,T=l-S*y,N=-S,L=C,P=I+N*(w/2),k=O+L*(w/2),F=I-N*(w/2),M=O-L*(w/2),D=I+N*A,R=O+L*A,B=I-N*A,j=O-L*A;d.x=r,d.y=o,u.x=I,u.y=O,c.reset(),c[0].setXY(P,k),c[1].setXY(F,M),c[2].setXY(z,T),c[0].setAXY(D-I,R-O),c[1].setAXY(B-I,j-O),e&&(c[2].setAXY(C*A,S*A),c[0].ax-=C*A,c[0].ay-=S*A,c[1].ax-=C*A,c[1].ay-=S*A);var U=n.updateComposite(i,2);return U[0]=n.line(U[0],d,u,h,f,v,m,_,b),U[1]=n.triangle(U[1],c[0],c[1],c[2],v,m,_,b),n.composite(i,U)}}function i(e){return function(t,n,i,r,s,a,h,g,f,p,x,w,A,E,C,S){o(i,r,s,a,h,f,x,S.arrowSizeRatio),d.setXY(i,r),u.setXY(y,v),l.setXY(b.x,b.y),c.reset(),c[0].setXY(y+m,v+_),c[1].setXY(y+.6*_,v-.6*m),c[2].setXY(y-.6*_,v+.6*m),o(i,r,s,a,g,f,x,S.arrowSizeRatio),c[1].setAXY(.3*_,.3*-m),c[2].setAXY(.3*-_,.3*m),e&&(c[0].setAXY(m,_),c[1].ax-=.3*(m-_),c[1].ay-=.3*(_+m),c[2].ax-=.3*(m+_),c[2].ay-=.3*(_-m));var I=t.updateComposite(n,2);return I[0]=t.quadraticCurve(I[0],d,l,u,h,g,w,A,E,C),I[1]=t.triangle(I[1],c[0],c[1],c[2],w,A,E,C),t.composite(n,I)}}function r(e){return function(t,n,i,r,o,a,g,f,p,x,w,A,E){s(i,r,o,g,f,E.arrowSizeRatio),d.setXY(i,r),u.setXY(y,v),l.setXY(b.x1,b.y1),h.setXY(b.x2,b.y2),c.reset(),c[0].setXY(y+m,v+_),c[1].setXY(y+.6*_,v-.6*m),c[2].setXY(y-.6*_,v+.6*m),s(i,r,a,g,f,E.arrowSizeRatio),c[1].setAXY(.3*_,.3*-m),c[2].setAXY(.3*-_,.3*m),e&&(c[0].setAXY(m,_),c[1].ax-=.3*(m-_),c[1].ay-=.3*(_+m),c[2].ax-=.3*(m+_),c[2].ay-=.3*(_-m));var C=t.updateComposite(n,2);return C[0]=t.cubicCurve(C[0],d,h,l,u,o,a,p,x,w,A),C[1]=t.triangle(C[1],c[0],c[1],c[2],p,x,w,A),t.composite(n,C)}}function o(e,n,i,r,o,s,d,u){f=t(o,u),a.shapes.utils.getCurveControlPoint(e,n,i,r,s,b),p=a.geometry.distance(i,r,b.x,b.y),y=b.x+(i-b.x)*(p-f-d)/p,v=b.y+(r-b.y)*(p-f-d)/p,m=(i-b.x)*f/p,_=(r-b.y)*f/p}function s(e,n,i,r,o,s){f=t(i,s),a.shapes.utils.getLoopControlPoints(e,n,r,o,b);var d=o+(i-r),u=d/2;b.x1+=d,b.y1+=d,b.y2-=u,p=Math.sqrt(Math.pow(e-b.x1,2)+Math.pow(n-b.y1,2)),y=b.x1+(e-b.x1)*(p-f-o)/p,v=b.y1+(n-b.y1)*(p-f-o)/p,m=(e-b.x1)*f/p,_=(n-b.y1)*f/p}var a=$global.Ogma,d=new a.utils.Position,u=new a.utils.Position,l=new a.utils.Position,h=new a.utils.Position,c=new a.utils.PositionList(3),g={};a.shapes.edges.arrow={drawStraight:n(!1),drawCurved:i(!1),drawLoop:r(!1),haloStraight:n(!0),haloCurved:i(!0),haloLoop:r(!0),detectStraight:function(e,n,i,r,o,s,d,u,l){var h=t(d),c=a.geometry.distance(i,r,o,s),g=(o-i)/c,f=(s-r)/c,p=o-g*(h+l),y=s-f*(h+l),v=o-g*l,m=s-f*l,_=a.geometry.lineFromPoint(p,y,o,s,h);return a.geometry.isPointInLine(e,n,i,r,p,y,d)||a.geometry.isPointInTriangle(e,n,_.x1,_.y1,_.x2,_.y2,v,m)},detectCurved:function(e,t,n,i,r,s,d,u,l,h){return o(n,i,r,s,d,u,h),a.geometry.isPointOnQuadraticCurve(e,t,n,i,y,v,b.x,b.y,d/2)||a.geometry.isPointInTriangle(e,t,y+m,v+_,y+.6*_,v-.6*m,y-.6*_,v+.6*m)},detectLoop:function(e,t,n,i,r,o,d){return s(n,i,r,o,d),a.geometry.isPointOnBezierCurve(e,t,y,v,n,i,b.x1,b.y1,b.x2,b.y2,r/2)||a.geometry.isPointInTriangle(e,t,y+m,v+_,y+.6*_,v-.6*m,y-.6*_,v+.6*m)}};var f,p,y,v,m,_,b={}}.call(),function(e){var t=$global.Ogma;t.shapes.edges.dashed=t.shapes.utils.createDashedEdgeType(3,3/8)}.call(),function(e){var t=$global.Ogma;t.shapes.edges.dotted=t.shapes.utils.createDashedEdgeType(1,1),new t.utils.Position,new t.utils.Position,new t.utils.Position,new t.utils.Position,new t.utils.Position}.call(),function(e){function t(e,t,n,i,r,s,a,d,u,l,h,c){return o(n,i,r,s,a,d),e.polygon(t,E,u,l,h,c)}function n(e,t,n,i,o,s,a,d,u,l,h,c,g,f,p){return r(n,i,o,s,a,d,u,l,h),e.polygon(t,E,c,g,f,p)}function i(e,t,n,i,r,o,s,a,d,h,c,g,f,p){var y=u.geometry.distance(n,i,r,o);u.geometry.orthogonal(n,i,r,o,1,l);var v=(n-r)/y,m=(i-o)/y,_=-m,b=v,x=a/2;return C.reset().setXY(n+_*s,i+b*s).setXY(n-_*s,i-b*s).setXY(r+v*h,o+m*h).setXY(r+v*h,o+m*h),C.setAXY(_*x,b*x).setAXY(-_*x,-b*x).setAXY((-_-v)*x,(-b-m)*x).setAXY((_-v)*x,(b-m)*x),e.quadrilateral(t,C[0],C[1],C[2],C[3],c,g,f,p)}function r(e,t,n,i,r,o,a,l,p){u.shapes.utils.getCurveControlPoint(e,t,n,i,a,h);var y=u.geometry.distance(h.x,h.y,n,i);c.setXY(e,t),g.setXY(n+(h.x-n)/y*p,i+(h.y-i)/y*p),f.setXY(h.x,h.y),d(c,f,f,g,2*r,o,s)}function o(e,t,n,i,r,o){u.shapes.utils.getLoopControlPoints(e,t,r,o,h);var s=u.geometry.distance(h.x2,h.y2,e,t);c.setXY(e,t),g.setXY(e+(h.x1-e)/s*o,t+(h.y1-t)/s*o),f.setXY(h.x1,h.y1),p.setXY(h.x2,h.y2),d(c,p,f,g,2*n,i,a)}function s(e,t,n,i,r,o){u.geometry.getPointOnQuadraticCurve(e,t.x,t.y,r.x,r.y,n.x,n.y,o)}function a(e,t,n,i,r,o){u.geometry.getPointOnBezierCurve(e,t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y,o)}function d(e,t,n,i,r,o,s){s(0,e,t,n,i,y),s(1/A,e,t,n,i,v),u.utils.lineFromBoundaries(y,v,r,o,_,b,x,w),E[0].set(_),E[2*A].set(b),E[2*A-1].set(x),E[1].set(w);for(var a=2;a<A;++a)s(a/A,e,t,n,i,m),u.utils.lineFromBoundaries(v,m,r*(1-a/A),o,_,b,x,w),_.set(x),b.set(w),E[2*A-a].set(_),E[a].set(b),y.set(v),v.set(m);E[A].set(i)}var u=$global.Ogma,l=(new u.utils.PositionList(3),{}),h={},c=new u.utils.Position,g=new u.utils.Position,f=new u.utils.Position,p=new u.utils.Position,y=new u.utils.Position,v=new u.utils.Position,m=new u.utils.Position,_=new u.utils.Position,b=new u.utils.Position,x=new u.utils.Position,w=new u.utils.Position,A=40,E=new u.utils.PositionList(2*A+1);u.shapes.edges.tapered={drawStraight:i,drawCurved:n,drawLoop:t,haloStraight:i,haloCurved:n,haloLoop:t,detectStraight:function(e,t,n,i,r,o,s,a,d){return u.geometry.lineFromPoint(n,i,r,o,2*s,l),u.geometry.isPointInTriangle(e,t,l.x1,l.y1,l.x2,l.y2,r,o)},detectCurved:function(e,t,n,i,o,s,a,d,l,h){return r(n,i,o,s,a,0,d,l,h),u.geometry.isPointInPolygon(e,t,E)},detectLoop:function(e,t,n,i,r,s,a){return o(n,i,r,0,s,a),u.geometry.isPointInPolygon(e,t,E)}};var C=new u.utils.PositionList(4)}.call(),function(e){for(var t=$global.Ogma,n=2*Math.PI/10,i=[],r=[],o=0;o<10;++o)i[o]=Math.cos(o*n-Math.PI/2),r[o]=Math.sin(o*n-Math.PI/2);var s=new t.utils.PositionList(10);t.shapes.nodes.star={draw:function(e,t,n,o,a,d,u,l,h,c){s.reset(),s.x=n,s.y=o;for(var g=0;g<10;++g){var f=g%2==1?.4:1;s[g].zx=i[g]*a*f,s[g].zy=r[g]*a*f,s[g].ox=i[g]*d*f*2.5,s[g].oy=r[g]*d*f*2.5}return e.polygon(t,s,u,l,h,c)},detect:function(e,n,o,a,d){s.reset();for(var u=0;u<10;++u){var l=u%2==1?.4:1;s[u].x=e+i[u]*o*l,s[u].y=n+r[u]*o*l}return t.geometry.isPointInPolygon(a,d,s)}}}.call(),function(e){function t(e,t){return r.reset(),r.x=e,r.y=t,r}function n(e,t,n,i){return o.reset(),o.zx=e,o.zy=t,o.ox=n,o.oy=i,o}var i=$global.Ogma,r=new i.utils.Position,o=new i.utils.Position;i.shapes.nodes.cross={draw:function(e,i,r,o,s,a,d,u,l,h){var c=e.updateComposite(i,2);return c[0]=e.rectangle(c[0],t(r,o),n(s,.31*s,a,a),d,u,l,h),c[1]=e.rectangle(c[1],t(r,o),n(.31*s,s,a,a),d,u,l,h),e.composite(i,c)},detect:function(e,t,n,r,o){var s=.31*n;return i.geometry.isPointInRectangle(r,o,e-n,t-s,e+n,t+s)||i.geometry.isPointInRectangle(r,o,e-s,t-n,e+s,t+n)}}}.call(),function(e){var t=$global.Ogma,n=new t.utils.Position;t.shapes.nodes.circle={draw:function(e,t,i,r,o,s,a,d,u,l){return e.circle(t,n.setXY(i,r),o,s,a,d,u,l)},detect:function(e,t,n,i,r){var o=e-i,s=t-r;return o*o+s*s<n*n}}}.call(),function(e){function t(e,t){return r.reset(),r.x=e,r.y=t,r}function n(e,t,n,i){return o.reset(),o.zx=e,o.zy=t,o.ox=n,o.oy=i,o}var i=$global.Ogma,r=new i.utils.Position,o=new i.utils.Position;i.shapes.nodes.square={draw:function(e,i,r,o,s,a,d,u,l,h){return e.rectangle(i,t(r,o),n(s,s,a,a),d,u,l,h)},detect:function(e,t,n,r,o){return i.geometry.isPointInRectangle(r,o,e-n,t-n,e+n,t+n)}}}.call(),function(e){function t(e,t,n,r){i.reset(),i.x=e,i.y=t,i[0].zy=-n,i[1].zx=n,i[2].zy=n,i[3].zx=-n,i[0].oy=-r,i[1].ox=r,i[2].oy=r,i[3].ox=-r}var n=$global.Ogma,i=new n.utils.PositionList(4);n.shapes.nodes.diamond={draw:function(e,n,r,o,s,a,d,u,l,h){return t(r,o,s,a),e.quadrilateral(n,i[0],i[1],i[2],i[3],d,u,l,h)},detect:function(e,t,r,o,s){return i.reset(),i.setXY(e-r,t).setXY(e,t-r).setXY(e+r,t).setXY(e,t+r),n.geometry.isPointInPolygon(o,s,i)}}}.call(),function(e){for(var t=$global.Ogma,n=[],i=0;i<10;++i)n.push({x:0,y:0});var r={};t.shapes.nodes.equilateral={draw:function(e,n,i,o,s,a,d,u,l,h,c){c=c||r;var g=c.numPoints||5,f=new t.utils.PositionList(g),p=-Math.PI/2+(c.rotate||0),y=2*Math.PI/g;f.x=i,f.y=o;for(var v=0;v<g;++v){var m=Math.cos(p),_=Math.sin(p);f[v].setZXY(m*s,_*s),f[v].setOXY(m*a,_*a),p+=y}return e.polygon(n,f,d,u,l,h)},detect:function(e,i,r,o,s,a){for(var d=a.numPoints||5,u=-Math.PI/2+(a.rotate||0),l=2*Math.PI/d,h=0;h<d;++h)n[h].x=e+Math.cos(u)*r,n[h].y=i+Math.sin(u)*r,u+=l;return t.geometry.isPointInPolygon(o,s,n,d)}}}.call(),function(e){$global.Ogma.types={}}.call(),function(e){function t(){this.predicates={}}function n(e){return 0!==a.colors.getIndex(e)}function i(e){return isFinite(e)&&e>=0}function r(){return!0}function o(e,t,n){return function(i,o){n=n||r;var a=null;return(void 0===i?"undefined":_typeof(i))===t&&n(i,o)||(a="expected "+e,o.values instanceof Array&&(-1!==o.values.indexOf(i)?a=null:a+=" or one of the following values: "+s(o.values))),a}}function s(t){for(var n="[",i=0;i<t.length;++i){var r=t[i];n+=r===e?"undefined":JSON.stringify(r),i!==t.length-1&&(n+=", ")}return n+="]"}var a=$global.Ogma;t.prototype.check=function(e,t){var n;if("string"==typeof t.type){if(!(n=this.predicates[t.type]))throw new Error("type "+t.type+" is not a valid type. Valid types are "+JSON.stringify(Object.keys(this.predicates)))}else{if("function"!=typeof t.check){if(t.values instanceof Array)return-1===t.values.indexOf(e)?"expected one of following values: "+s(t.values):void 0;throw new Error('missing field "type", "check" or "values".')}n=t.check}return n(e,t)},t.prototype.register=function(e,t){this.predicates[e]=t},t.prototype.registerMultiple=function(e){a.utils.forEach(e,function(e,t){this.register(t,e)},this)};var d=new t;a.types.check=function(e,t){return d.check(e,t)},a.types.register=function(e,t){d.register(e,t)},d.registerMultiple({string:o("string","string"),number:o("number","number"),boolean:o("boolean","boolean"),color:o("color","string",n),positive:o("finite positive number","number",i)})}.call(),function(e){function t(e){Object.defineProperty(n.modules,e,{get:function(){},set:function(){throw new Error('A module cannot be named "'+e+'".')}})}var n=$global.Ogma;n.modules=Object.create(null),t("ogma"),t("modules"),t("clear"),t("kill")}.call(),function(e){function t(e){this._topology=e.topology,this._operators=Object.create(null),this._aggregators=Object.create(null),this.registerOperators(g)}function n(t,n){if("function"==typeof n)return null;if(!(n instanceof Array||"string"==typeof n))return"invalid expression "+JSON.stringify(n)+": an expression must be a string or an array of size at least one.";if("string"!=typeof n){if(n.length<1)return JSON.stringify(n)+" must have a length of at least one.";var o=i(t,n[0]),a=n[1]!==e&&null!==n[1]&&r(t,n[1]),d=n[2]!==e&&i(t,n[2]),u=n[3]!==e&&s(t,n[3]);if(o)return o;if(a)return a;if(d)return d;if(u)return u}return null}function i(e,t){var i=void 0===t?"undefined":_typeof(t);if("function"===i)return null;if(t instanceof Array){var r=n(e,t);if(r)return r}else if("string"!==i&&null!==t&&("object"!==i||!t.hasOwnProperty("value")))return JSON.stringify(t)+': invalid operand value. An operand can be an expression, a string, or an object containing the property "value".'}function r(e,t){if("string"!=typeof t||!e._operators[t])return"invalid operator "+JSON.stringify(t)+": operators must have one of the following values: "+JSON.stringify(Object.keys(e._operators))}function o(e){if(!(e instanceof Array))return 0;var t=e[3]?1:0,n=o(e[0]),i=e[1]?o(e[2]):0;return t+Math.max(n,i)}function s(e,t){if("object"!==(void 0===t?"undefined":_typeof(t))||null===t)return"invalid aggregator "+JSON.stringify(t)+": an aggregator must be an object with only one key among the following values: "+JSON.stringify(f);var n=Object.keys(t),i=n[0],r=t[i];return 1!==n.length||-1===f.indexOf(i)?"invalid aggregator "+JSON.stringify(t)+": an aggregator must be an object with only one key among the following values: "+JSON.stringify(f):"string"==typeof r&&e._aggregators[r]?void 0:"invalid aggregator name "+JSON.stringify(r)+": aggregators must have one of the following values: "+JSON.stringify(Object.keys(e._aggregators))}function a(e,t,n,i){if("function"==typeof n)return n(t);var r,o=null,s=null,a=null;if("string"==typeof n?r=n:(r=n[0],o=n[2],s=l(e,n[1])||null,a=n[3]),a&&t.isNode){for(var u=Object.keys(a),c=u[0],g=a[c],f=h(e,g),v=e._topology.getAdjacentElements(t,{type:y[c],direction:p[c]}),m=new Array(v.length),_=0;_<v.length;++_)m[_]=d(e,v[_],s,r,o,i);return f(m)}return d(e,t,s,r,o,i)}function d(t,n,i,r,o,s){var a=u(t,n,r,s);if(a===e&&s)return e;if(i){return i(a,o!==e&&null!==o?u(t,n,o,s):e)}return a}function u(e,t,n,i){var r=void 0===n?"undefined":_typeof(n);if(n instanceof Array||"function"===r)return a(e,t,n,i);if("string"===r)return"."===n?t:c.utils.strToObjectRef(t,n);if("object"===r&&null!==n&&n.hasOwnProperty("value")&&1===Object.keys(n).length)return n.value;throw new TypeError(n+" is not a valid operand")}function l(t,n){if(!n)return e;var i=t._operators[n];if(!i)throw new Error('Undefined operator "'+n+'".');return i}function h(e,t){var n=e._aggregators[t];if(!n)throw new Error('Undefined aggregator "'+t+'".');return n}var c=$global.Ogma;t.dependencies=["topology"];var g={"===":function(e,t){return e===t},"==":function(e,t){return e==t},"!==":function(e,t){return e!==t},"!=":function(e,t){return e!=t},">":function(e,t){return e>t},"<":function(e,t){return e<t},">=":function(e,t){return e>=t},"<=":function(e,t){return e<=t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"!":function(e){return!e},not:function(e){return!e},includes:function(e,t){return e===t||e instanceof Array&&-1!==e.indexOf(t)}};t.prototype.computeExpression=function(e,t,n){return a(this,e,t,n)},t.prototype.checkExpressionFormat=function(e){return n(this,e)},t.prototype.expressionDepth=function(e){return o(e)},t.prototype.registerOperator=function(e,t,n){if(this._operators[e]&&!n)throw new Error("Operator "+e+" is already defined.");this._operators[e]=t},t.prototype.registerOperators=function(e,t){c.utils.forEach(e,function(e,n){this.registerOperator(n,e,t)},this)},t.prototype.registerAggregator=function(e,t,n){if(this._aggregators[e]&&!n)throw new Error("Aggregator "+e+" is already defined.");this._aggregators[e]=t},t.prototype.registerAggregators=function(e,t){c.utils.forEach(e,function(e,n){this.registerAggregator(n,e,t)},this)},t.prototype.operators=function(){return c.utils.deepCopy(this._operators)},t.prototype.aggregators=function(){return c.utils.deepCopy(this._aggregators)};var f=["nodes","edges","inNodes","outNodes","inEdges","outEdges"],p={nodes:"both",inNodes:"in",outNodes:"out",edges:"both",inEdges:"in",outEdges:"out"},y={nodes:"nodes",inNodes:"nodes",outNodes:"nodes",edges:"edges",inEdges:"edges",outEdges:"edges"};c.modules.dsl=t}.call(),function(e){function t(e,t){if(t.fps){this._render=e.render,this._settings=e.settings.get("fps");var i=this._settings.average;this._dom=document.createElement("div"),this._domCurrent=document.createElement("div"),this._domAverage=document.createElement("div"),this._domCurrentText=document.createElement("span"),this._domCurrentValue=document.createElement("span"),this._domCurrentText.innerHTML=i?"Current FPS: ":"FPS: ",this._domAverageText=document.createElement("span"),this._domAverageValue=document.createElement("span"),this._domAverageText.innerHTML="Average FPS: ",this._domCurrentValue.id="ogma-current-fps",this._domAverageValue.id="ogma-average-fps",this._dom.style.position="absolute",this._dom.style.left="5px",this._dom.style.top="5px",this._dom.style.fontFamily="Arial",this._dom.style.backgroundColor="white",this._dom.style.border="solid 1px black",this._dom.style.padding="5px",this._domCurrent.appendChild(this._domCurrentText),this._domCurrent.appendChild(this._domCurrentValue),this._domAverage.appendChild(this._domAverageText),this._domAverage.appendChild(this._domAverageValue),this._dom.appendChild(this._domCurrent),i&&this._dom.appendChild(this._domAverage),this.reset();var r=this;e.events.bind({"render.newFrame":function(){r._nbFrames+=1;var e=n.utils.now();e-r._lastDate>1e3&&(r._nbFrames>60&&(r._nbFrames=60),r._lastDate=e,r._records.push(r._nbFrames),r._average=Math.round(r._records.reduce(function(e,t){return e+t},0)/r._records.length),r._domCurrentValue.innerHTML=r._nbFrames,r._domAverageValue.innerHTML=r._average,r._nbFrames=0),r._render.refresh()},"drawing.everything":function(){r._nbFrames=0,r._average=0,r._lastDate=n.utils.now(),r._records=[]},"render.setContainer":function(e){e&&e.appendChild(r._dom)}})}}var n=$global.Ogma;t.dependencies=["render","drawing"],t.settings={average:{default:!1,type:"boolean"}},t.prototype.reset=function(){this._nbFrames=0,this._average=0,this._lastDate=n.utils.now(),this._records=[],this._domCurrentValue.innerHTML="0",this._domAverageValue.innerHTML="0"},t.prototype.records=function(){return this._records.slice()},t.prototype.average=function(){return this._average},t.prototype.dom=function(){return this._dom},n.modules.fps=t}.call(),function(){function e(e){var s=this;this._settings=e.settings.get("geo",!0),this._ogma=e,this._render=e.render,this._drawing=e.drawing,this._camera=e.camera,this._settingsModule=e.settings,this._graph=e.graph,this._locate=e.locate,this._brand=e.brand,this._screen=this._render.screen,this._tiles={},this._tileSize=B*D.utils.pixelRatio(),this._enableMapBackground=!1,this._init=!1,this._enabled=!1,this._sIndex=0,this._lat=0,this._lng=0,this._zoom=1,this._zoomOffset=0,this._cameraDx=this._cameraDy=0,this._graph.addNodeAttributes({"geo.prevX":Array,"geo.prevY":Array,"geo.prevLat":Array,"geo.prevLng":Array,"geo.prevSize":Array}),this._graph.addEdgeAttributes({"geo.prevSize":Array}),this._events=e.events.create("geo.",["enabled","disabled","loaded","ready"]),this._drawing.addNodeVisualProperty("longitude",{type:"number"},void 0,function(e){return S(s,[e])}),this._drawing.addNodeVisualProperty("latitude",{type:"number"},void 0,function(e){return S(s,[e])}),this._drawing.addNodeVisibilityCondition(function(e){return!s._enabled||void 0!==e.longitude&&void 0!==e.latitude}),this._drawing.addEdgeVisibilityCondition(function(e){return!s._enabled||void 0!==e.__source.longitude&&void 0!==e.__target.latitude&&void 0!==e.__target.longitude&&void 0!==e.__target.latitude}),e.on({"graph.addNodes":function(e,t){for(var r=s._settings.longitudePath,o=s._settings.latitudePath,a=s._graph.attributes(!0),d=a.longitude,u=a.latitude,l=0,h=e.length;l<h;++l){var c=e[l],g=c.__index,f=t[l],p=D.utils.strToObjectRef(f,r),y=D.utils.strToObjectRef(f,o);n(c,p),i(c,y),d[g]=p,u[g]=y}s._enabled&&(w(s,e),S(s,e),I(s,!0,e))},"graph.addEdges":function(e){s._enabled&&(T(s,s._graph.edges,"size","geo.prevSize"),I(s,!1,e))},"render.setContainer":function(e){e&&x(s,e)},"settings.geo":function(e){s._enabled&&(t(e,"tileUrlTemplate")&&(s._tiles={},m(s)),t(e,"sizeZoomReferential")&&(I(s,!0,s._graph.nodes),I(s,!1,s._graph.edges),s._drawing.redrawEverything()),t(e,"attribution")&&o(s),t(e,"maxZoomLevel")&&s._settingsModule.update("camera",{minZoom:1,maxZoom:Math.pow(2,s._settings.maxZoomLevel)}))},"camera.move":function(){return m(s)},"render.resize":function(){r(s),m(s)},"drawing.nodes":function(e){s._enabled&&!s._transition&&O(s,e)}})}function t(e,t){return-1!==e.indexOf(t)}function n(e,t){if(void 0!==t&&("number"!=typeof t||!isFinite(t)))throw new TypeError("node "+e.id+": "+t+" is not a valid longitude")}function i(e,t){if(void 0!==t&&("number"!=typeof t||!isFinite(t)))throw new TypeError("node "+e.id+": "+t+" is not a valid latitude")}function r(e){e._init&&(e._tileSize=B*D.utils.pixelRatio(),D.utils.resizeElement(e._canvas,e._screen.width,e._screen.height))}function o(e){if(e._enabled){var t=e._settings.attribution;e._settings.attribution?e._brand.set(t):e._brand.remove()}}function s(e){e._settings.attribution&&e._brand.remove()}function a(e,t,n,i,r,o,s,a){t=t||e._ctx;var u=Math.ceil(r),l=u-r,c=1/Math.pow(2,l),g=e._tileSize*c,f=u,p=D.utils.pixelRatio();e._settings.detectRetina&&(g/=p,f+=Math.log2(p));for(var y=k(o,s,f),v=0|y.x,m=0|y.y,_=y.x-v,b=y.y-m,x=n/2-_*g,w=i/2-b*g;x>0;)x-=g,v-=1;for(;w>0;)w-=g,m-=1;var A,E,C,S,I,O=!0,z=[];for(A=x,E=v;A<n;A+=g,++E)for(C=w,S=m;C<i;C+=g,++S)z.push([E,S,A,C]);var T=v+(E-v)/2,N=m+(S-m)/2,L=D.geometry.squaredDistance;for(z.sort(function(e,t){return L(e[0],e[1],T,N)-L(t[0],t[1],T,N)}),A=0,I=z.length;A<I;A++){var P=z[A];O&=h(e,t,P[2],P[3],f,P[0],P[1],g,a)}return clearTimeout(e._pruneTimer),e._pruneTimer=setTimeout(function(){d(e,f)},100),O}function d(e,t){var n=0;for(var i in e._tiles){var r=parseInt(i.split(",")[0]);(r<t-1||r>t+2)&&(e._tiles[i]=null,n++)}return n}function u(e,t,n){if(e._enableMapBackground&&e._ctx){var i=e._ctx,r=e._lat,o=e._lng,s=e._zoom,d=D.utils.pixelRatio(),l=e._screen.width*d,h=e._screen.height*d;i.globalAlpha=t||1,i.fillStyle=n||e._settings.backgroundColor,i.fillRect(0,0,l,h),t&&(i.globalAlpha=t),a(e,e._ctx,l,h,s,r,o,!0)?e._events.loaded():(clearTimeout(e._redrawTimer),e._redrawTimer=setTimeout(function(){u(e)},50))}}function l(e){return e instanceof Image}function h(e,t,n,i,r,o,s,a,d){var u=f(e,r,o,s,!0);if(l(u))return t.drawImage(u,n,i,a,a),!0;if(u===j.LOADING){if(d){var h;if(u=f(e,r-1,o/2|0,s/2|0,!1),l(u)){h=u.naturalWidth/2;var c=1&o?h:0,g=1&s?h:0;t.drawImage(u,c,g,h,h,n,i,a,a)}else{var p=f(e,r+1,2*o,2*s,!1),y=f(e,r+1,2*o+1,2*s,!1),v=f(e,r+1,2*o,2*s+1,!1),m=f(e,r+1,2*o+1,2*s+1,!1);l(p)&&l(y)&&l(v)&&l(m)&&(h=a/2,t.drawImage(p,n,i,h,h),t.drawImage(y,n+h,i,h,h),t.drawImage(v,n,i+h,h,h),t.drawImage(m,n+h,i+h,h,h))}}return!1}return!0}function c(e,t){var n=e._sIndex;return t.length>0?(n=(n+1)%t.length,e._sIndex=n,n):0}function g(e,t,n,i){var r=e._settings.tileUrlSubdomains,o=c(e,r);return e._settings.tileUrlTemplate.replace("{z}",i).replace("{x}",t).replace("{y}",n).replace("{s}",r.charAt(o))}function f(e,t,n,i,r){var o=Math.pow(2,t)-1;if(t<0||n<0||n>o||i<0||i>o)return j.INVALID;var s=t+"/"+n+"/"+i,a=e._tiles[s];return a?a.err?j.MISSING:a.loaded?a.img:j.LOADING:r?(a={img:new Image,err:!1,loaded:!1},a.img.setAttribute("crossOrigin","anonymous"),a.img.onError=function(){a.err=!0},a.img.onload=function(){a.loaded=!0},a.img.src=g(e,n,i,t),e._tiles[s]=a,j.LOADING):j.MISSING}function p(e,t,n,i){return n=n||function(){},t===e._enabled||e._transition||(e._enabled=t,e._transition=!0,t?y(e,function(){e._transition=!1,e._events.enabled(),e._events.ready(),n.call(i)}):v(e,function(){e._transition=!1,e._events.disabled(),n.call(i)})),new Promise(function(n,i){e._transition?e._ogma.events.once(t?"geo.enabled":"geo.disabled",n):n()})}function y(e,t){var n=e._render.getContainer(),i=e._settings.transitionDuration;n&&(e._init||x(e,n),n.insertBefore(e._canvas,n.firstChild)),e._enableTime=D.utils.now(),e._enableMapBackground=!1,e._drawing.redrawEverything(),w(e,e._graph.nodes),T(e,e._graph.edges,"size","geo.prevSize");var r;e._locate.computeCameraConfig(),I(e,!1,e._graph.edges),I(e,!0,e._graph.nodes),e._drawing.animate(function(){e._drawing.redrawEverything(),S(e,e._graph.nodes),r=e._locate.computeCameraConfig(),r.zoom=Math.pow(2,Math.floor(Math.log2(r.zoom))),e._camera.loadConfig(r)},i,function(){e._prevBgColor=e._render.setBackgroundColor(null),e._cameraSettings=e._settingsModule.update("camera",{minZoom:1,maxZoom:Math.pow(2,e._settings.maxZoomLevel)}),e._cameraInteractionSettings=e._settingsModule.update("cameraInteractions",{cameraFixDuration:null,zoomModifier:2,rotationEnabled:!1}),e._enableMapBackground=!0,o(e),u(e),t()})}function v(e,t){var n=e._render.getContainer();if(n){var i=e._settings.transitionDuration,r=e._settings.backgroundFadingDuration,o=D.utils.now(),a=function a(){var d=D.utils.now(),l=(d-o)/r;if(l<1)u(e,1-l,e._prevBgColor),setTimeout(a,17);else{var h;e._locate.computeCameraConfig(),s(e),e._drawing.animate(function(){e._drawing.redrawEverything(),A(e,e._graph.nodes),h=e._locate.computeCameraConfig()},i,function(){E(e,e._graph.nodes),T(e,e._graph.edges,"geo.prevSize","size"),e._locate.center(),e._drawing.redrawEverything(),n.removeChild(e._canvas),e._render.setBackgroundColor(e._prevBgColor),e._settingsModule.update("camera",e._cameraSettings),e._settingsModule.update("cameraInteractions",e._cameraInteractionSettings),t()})}};setTimeout(a,0)}}function m(e){var t=e._camera,n=Math.log2(t.zoom),i=P(t.x-e._cameraDx,t.y-e._cameraDy);b(e,i[0],i[1],n)}function _(e){var t=L(e._lat,e._lng),n=Math.pow(2,e._zoom);e._camera.setCenter(t[0]+e._cameraDx,t[1]+e._cameraDy),e._camera.setZoom(n)}function b(e,t,n,i){e._enabled&&(e._lat=t,e._lng=n,e._zoom=i,u(e))}function x(e,t){e._canvas=document.createElement("canvas"),e._ctx=e._canvas.getContext("2d"),e._canvas.style.position="absolute",e._canvas.style.zIndex=+(t.style.zIndex||0)-1,e._init=!0,r(e)}function w(e,t){z(e,t,"x","geo.prevX"),z(e,t,"y","geo.prevY"),z(e,t,"size","geo.prevSize"),z(e,t,"latitude","geo.prevLat"),z(e,t,"longitude","geo.prevLng")}function A(e,t){z(e,t,"geo.prevX","x"),z(e,t,"geo.prevY","y")}function E(e,t){z(e,t,"geo.prevSize","size")}function C(e,t){z(e,t,"geo.prevLat","latitude"),z(e,t,"geo.prevLng","longitude"),S(e,t)}function S(e,t){for(var n=e._graph.attributes(!0),i=n.longitude,r=n.latitude,o=n.x,s=n.y,a=new Array(2),d=0,u=0,l=0,h=0,c=0,g=t.length;c<g;++c){var f=t[c].__index,p=r[f],y=i[f];if(void 0!==y&&void 0!==p){L(p,y,a);var v=a[0],m=a[1];d+=o[f],u+=s[f],l+=v,h+=m,o[f]=a[0],s[f]=a[1]}}for(var _=(d-l)/t.length,b=(u-h)/t.length,x=0,w=t.length;x<w;++x){var A=t[x].__index;o[A]+=_,s[A]+=b}e._cameraDx=_,e._cameraDy=b}function I(e,t,n){for(var i=e._graph.attributes(t),r=e._settings.sizeZoomReferential,o=Math.pow(2,r),s=i.size,a=i["geo.prevSize"],d=0,u=n.length;d<u;++d){var l=n[d].__index;s[l]=a[l]/o}}function O(e,t){for(var n=e._graph.attributes(!0),i=n.longitude,r=n.latitude,o=n.x,s=n.y,a=new Array(2),d=0,u=t.length;d<u;++d){var l=t[d].__index,h=r[l];void 0!==i[l]&&void 0!==h&&(P(o[l]-e._cameraDx,s[l]-e._cameraDy,a),r[l]=a[0],i[l]=a[1])}}function z(e,t,n,i){N(e,!0,t,n,i)}function T(e,t,n,i){N(e,!1,t,n,i)}function N(e,t,n,i,r){for(var o=e._graph.attributes(t),s=o[i],a=o[r],d=0,u=n.length;d<u;++d){var l=n[d].__index;a[l]=s[l]}}function L(e,t,n){n=n||new Array(2);var i=Math.max(Math.min(X,e),-X),r=Math.sin(i*V);return n[0]=W*(G*(U*t*V)+q),n[1]=W*(H*(U*Math.log((1+r)/(1-r))/2)+J),n}function P(e,t,n){return n=n||new Array(2),e=(e/W-q)/G,t=(t/W-J)/H,n[0]=(2*Math.atan(Math.exp(t/U))-Math.PI/2)*Y,n[1]=e*Y/U,n}function k(e,t,n){var i=Math.pow(2,n);return e=e*Math.PI/180,{x:i*((t+180)/360),y:i*(1-Math.log(Math.tan(e)+1/Math.cos(e))/Math.PI)/2}}function F(e,t){var n=e._settings.maxZoomLevel;if("number"!=typeof t||!(t>=0&&t<=n))throw new Error("invalid zoom value "+t+": expected value between 0 and "+n)}function M(e,t){if("number"!=typeof e)throw new Error("invalid latitude "+e+": expected number");if("number"!=typeof t)throw new Error("invalid longitude "+t+": expected number")}var D=$global.Ogma,R={latitudePath:{default:"latitude",type:"string"},longitudePath:{default:"longitude",type:"string"},sizeZoomReferential:{default:5,type:"positive"},maxZoomLevel:{default:17,type:"positive"},tileUrlTemplate:{default:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",type:"string"},tileUrlSubdomains:{default:"abc",type:"string"},attribution:{default:null,type:"string",values:[null]},backgroundColor:{default:"silver",type:"color"},transitionDuration:{default:0,type:"positive"},backgroundFadingDuration:{default:500,type:"positive"},detectRetina:{default:!1,type:"boolean"}},B=256;e.dependencies=["render","settings","camera","graph","drawing","locate","brand"],e.settings=R;var j={INVALID:1,LOADING:2,MISSING:3},U=6378137,X=85.0511287798,W=256,V=Math.PI/180,Y=180/Math.PI,G=.5/(Math.PI*U),q=.5,H=-G,J=.5;e.prototype.enable=function(e,t){return p(this,!0,e,t)},e.prototype.disable=function(e,t){return p(this,!1,e,t)},e.prototype.isEnabled=function(){return this._enabled},e.prototype.toggle=function(e,t){return p(this,!this._enabled,e,t)},e.prototype.resetCoordinates=function(){this._enabled&&(C(this,this._graph.nodes),S(this,this._graph.nodes))},e.prototype.setView=function(e,t,n){if(!this._enabled)throw new Error("Geo mode is not enabled");F(this,n),M(e,t),b(this,e,t,n),_(this)},e.prototype.setCenter=function(e,t){this.setView(e,t,this._zoom)},e.prototype.setZoom=function(e){this.setView(this._lat,this._lng,e)},e.prototype.getView=function(){return{latitude:this._lat,longitude:this._lng,zoom:this._zoom}},e.prototype.getCenter=function(){return{latitude:this._lat,longitude:this._lng}},e.prototype.getZoom=function(){return this._zoom},e.prototype.exportBackground=function(e,t,n,i){var r=this;n=n||this._camera.saveConfig();var o=Math.log2(n.zoom),s=P(n.x-this._cameraDx,n.y-this._cameraDy);a(this,e.getContext("2d"),e.width,e.height,o,s[0],s[1],!1)?t():setTimeout(function(){return r.exportBackground(e,t,n)},100)},e.prototype.whenReady=function(e,t){if("function"!=typeof e)throw new Error("Callback has to be a function");return this._transition?this._ogma.events.once("geo.ready",function(){e.call(t)}):e.call(t),this},D.modules.geo=e}(),function(){function e(e){var i=this;this._graph=e.graph,this._drawing=e.drawing,this._camera=e.camera,this._settings=e.settings.get("drag",!0),this._events=e.events.create("drag.",["start","progress","end"]),this._drawing.addLayer("drag",$C("layer","drag"));var r=this,o=null,s=0,a=0,d=0,u=0;this._dragNodes=e.exclusives.create({priority:$C("interaction","drag"),check:function(){return r._settings.manual},onStart:function(t,i,l){o=t.active?e.selection.nodes():[t];var h=n(r,i,l);s=h.x,a=h.y,d=0,u=0,o.forEach(function(e){return r._drawing.putElementOnLayer(e,"drag")}),r._events.start(o)},onProgress:function(e,i,l){var h=n(r,i,l),c=h.x-s,g=h.y-a;s=h.x,a=h.y,d+=c,u+=g,t(r,o,c,g)},onStop:function(){o.forEach(function(e){return r._drawing.removeElementFromLayer(e,"drag")}),r._events.end(o,d,u),o=null}}),e.on({"captor.startDragNode":function(e,t,n){return i._dragNodes.start(e,t,n)},"captor.dragNode":function(e,t,n){return i._dragNodes.progress(e,t,n)},"captor.endDragNode":function(e,t,n){return i._dragNodes.stop(e,t,n)}})}function t(e,t,n,i){for(var r=e._graph.attributes(!0),o=r.x,s=r.y,a=0,d=t.length;a<d;++a){var u=t[a].__index;o[u]+=n,s[u]+=i}e._drawing.redraw(t),e._events.progress(t,n,i)}function n(e,t,n){var i=Math.cos(e._camera.angle),r=Math.sin(e._camera.angle),o=t/e._camera.zoom,s=n/e._camera.zoom;return{x:i*o-r*s,y:r*o+i*s}}var i=$global.Ogma,r={manual:{default:!0,type:"boolean"}};e.settings=r,e.dependencies=["graph","drawing","camera","events","captor","selection"],e.prototype.nodes=function(e,i,r,o){var s=o?n(this,i,r):{x:i,y:r};this._events.start(e),t(this,e,s.x,s.y),this._events.end(e,s.x,s.y)},i.modules.drag=e}(),function(e){function t(e){this._render=e.render,this._settings=e.settings.get("brand",!0),this._container=null,this._brand=null;var t=this;e.events.bind({"render.setContainer":function(e,n){t._container=e,t._brand&&(n&&n.removeChild(t._brand),e&&e.appendChild(t._brand))}})}var n=$global.Ogma;t.settings={position:{default:"bottom-right",values:["top-left","top-right","bottom-left","bottom-right"]},horizontalMargin:{default:0,type:"positive"},verticalMargin:{default:0,type:"positive"}},t.dependencies=["render"];var i={"top-left":"left","bottom-left":"left","top-right":"right","bottom-right":"right"},r={"top-left":"top","bottom-left":"bottom","top-right":"top","bottom-right":"bottom"};t.onStart=function(e,t){t.brand&&e.set(t.brand)},t.prototype.set=function(e,t){this.remove();var n=document.createElement("div");n.innerHTML=e;var o=this._settings.position,s=this._settings.verticalMargin,a=this._settings.horizontalMargin;n.style.position="absolute",n.style[i[o]]=a+"px",n.style[r[o]]=s+"px",n.style.padding="0px 0px 0px 0px",n.style.zIndex="1000",n.addEventListener("mousemove",function(e){return e.stopPropagation()}),n.addEventListener("mousedown",function(e){return e.stopPropagation()}),n.addEventListener("mouseup",function(e){return e.stopPropagation()}),n.addEventListener("touchstart",function(e){return e.stopPropagation()}),n.addEventListener("touchend",function(e){return e.stopPropagation()}),t&&n.setAttribute("class",t),this._container&&this._container.appendChild(n),this._brand=n},t.prototype.remove=function(){this._container&&this._brand&&this._container.removeChild(this._brand),this._brand=null},n.modules.brand=t}.call(),function(e){function t(e){this._graph=e.graph,this._camera=e.camera,this._renderer=e.render,this._drawing=e.drawing,this._shapes=e.shapes,this._settings=e.settings.get("halos"),this._shapeSettings=e.settings.get("shapes"),this._clusterCircles=[],this._drawing.addEdgeSubLayer("edgeHalos",$C("subLayer","edgeHalos")),this._drawing.addNodeSubLayer("nodeHaloStrokes",$C("subLayer","nodeHaloStrokes")),this._drawing.addNodeSubLayer("nodeHalos",$C("subLayer","nodeHalos")),this._drawing.addCommonVisualComponent("haloComponent",this._drawing.MIN_DEPTH),this._drawing.addNodeVisualComponent("haloStrokeComponent",this._drawing.MIN_DEPTH),this._drawing.addCommonVisualProperty("halo",{values:[!0,!1]},!1);var t=this;e.events.bind({"drawing.nodes":function(e){return r(t,e)},"drawing.edges":function(e){return o(t,e)},"camera.zoom":function(){return i(t)},"graph.clear":function(){for(var e=0;e<t._clusterCircles.length;++e)t.renderer.delete(t._clusterCircles[e])},"settings.halos":function(){t._settings=e.settings.get("halos"),t._drawing.redrawEverything()},"settings.shapes":function(){t._shapeSettings=e.settings.get("shapes"),t._drawing.redrawEverything()}})}function n(e,t,i,r,o){for(var a,d=0;d<e.length;++d){var u=e[d];if(u){for(var l=0,h=0,c=0,g=0;g<u.length;++g)a=u[g],l+=i.x[a],h+=i.y[a];for(l/=u.length,h/=u.length,g=0;g<u.length;++g)a=u[g],c=Math.max(c,s.geometry.distance(l,h,i.x[a],i.y[a])+i.size[a]);for(g=d+1;g<e.length;++g){var f=e[g];if(f){for(var p=0,y=0,v=0,m=0;m<f.length;++m)a=f[m],p+=i.x[a],y+=i.y[a];for(p/=f.length,y/=f.length,m=0;m<f.length;++m)a=f[m],v=Math.max(v,s.geometry.distance(p,y,i.x[a],i.y[a])+i.size[a]);var _=s.geometry.distance(l,h,p,y)*r,b=c+v,x=b*r+2*t;if(_<=x&&x-t<=o)return e[d]=u.concat(f),e[g]=null,void n(e,t,i,r,o)}}}}}function i(e){if(e._settings.nodeClustering){for(var t=e._graph.nodeAttributes,i=e._graph.nodes.list,r=e._graph.nodes.size,o=t.halo,a=e._settings.nodeSize,u=e._settings.nodeColor,l=e._settings.nodeStrokeColor,h=e._settings.nodeStrokeWidth,c=e._camera.zoom,g=e._renderer,f=e._drawing.MIN_DEPTH,p=[],y=0;y<r;++y){var v=i[y];o[v]&&p.push([v])}for(n(p,a,t,c,e._settings.nodeClusteringMaxRadius/c),y=0;y<e._clusterCircles.length;++y)g.delete(e._clusterCircles[y]);for(e._clusterCircles=[],y=0;y<p.length;++y){var m=p[y];if(m&&1!==m.length){for(var _=0,b=0,x=0,w=0;w<m.length;++w)v=m[w],_+=t.x[v],b+=t.y[v];for(_/=m.length,b/=m.length,w=0;w<m.length;++w)v=m[w],x=Math.max(x,s.geometry.distance(_,b,t.x[v],t.y[v])+t.size[v]);var A=g.circle(-1,d.setXY(_,b),0,x*c+a,u,"nodeHalos",f);if(e._clusterCircles.push(A),l){var E=g.circle(-1,d.setXY(_,b),0,x*c+a+h,l,"nodeHaloStrokes",f);e._clusterCircles.push(E)}}}}}function r(e,t){for(var n=e._graph.nodeAttributes,r=e._renderer,o=e._settings.nodeColor,s=e._settings.nodeSize,a=e._settings.nodeStrokeColor,u=e._settings.nodeStrokeWidth,l=e._drawing.MIN_DEPTH,h=n.halo,c=n.halo,g=n.haloComponent,f=n.haloStrokeComponent,p=n.size,y=n.x,v=n.y,m=n.depth,_=0,b=t.length;_<b;++_){var x=t[_].__index,w=l;c[x]&&-1!==m[x]||(w=-1),h[x]?(g[x]=r.circle(g[x],d.setXY(y[x],v[x]),p[x],s,o,"nodeHalos",w),f[x]=a?r.circle(f[x],d,p[x],s+u,a,"nodeHaloStrokes",w):r.delete(f[x])):(g[x]=r.delete(g[x]),f[x]=r.delete(f[x]))}i(e)}function o(t,n){for(var i=t._graph.edgeAttributes,r=t._graph.nodeAttributes,o=t._renderer,a=t._settings.edgeColor,d=2*t._settings.edgeSize,u=t._drawing.MIN_DEPTH,l=s.shapes.edges.line,h=i.halo,c=i.haloComponent,g=i.visible,f=i.source,p=i.target,y=i.curvature,v=i.curvature,m=r.x,_=r.y,b=r.size,x=i.size,w=i.shape,A=i.shapeParameters,E=t._shapeSettings.defaultEdgeShape,C=s.shapes.edges,S=0,I=n.length;S<I;++S){var O=n[S].__index,z=f[O],T=p[O],N=y[O],L=v[O],P=m[z],k=_[z],F=b[z],M=m[T],D=_[T],R=b[T],B=x[O],j=C[w[O]||E],U=A[O];if(h[O]){var X,W=L>=0?u:-1;g[O]||(W=-1),X=z===T?(j.haloLoop||l.haloLoop)(o,c[O],P,k,B,d,N,F,a,"edgeHalos",W,e,U):0!==N?(j.haloCurved||l.haloCurved)(o,c[O],P,k,M,D,B,d,N,F,R,a,"edgeHalos",W,e,U):(j.haloStraight||l.haloStraight)(o,c[O],P,k,M,D,B,d,F,R,a,"edgeHalos",W,e,U),c[O]=X}else c[O]=o.delete(c[O])}}var s=$global.Ogma,a={nodeColor:{default:"white",type:"color"},nodeSize:{default:50,type:"positive"},nodeStrokeColor:{default:e,type:"color",values:[e]},nodeStrokeWidth:{default:1,type:"positive"},nodeClustering:{default:!1,type:"boolean"},nodeClusteringMaxRadius:{default:1e3,type:"positive"},edgeColor:{default:"white",type:"color"},edgeSize:{default:10,type:"positive"}};t.dependencies=["graph","camera","render","drawing","shapes"],t.settings=a;var d=new s.utils.Position;s.modules.halos=t}.call(),function(e){function t(e){var t=this,n=this;this._events=e.events.create("graph.",["addNodes","addEdges","startInit","endInit","nodeDataChange","edgeDataChange"],["clear","removeNodes","removeEdges"]),this._maps=$dual(l.utils.Map),this._elts=$dual(l.utils.StaticList),this._properties=$dual(Object),this._getters=$dual(Object),this._subClasses=$dual(Object),this._NodeClass=i(),this._EdgeClass=r(),Object.defineProperty(this._NodeClass.prototype,"isNode",{value:!0,enumerable:!0}),Object.defineProperty(this._EdgeClass.prototype,"isNode",{value:!1,enumerable:!0}),this._NodeClass.prototype.toJSON=function(){return n.cloneElement(this)},this._EdgeClass.prototype.toJSON=function(){return n.cloneElement(this)},this._nodeList=[],this._edgeList=[],l.utils.setReadOnly(this,{nodes:function(){return t._nodeList},edges:function(){return t._edgeList}}),this.nodeAttributes=this._elts.nodes.attributes,this.edgeAttributes=this._elts.edges.attributes,this._insertionCounter=0,this._elts.nodes.addAttributes({ref:Array,id:Array,insertionOrder:Int32Array,edges:Array}),this._elts.edges.addAttributes({ref:Array,id:Array,source:Int32Array,target:Int32Array,insertionOrder:Int32Array,sourceId:Array,targetId:Array});var o=this._elts.nodes.attributes,s=this._elts.edges.attributes;this.nodeAttributes=o,this.edgeAttributes=s,this.addNodeReadOnlyProperty("id",function(e){return o.id[e.__index]}),this.addEdgeReadOnlyProperty("id",function(e){return s.id[e.__index]}),this.addNodeReadOnlyProperty("edges",function(e){return o.edges[e.__index]},!1),this.addEdgeReadOnlyProperty("source",function(e){return s.sourceId[e.__index]}),this.addEdgeReadOnlyProperty("target",function(e){return s.targetId[e.__index]})}function n(t,n,i,r){if(i.isNode!==n)throw new TypeError(i.id+" is not a "+(n?"node":"edge"));for(var o=i.__index,s=t._elts.fetch(n).attributes,a=t._properties.fetch(n),d=Object.keys(a),u=0;u<d.length;++u){var h=d[u];if(l.utils.hasProperty(r,h)){var c=a[h],g=c.type,f=c.defaultValue,p=l.utils.strToObjectRef(r,h);l.utils.typeCheck.property(h,p,g),p===e&&(p=f),s[h][o]=p}}}function i(){return function(e,t){Object.defineProperty(this,"__index",{value:e}),Object.defineProperty(this,"__self",{value:t||this})}}function r(){return function(e,t,n,i){Object.defineProperty(this,"__index",{value:e}),Object.defineProperty(this,"__sourceIndex",{value:t.__index}),Object.defineProperty(this,"__targetIndex",{value:n.__index}),Object.defineProperty(this,"__source",{value:t}),Object.defineProperty(this,"__target",{value:n}),Object.defineProperty(this,"__self",{value:i||this})}}function o(e){return e?i():r()}function s(){}function a(e,t,n){var i,r=e[t?"_NodeClass":"_EdgeClass"];if(void 0===n)i=e[t?"nodes":"edges"].slice();else if(n instanceof Array){i=new Array(n.length);for(var o=0;o<n.length;++o){var s=n[o];i[o]=s instanceof r?s:e.getElement(t,s,!0)}}else i=[e.getElement(t,n,!0)];return i}function d(e){var t=void 0===e?"undefined":_typeof(e);return"string"===t||"number"===t}function u(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}var l=$global.Ogma;t.dependencies=["events"],t.onStart=function(e,t){"object"===_typeof(t.graph)&&null!==t.graph&&e.init(t.graph.nodes||[],t.graph.edges||[])},t.onClear=function(e){e.clear()},t.prototype.init=function(e,t){if(this._elts.nodes.size)throw new Error("graph is not empty");this._events.startInit(),this.initializing=!0,this.addNodes(e),this.addEdges(t),this.initializing=!1,this._events.endInit()},t.prototype.clear=function(){this._events.clear(),this._elts.nodes.clear(),this._elts.edges.clear(),this._nodeList=[],this._edgeList=[],this._maps.nodes.clear(),this._maps.edges.clear()},t.prototype.updateElement=function(e,t,i){n(this,e,t,i)},t.prototype.updateNode=function(e,t){n(this,!0,e,t)},t.prototype.updateEdge=function(e,t){n(this,!1,e,t)},t.prototype.addElements=function(e,t){return e?this.addNodes(t):this.addEdges(t)},t.prototype.addElement=function(e,t){return e?this.addNode(t):this.addEdge(t)},t.prototype.addNodes=function(t){this._elts.nodes.reserve(this._elts.nodes.size+t.length);for(var n=this._elts.nodes.attributes.id,i=this._elts.nodes.attributes.ref,r=this._elts.nodes.attributes.insertionOrder,o=this._elts.nodes.attributes.edges,s=this._maps.nodes,a=this._nodeList,h=this._elts.nodes,c=t.length,g=new Array(c),f=this._NodeClass,p=this._subClasses.nodes,y=Object.keys(p),v=this._properties.nodes,m=Object.keys(v),_=m.map(function(e){return v[e]}),b=this._elts.nodes.attributes,x=0;x<c;++x){var w=t[x];if(!u(w))throw new TypeError('invalid node "'+w+'": expected object');if(!d(w.id))throw new TypeError('invalid node id "'+w.id+"\": a node's id must be a number or a string");if(s.has(w.id))throw new Error('invalid node id "'+w.id+'": duplicate id');for(var A=h.addElement(),E=new f(A),C=w.id,S=0;S<y.length;++S){var I=y[S],O=p[I];Object.defineProperty(E,I,{value:new O(A,E)})}for(E.data=w.data,S=0;S<m.length;++S){var z=m[S],T=_[S],N=T.type,L=T.defaultValue,P=l.utils.strToObjectRef(w,z);l.utils.typeCheck.property(z,P,N),P===e&&(P=L),b[z][A]=P}i[A]=E,n[A]=C,r[A]=++this._insertionCounter,o[A]=[],a.push(E),s.set(C,E),g[x]=E}return g.length&&this._events.addNodes(g,t),g},t.prototype.addEdges=function(t){this._elts.edges.reserve(this._elts.edges.size+t.length);for(var n=this._elts.edges.attributes.id,i=this._elts.edges.attributes.ref,r=this._elts.edges.attributes.insertionOrder,o=this._elts.edges.attributes.source,s=this._elts.edges.attributes.target,a=this._elts.edges.attributes.sourceId,h=this._elts.edges.attributes.targetId,c=this._elts.nodes.attributes.edges,g=this._elts.nodes.attributes.id,f=this._maps.edges,p=this._maps.nodes,y=this._edgeList,v=this._elts.edges,m=t.length,_=new Array(m),b=this._EdgeClass,x=this._subClasses.edges,w=Object.keys(x),A=this._properties.edges,E=Object.keys(A),C=E.map(function(e){return A[e]}),S=this._elts.edges.attributes,I=0;I<m;++I){var O=t[I];if(!u(O))throw new TypeError("invalid edge "+O+": expected object");if(!d(O.id))throw new TypeError("invalid edge id "+O.id+": a edge's id must be a number or a string");if(f.has(O.id))throw new Error("invalid node id "+O.id+": duplicate id");var z=p.get(O.source),T=p.get(O.target);if(!z)throw new Error("invalid source id "+O.source+": no node has this id");if(!T)throw new Error("invalid target id "+O.target+": no node has this id");for(var N=v.addElement(),L=z.__index,P=T.__index,k=new b(N,z,T),F=O.id,M=0;M<w.length;++M){var D=w[I],R=x[D];Object.defineProperty(k,D,{value:new R(N,z,T,k)})}for(k.data=O.data,M=0;M<E.length;++M){var B=E[M],j=C[M],U=j.type,X=j.defaultValue,W=l.utils.strToObjectRef(O,B);l.utils.typeCheck.property(B,W,U),W===e&&(W=X),S[B][N]=W}o[N]=L,s[N]=P,a[N]=g[L],h[N]=g[P],i[N]=k,n[N]=F,r[N]=++this._insertionCounter,c[L].push(k),L!==P&&c[P].push(k),y.push(k),f.set(F,k),_[I]=k}return _.length&&this._events.addEdges(_,t),_},t.prototype.removeNodes=function(e){if(e.length){for(var t=e.length,n=this._maps.nodes,i=this._elts.nodes,r=this._elts.edges.attributes.id,o=[],s=this._elts.nodes.attributes.edges,a=[],d=0;d<t;++d){var u=e[d],l=n.get(u);if(l){for(var h=l.__index,c=s[h],g=0;g<c.length;++g)a.push(r[c[g].__index]);o.push(l),s[h]=[]}}for(this.removeEdges(a),d=0;d<e.length;++d)n.delete(e[d]);for(this._nodeList=n.values(),o.length&&this._events.removeNodes(o),d=0;d<o.length;++d)i.removeElement(o[d].__index)}},t.prototype.removeEdges=function(e){if(e.length){for(var t=this._maps.edges,n=this._elts.edges,i=this._elts.nodes.attributes.edges,r=[],o=e.length,s=0;s<o;++s){var a=e[s],d=t.get(a);if(d){var u=d.__sourceIndex,l=d.__targetIndex,h=i[u],c=i[l],g=h.indexOf(d),f=c.indexOf(d);-1!==g&&h.splice(g,1),-1!==f&&u!==l&&c.splice(f,1),t.delete(a),r.push(d)}}for(this._edgeList=t.values(),r.length&&this._events.removeEdges(r),s=0;s<r.length;++s)n.removeElement(r[s].__index)}},t.prototype.addNode=function(e){return this.addNodes([e])[0]},t.prototype.addEdge=function(e){return this.addEdges([e])[0]},t.prototype.removeElements=function(e,t){return this[e?"removeNodes":"removeEdges"](t)},t.prototype.removeNode=function(e){return this.removeNodes([e])},t.prototype.removeEdge=function(e){this.removeEdges([e])},t.prototype.removeElement=function(e,t){return e?this.removeNode(t):this.removeEdge(t)},t.prototype.addNodeReadOnlyProperty=function(e,t,n){return this.addReadOnlyProperty(!0,e,t,n)},t.prototype.addEdgeReadOnlyProperty=function(e,t,n){return this.addReadOnlyProperty(!1,e,t,n)},t.prototype.addReadOnlyProperty=function(e,t,n,i){var r=this._getters.fetch(e),s=this._properties.fetch(e),a=this[e?"_NodeClass":"_EdgeClass"],d=t.split(".");if(r[t]||s[t])throw new Error((e?"node":"edge")+" property "+t+" already exists");r[t]={func:n,serializable:$or(i,!0)};var u=function(){return n(this.__self)};if(d.length>1){var l=d[0],h=this._subClasses.fetch(e)[l];h||(h=o(e),this._subClasses.fetch(e)[l]=h),Object.defineProperty(h.prototype,d[1],{get:u})}else Object.defineProperty(a.prototype,t,{get:u})},t.prototype.addNodeProperty=function(e,t,n,i){this.addProperty(!0,e,t,n,i)},t.prototype.addEdgeProperty=function(e,t,n,i){this.addProperty(!1,e,t,n,i)},t.prototype.addProperty=function(t,n,i,r,a){function d(t){l.utils.typeCheck.property(n,t,i),t===e&&(t=r);var o=y[n],s=o[this.__index];o[this.__index]=t,a(this.__self,t,s!==t)}function u(){return y[n][this.__index]}var h=this._getters.fetch(t),c=this._properties.fetch(t),g=this[t?"_NodeClass":"_EdgeClass"],f=n.split("."),p=this._elts.fetch(t),y=p.attributes;if(h[n]||c[n])throw new Error((t?"node":"edge")+" property "+n+" already exists");if(p.addAttribute(n,Array),a=a||s,i=l.utils.deepCopy(i),i.required=!1,c[n]={type:i,defaultValue:r},f.length>1){var v=f[0],m=this._subClasses.fetch(t)[v];m||(m=o(t),this._subClasses.fetch(t)[v]=m),Object.defineProperty(m.prototype,f[1],{get:u,set:d,enumerable:!0})}else Object.defineProperty(g.prototype,n,{get:u,set:d,enumerable:!0})},t.prototype.addCommonProperty=function(e,t,n,i){this.addProperty(!0,e,t,n,i),this.addProperty(!1,e,t,n,i)},t.prototype.createNodeSet=function(){return this.createElementSet(!0)},t.prototype.createEdgeSet=function(){return this.createElementSet(!1)},t.prototype.createElementSet=function(e){return new l.utils.ElementSet(this._elts.fetch(e).attributes)},t.prototype.createDualSet=function(){return new l.utils.BiSet(this._elts.nodes.attributes,this._elts.edges.attributes)},t.prototype.addAttribute=function(e,t){this._elts.fetch(e).addAttribute(t,Array)},t.prototype.addNodeAttributes=function(e){this._elts.nodes.addAttributes(e)},t.prototype.addEdgeAttributes=function(e){this._elts.edges.addAttributes(e)},t.prototype.addCommonAttributes=function(e){this._elts.nodes.addAttributes(e),this._elts.edges.addAttributes(e)},t.prototype.attributes=function(e){return this._elts.fetch(e).attributes},t.prototype.unusedNodeId=function(){return this.unusedId(!0)},t.prototype.unusedEdgeId=function(){return this.unusedId(!1)},t.prototype.unusedId=function(e){do{var t=Math.random().toString().substr(2)}while(this._maps.fetch(e).has(t));return t},t.prototype.notifyNodeDataChange=function(e){this.notifyDataChange(!0,e)},t.prototype.notifyEdgeDataChange=function(e){this.notifyDataChange(!1,e)},t.prototype.notifyDataChange=function(e,t){var n=a(this,e,t);this._events[e?"nodeDataChange":"edgeDataChange"](n)},t.prototype.getNode=function(e,t){return this.getElement(!0,e,t)},t.prototype.getEdge=function(e,t){return this.getElement(!1,e,t)},t.prototype.getElement=function(e,t,n){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("invalid "+(e?"node":"edge")+" id "+t+": expected string or number");var i=this._maps.fetch(e).get(t);if(!i&&n)throw new Error((e?"node":"edge")+" "+t+" does not exist");return i},t.prototype.cloneNode=function(e){return this.cloneElement(e)},t.prototype.cloneEdge=function(e){return this.cloneElement(e)},t.prototype.cloneElement=function(t){var n={},i=this._properties.fetch(t.isNode),r=this._getters.fetch(t.isNode),o=Object.keys(i).sort(),s=Object.keys(r).sort();for(a=0;a<s.length;++a)d=s[a],r[d].serializable&&(u=l.utils.strToObjectRef(t,d))!==e&&l.utils.setPathValue(n,d,u);for(var a=0;a<o.length;++a){var d=o[a],u=l.utils.strToObjectRef(t,d);u!==e&&l.utils.setPathValue(n,d,u)}return n.isNode=t.isNode,n.data=t.data,n},t.prototype.getNodeIdList=function(){return this._maps.nodes.keyList()},t.prototype.getEdgeIdList=function(){return this._maps.edges.keyList()},t.prototype.getNodeList=function(e){return this.getElementList(!0,e)},t.prototype.getEdgeList=function(e){return this.getElementList(!1,e)},t.prototype.getElementList=function(e,t){return a(this,e,t)},t.prototype.forEachNode=function(e){this._nodeList.forEach(e)},t.prototype.forEachEdge=function(e){this._edgeList.forEach(e)},Object.defineProperty(l.prototype,"nodes",{get:function(){return this.graph.nodes}}),Object.defineProperty(l.prototype,"edges",{get:function(){return this.graph.edges}}),l.modules.graph=t}.call(),function(){function e(e,t){var r=this;this._libs=e.libraries,this._settings=e.settings.get("touch",!0),this._dom=e.render.getCanvas(),this._events=e.events.create("touch.",["down","up","tap","doubleTap","move","startGesture","gesture","endGesture"]),this._enabled=!0,this._dom=null,this._binds=[],this._x=0,this._y=0,this._pressed=!1,i.utils.setReadOnly(this,{x:function(){return r._x},y:function(){return r._y},pressed:function(){return r._pressed}}),$or(t.touch,!0)&&this._dom&&n(this)}function t(e){e._binds.forEach(function(e){return i.utils.unbind(e)}),e._binds=[]}function n(e){var t=null,n=0,r=0,o=0,s=0,a=!1,d=0,u=!1,l=e._events,h=!1,c=1,g=0,f=function(){e._x=n,e._y=r,e._pressed=a},p=function(e,t,i,o){c=e,g=t,n=i,r=o,f()},y=function(t){var o=e._dom.getBoundingClientRect(),s=t.touches[0].clientX-o.left,a=t.touches[0].clientY-o.top,d=t.touches[1].clientX-o.left,u=t.touches[1].clientY-o.top,l=(s+d)/2,h=(a+u)/2,f=l-n,y=h-r,v=(Math.sqrt(f*f+y*y),i.geometry.distance(s,a,d,u)),m=v/c,_=i.geometry.lineAngle(s,a,d,u),b=_-g,x={dx:f,dy:y,rotation:b,scale:m};return p(v,_,l,h),x},v=function(e){return 2!==e.touches.length&&h?(h=!1,l.endGesture()):2!==e.touches.length||h||(h=!0,y(e),l.startGesture()),2===e.touches.length},m=function(e){if(2===e.touches.length&&h){var t=y(e);l.gesture(t,n,r)}},_=function(t,n){e._binds.push(i.utils.bind(e._dom,t,function(t){e._settings.enabled&&e._enabled&&n(t)},e._settings.eventRate))},b=function(t){if(o=n,s=r,1!==t.touches.length)a=!1,t.touches.length>1&&l.up(n,r);else{var i=e._dom.getBoundingClientRect();n=t.touches[0].clientX-i.left,r=t.touches[0].clientY-i.top,a=!0}return f(),1===t.touches.length},x=function(){t=null,d=0};_("touchstart",function(i){v(i),b(i)&&(l.down(n,r),d+=1,t=setTimeout(x,e._events.doubleTapTimer),u=!0)});var w=function(e){v(e),b(e),0===e.touches.length&&(1===d?l.tap(n,r):d>1&&(l.doubleTap(n,r),x()),l.up(n,r))};_("touchend",w),_("touchcancel",w),_("touchmove",function(e){return m(e),u?void(u=!1):(x(),void(b(e)&&l.move(n,r,n-o,r-s)))});var A=function(e){return e.preventDefault()};_("touchstart",A),_("touchend",A),_("touchcancel",A)}var i=$global.Ogma,r={enabled:{default:!0,type:"boolean"},doubleTapTimer:{default:500,type:"positive"},eventRate:{default:15,type:"positive"}};e.settings=r,e.dependencies=["render"],e.onKill=function(e){t(e)},i.modules.touch=e}(),function(e){function t(e){var t=this;this._graph=e.graph,this._shapes=e.shapes,this._drawing=e.drawing,this._texts=e.texts,this._mouse=e.mouse,this._renderer=e.render,this._settings=e.settings.get("hover",!0),this._drawing.addLayer("hover",{level:$C("layer","hover"),disableThreshold:!0},n(this)),this._timeout=null,this._hovered=null,e.events.bind({"captor.hoverNode captor.hoverEdge":function(e){(e.isNode&&t._settings.nodes||!e.isNode&&t._settings.edges)&&r(t,e)},"captor.unhoverNode captor.unhoverEdge":function(e){o(t,e)}})}function n(e){return{nodeFontStyle:e._settings.nodeTextFontStyle,nodeFontColor:e._settings.nodeTextFontColor,nodeTextBackgroundColor:e._settings.nodeTextBackgroundColor,edgeFontStyle:e._settings.edgeTextFontStyle,edgeFontColor:e._settings.edgeTextFontColor,edgeTextBackgroundColor:e._settings.edgeTextBackgroundColor,nodeOuterStrokeColor:e._settings.nodeOuterStrokeColor,edgeOuterStrokeColor:e._settings.edgeColor,outline:e._settings.outline}}function i(e){e._timeout&&(clearTimeout(e._timeout),e._timeout=null)}function r(e,t){if(i(e),!e._drawing.isAnimating()){var n=e._settings.delay,r=function i(){e._drawing.isAnimating()?e._timeout=setTimeout(i,n):(s(e,t),e._hovered=t,e._timeout=null)};e._timeout=setTimeout(r,n)}}function o(e,t){i(e),e._hovered===t&&(a(e,t),e._hovered=null)}function s(e,t){var n=t.isNode;e._drawing.putElementOnLayer(t,"hover"),e._renderer.setCursorStyle(e._settings[n?"nodeCursorStyle":"edgeCursorStyle"]),n||(e._drawing.putNodeOnLayer($source(t),"hover"),e._drawing.putNodeOnLayer($target(t),"hover"))}function a(e,t){var n=t.isNode;e._drawing.removeElementFromLayer(t,"hover"),e._renderer.removeCursorStyle(e._settings[n?"nodeCursorStyle":"edgeCursorStyle"]),n||(e._drawing.removeNodeFromLayer($source(t),"hover"),e._drawing.removeNodeFromLayer($target(t),"hover"))}var d=$global.Ogma,u={nodeOuterStrokeColor:{default:"red",type:"color",values:["inherit",null]},edgeColor:{default:"red",type:"color",values:["inherit",null]},highlightEdgeExtremities:{default:!0,type:"boolean"},nodeCursorStyle:{default:"pointer",type:"string"},edgeCursorStyle:{default:"pointer",type:"string"},nodeTextBackgroundColor:{default:"rgb(220, 220, 220)",type:"color",values:[e,null]},nodeTextFontStyle:{default:e,values:[e,"none","italic","bold"]},nodeTextFontColor:{default:e,type:"color",values:[e]},edgeTextBackgroundColor:{default:"rgb(220, 220, 220)",type:"color",values:[e,null]},edgeTextFontStyle:{default:e,values:[e,"none","italic","bold"]},edgeTextFontColor:{default:e,type:"color",values:[e]},outline:{default:!0,type:"boolean"},nodes:{default:!0,type:"boolean"},edges:{default:!0,type:"boolean"},delay:{default:100,type:"positive"}};t.dependencies=["graph","shapes","drawing","texts","mouse","render","exclusives"],t.settings=u,d.modules.hover=t}.call(),function(e){function t(e){this._graph=e.graph,this._drawing=e.drawing,this._renderer=e.render,this._settings=e.settings.get("icons"),this._drawing.addNodeSubLayer("nodeIcons",{symbolicSizeThreshold:this._settings.threshold,level:$C("subLayer","nodeIcons"),useClipSpace:!0}),this._drawing.addNodeVisualProperty("icon.font",{type:"string"}),this._drawing.addNodeVisualProperty("icon.content",{type:"string"}),this._drawing.addNodeVisualProperty("icon.scale",{type:"number"}),this._drawing.addNodeVisualProperty("icon.color",{type:"string"}),this._drawing.addNodeVisualComponent("iconComponent");var t=this;e.events.bind({"drawing.nodes":function(e){return n(t,e)},"settings.icons":function(){t._drawing.changeSubLayerThreshold("nodeIcons",t._settings.threshold),t._drawing.redrawEverything()}})}function n(e,t){for(var n=e._graph.nodeAttributes,r=e._renderer,o=new i.utils.Position,s=n["icon.font"],a=n["icon.scale"],d=n["icon.content"],u=n["icon.color"],l=0;l<t.length;++l){var h=t[l].__index,c=s[h]||e._settings.defaultFont,g=a[h]||e._settings.defaultScale,f=d[h],p=u[h]||e._settings.defaultColor;o.x=n.x[h],o.y=n.y[h],n.iconComponent[h]=f?r.text(n.iconComponent[h],o,f,c,n.size[h]*g,0,p,"none","center","middle","nodeIcons",n.depth[h],n.size[h]):r.delete(n.iconComponent[h])}}var i=$global.Ogma;t.dependencies=["graph","drawing","render","images"],t.settings={defaultFont:{default:"Arial",type:"string"},defaultColor:{default:"black",type:"color"},defaultScale:{default:1.4,type:"positive"},threshold:{default:10,type:"positive"}},i.modules.icons=t}.call(),function(e){function t(e){this._render=e.render,this._registered=[],this._associatedFunctions=[],this._toUpdate=[],this._batch=!1;var t=this;e.events.bind({"render.beforeNewFrame":function(){var e=t._toUpdate;t._toUpdate=[];for(var n=0;n<e.length;++n)t._registered[e[n]]()}})}function n(e,t){-1===e.indexOf(t)&&e.push(t)}var i=$global.Ogma;t.dependencies=["render"],t.prototype.create=function(e){var t=this._registered.indexOf(e),i=this;return-1===t&&(t=this._registered.length,this._registered.push(e),this._associatedFunctions.push(function(){i._render.refresh(),n(i._toUpdate,t)})),this._associatedFunctions[t]},i.modules.batch=t}.call(),function(e){function t(e){var t=this;this._ogma=e,this._graph=e.graph,this._renderer=e.render,this._camera=e.camera,this._drawing=e.drawing,this._partitions=e.partitions,this._render=e.render,this._batch=e.batch,this._settings=e.settings.get("texts",!0),this._shapesSettings=e.settings.get("shapes",!0),this._screen=this._renderer.screen,this._graph.addCommonAttributes({textBoundingBox:Array}),this._drawing.addNodeSubLayer("nodeTextBackground",$C("subLayer","nodeTextBackground")),this._drawing.addNodeSubLayer("nodeText",$C("subLayer","nodeText")),this._drawing.addEdgeSubLayer("edgeTextBackground",$C("subLayer","edgeTextBackground")),this._drawing.addEdgeSubLayer("edgeText",$C("subLayer","edgeText")),this._drawing.addCommonVisualComponent("textComponent","top-layer",this._settings.preventOverlap),this._drawing.addCommonVisualComponent("textBackgroundComponent","top-layer",this._settings.preventOverlap),this._drawing.addNodeVisualComponent("textIndicatorComponent","top-layer",this._settings.preventOverlap),this._drawing.addCommonVisualProperty("text",{type:"string"}),this._nodeTextDrawingEnabled=!0,this._edgeTextDrawingEnabled=!0,this._nodePartitionList=null,this._edgePartitionList=null,this._cellSize=null,this._nodeGrid=null,this._edgeGrid=null,this._timeout=null;var a=function(){i(t),r(t,!0),r(t,!1),t._timeout=null};this._updateGrid=function(){t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(a,200)},o(t),e.events.bind({"settings.texts":function(){return o(t)},"graph.addNodes":function(e){return s(t,!0,e)},"graph.addEdges":function(e){return s(t,!1,e)},"drawing.nodes":function(e){u(t,e,!0)},"drawing.edges":function(e){u(t,e,!1)},"render.resize":function(){n(t),t._updateGrid()},"camera.move":function(e){e&&t._updateGrid()}}),n(this)}function n(e){e._cellSize=Math.min(e._settings.nodeFontSize,e._settings.edgeFontSize)-1,e._cellSize<1&&(e._cellSize=1),e._gridW=Math.ceil(e._screen.width/e._cellSize),e._gridH=Math.ceil(e._screen.height/e._cellSize),e._gridLength=e._gridW*e._gridH,e._nodeGrid=new Int32Array(e._gridLength),e._edgeGrid=new Int32Array(e._gridLength),i(e)}function i(e){e._settings.preventOverlap&&(e._nodeGrid.fill(-1),e._edgeGrid.fill(-1))}function r(e,t){var n=e._drawing.topOfLayer,i=e._graph._elts.fetch(t),r=i.attributes,o=r.exists,s=i.totalSize,a=e._cellSize,d=e._gridW-1,u=e._gridH-1,l=e._gridH,h=e._camera.zoom,c=e._camera.x-e._render.screen.width/2/h,g=e._camera.y-e._render.screen.height/2/h,p=(e._settings[t?"nodeBackgroundMargin":"edgeBackgroundMargin"],e._camera.angle),y=Math.cos(e._camera.angle),m=Math.sin(e._camera.angle),_=e._settings[t?"nodeSizeThreshold":"edgeFontSizeThreshold"]||0,b="fixed"===e._settings[t?"nodeFontSizeFunction":"edgeFontSizeFunction"],x=r.symbolicSize,w=(e._graph.nodeAttributes.symbolicSize,r.textBoundingBox),A=r.visibleOnScreen,E=r.size,C=e[t?"_nodeGrid":"_edgeGrid"],S=e._nodeGrid,I=e._render,O=r.textComponent,z=r.textBackgroundComponent,T=r.textIndicatorComponent,N=r.depth,L=e._settings.preventOverlap?e._settings.overlapNbBuckets:1;if(e._settings.preventOverlap&&e[t?"_nodeTextDrawingEnabled":"_edgeTextDrawingEnabled"]&&e._settings[t?"nodes":"edges"]){var P=[];for(G=0;G<s;++G){Q=G;var k=x[Q];o[Q]&&w[Q]&&A[Q]&&(-1===k||k*h>=_)&&P.push(Q)}var F=P.length;if(0!==F){var M=new Array(2*L);for(G=0;G<M.length;++G)M[G]=[];var D=1/0,R=-1/0;for(G=0;G<F;++G){Q=P[G];var B=E[Q];B<D&&(D=B),B>R&&(R=B)}var j=R-D;for(G=0;G<F;++G){Q=P[G],B=E[Q];var U=x[Q],X=(j-(B-D))/j*L-1e-5|0;-1!==U&&(X+=L),M[X].push(Q)}for(var W=0;W<M.length;++W)for(var V=M[W],Y=V.length,G=0;G<Y;++G){var q,H,J,Z,Q=V[G],K=w[Q],$=!0;if(t){var ee=K[0],te=K[1],ne=K[2],ie=(ee.x-c)*h,re=(ee.y-g)*h,oe=y*ie+m*re+ee.zx*h+ee.ox,se=-m*ie+y*re+ee.zy*h+ee.oy;b||(te*=h,ne*=h),q=Math.max(oe/a|0,0),H=Math.min((oe+te)/a|0,d),J=Math.max(se/a|0,0),Z=Math.min((se+ne)/a|0,u);for(var ae=q;ae<=H;++ae)for(var de=J;de<=Z;++de){var ue=C[ae*l+de];if(-1!==ue){$=!1,ae=H+1;break}}}else{ee=K[0];var le=K[1],he=le.textWidth,ce=le.textHeight,ge=0,fe=0,pe=le.size*h;if(b||(he*=h,ce*=h),-1===le.length||le.length*h>he){ge=p-le.angle;var ye=-1;ge<-v?(ge+=f)<-v&&(ge+=f):ge>v?(ge-=f)>v&&(ge-=f):ye=1,-1!==le.length&&(ye=-1),fe=ye*((ce+pe)/2+le.strokeSize)}ie=(ee.x-c)*h,re=(ee.y-g)*h;var ve=y*ie+m*re,me=-m*ie+y*re,_e=Math.cos(ge),be=Math.sin(ge),xe=-he/2,we=-ce/2+fe,Ae=he/2,Ee=ce/2+fe,Ce=ve+_e*xe+be*we,Se=me-be*xe+_e*we,Ie=ve+_e*Ae+be*Ee,Oe=me-be*Ae+_e*Ee;if(Ce>Ie){var ze=Ce;Ce=Ie,Ie=ze}for(Se>Oe&&(ze=Se,Se=Oe,Oe=ze),q=Math.max(Ce/a|0,0),H=Math.min(Ie/a|0,d),J=Math.max(Se/a|0,0),Z=Math.min(Oe/a|0,u),ae=q;ae<=H;++ae)for(de=J;de<=Z;++de){var Te=S[ae*l+de],Ne=C[ae*l+de];if(-1!==Te&&-1!==x[Q]||-1!==Ne){$=!1,ae=H+1;break}}}if(!(q>H||J>Z))if($){for(ae=q;ae<=H;++ae)for(de=J;de<=Z;++de)C[ae*l+de]=Q;I.setDepth(O[Q],n(t,N[Q])),I.setDepth(z[Q],n(t,N[Q])),t&&I.setDepth(T[Q],n(t,N[Q]))}else I.hide(O[Q]),I.hide(z[Q]),t&&I.hide(T[Q])}}}}function o(e){e._settings=e._ogma.settings.get("texts"),e._drawing.editLayer("floor",{nodeFontStyle:e._settings.nodeFontStyle,edgeFontStyle:e._settings.edgeFontStyle,nodeFontColor:e._settings.nodeFontColor,edgeFontColor:e._settings.edgeFontColor,nodeTextBackgroundColor:e._settings.nodeBackgroundColor,edgeTextBackgroundColor:e._settings.edgeBackgroundColor}),e._drawing.changeSubLayerThreshold("nodeTextBackground",e._settings.nodeSizeThreshold),e._drawing.changeSubLayerThreshold("nodeText",e._settings.nodeSizeThreshold),e._drawing.changeSubLayerThreshold("edgeTextBackground",e._settings.edgeSizeThreshold),e._drawing.changeSubLayerThreshold("edgeText",e._settings.edgeSizeThreshold),e._drawing.redrawEverything()}function s(t,n,i){for(var r=t._graph.attributes(n),o=r.textBoundingBox,s=i.length,a=0;a<s;++a)o[i[a].__index]=e;t._updateGrid()}function a(e,t,n){var i=e._graph.nodeAttributes,r=e._graph._elts.nodes,o=i.exists,s=r.totalSize,a=e._camera.zoom,d=e._camera.x-e._render.screen.width/2/a,u=e._camera.y-e._render.screen.height/2/a,l=e._settings.nodeBackgroundMargin,h=Math.cos(e._camera.angle),c=Math.sin(e._camera.angle),g=e._settings.nodeSizeThreshold,f="fixed"===e._settings.nodeFontSizeFunction,p=i.symbolicSize,y=i.textBoundingBox,v=i.hidden,m=-1;if(!e._nodeTextDrawingEnabled||!e._settings.nodes)return null;if(e._settings.preventOverlap){var _=t/e._cellSize|0,b=n/e._cellSize|0,x=e._nodeGrid[_*e._gridH+b];if(-1===x)return null;m=x}for(var w=0;w<s;++w){var A=w;if(!(m>-1&&A!==m)&&o[A]){var E=y[A],C=p[A];if(!(!E||v[A]||-1!==C&&C*a<g)){var S=E[0],I=E[1],O=E[2],z=(S.x-d)*a,T=(S.y-u)*a,N=h*z+c*T+S.zx*a+S.ox,L=-c*z+h*T+S.zy*a+S.oy;if(f||(I*=a,O*=a),t>=N-l&&t<=N+I+l&&n>=L-l&&n<=L+O+l)return i.ref[A]}}}return null}function d(e,t,n){var i=e._graph.edgeAttributes,r=i.exists,o=e._graph._elts.edges,s=e._graph.nodeAttributes,a=o.totalSize,d=e._camera.zoom,u=e._camera.x-e._render.screen.width/2/d,l=e._camera.y-e._render.screen.height/2/d,h=e._settings.edgeBackgroundMargin,c=e._camera.angle,g=Math.cos(e._camera.angle),p=Math.sin(e._camera.angle),y=e._settings.edgeSizeThreshold,m="fixed"===e._settings.edgeFontSizeFunction,_=i.symbolicSize,b=i.textBoundingBox,x=i.hidden,w=s.hidden,A=i.source,E=i.target,C=-1;if(!e._edgeTextDrawingEnabled||!e._settings.edges)return null;if(e._settings.preventOverlap){var S=t/e._cellSize|0,I=n/e._cellSize|0,O=e._edgeGrid[S*e._gridH+I];if(-1===O)return null;C=O}for(var z=0;z<a;++z){var T=z;if(!(C>-1&&T!==C)&&r[T]){var N=A[T],L=E[T],P=b[T],k=_[T];if(!(!P||x[T]||w[N]||w[L]||-1!==k&&k*d<y)){var F=P[0],M=P[1],D=M.textWidth,R=M.textHeight;m||(D*=d,R*=d);var B=0,j=0,U=M.size*d;if(-1===M.length||M.length*d>=D){j=c-M.angle;var X=-1;j<-v?(j+=f)<-v&&(j+=f):j>v?(j-=f)>v&&(j-=f):X=1,-1!==M.length&&(X=-1),B=X*((R+U)/2+M.strokeSize)}var W=(F.x-u)*d,V=(F.y-l)*d,Y=g*W+p*V+F.zx*d+F.ox,G=-p*W+g*V+F.zy*d+F.oy,q=Math.cos(-j),H=Math.sin(-j),J=t-Y,Z=n-G,Q=q*J+H*Z+Y,K=-H*J+q*Z+G-B;if(Q>=Y-D/2-h&&Q<=Y+D/2+h&&K>=G-R/2-h&&K<=G+R/2+h)return i[T]}}}return null}function u(t,n,i){if(0!==n.length&&(!i||t._settings.nodes)&&(i||t._settings.edges)&&t._settings.enabled){t._updateGrid();for(var r=(g.utils.pixelRatio(),t._settings),o=t._settings.preventOverlap,s=r.nodeTextAlignment,a=r[i?"nodeBackgroundMargin":"edgeBackgroundMargin"],d=r[i?"nodeMaxTextLength":"edgeMaxTextLength"],u=r[i?"nodeMaxTextLineLength":"edgeMaxTextLineLength"],h=t._shapesSettings.edgeStrokeWidth,c=r[i?"nodeFontSize":"edgeFontSize"],y=r.fontFamily,v="fixed"===r[i?"nodeFontSizeFunction":"edgeFontSizeFunction"],O=r[i?"nodeFontSizeRatio":"edgeFontSizeRatio"],z=t._graph.nodeAttributes,T=t._graph.edgeAttributes,N=i?z:T,L=i?a+r.nodeTextOffset+t._shapesSettings.nodeInnerStrokeWidth:a+r.edgeTextOffset+t._shapesSettings.edgeStrokeWidth,P=i?"nodeText":"edgeText",k=i?"nodeTextBackground":"edgeTextBackground",F=i?"left":"center",M=i?"top":"middle",D=i?"nodeFontColor":"edgeFontColor",R=i?"nodeFontStyle":"edgeFontStyle",B=i?"nodeTextBackgroundColor":"edgeTextBackgroundColor",j=r.backgroundArrowBase,U=t._drawing,X=t._renderer,W=N.text,V=N.textBackgroundComponent,Y=N.textComponent,G=N.textIndicatorComponent,q=N.textBoundingBox,H=z.x,J=z.y,Z=z.size,Q=(T.size,0);Q<n.length;++Q){var K=n[Q],$=K.__index,ee=W[$],te=N.depth[$];if(ee){d!==e&&ee.length>d&&(ee=ee.substr(0,d)+"");var ne,ie=N.size[$],re=N.symbolicSize[$],oe=v?c:O*ie,se=new g.utils.Position,ae=U.getElementProperty(K,B),de=U.getElementProperty(K,D),ue=U.getElementProperty(K,R),le=l(ee,u),he=le?le.length:1,ce=he*oe,ge=null;if(o&&re>0&&(te=e),"inherit"===ae&&(ae=N.color[$]),"inherit"===de&&(de=N.color[$]),1===he)ne=X.textWidth(ee,y,oe,ue);else{ne=X.textWidth(le[0],y,oe,ue);for(var fe=0;fe<le.length;++fe){var pe=X.textWidth(le[fe],y,oe,ue);pe>ne&&(ne=pe)}}if(i){var ye=s;"center"===ye&&(N["icon.content"][$]||N["image.url"][$])&&(ye="bottom"),se.x=z.x[$],se.y=z.y[$],se.zx=m[ye]*ie,se.zy=_[ye]*ie,se.ox=m[ye]*(L+1),se.oy=_[ye]*(L+1),v?(se.ox+=b[ye]*ne,se.oy+=x[ye]*ce):(se.zx+=b[ye]*ne,se.zy+=x[ye]*ce),q[$]=[se,ne,ce]}else{var ve,me=T.source[$],_e=T.target[$],be=T.curvature[$],xe=H[me],we=J[me],Ae=H[_e],Ee=J[_e],Ce=Z[me],Se=Z[_e];me===_e?(ve=f/4,g.shapes.utils.getLoopControlPoints(xe,we,be,Ce,E),g.geometry.getPointOnBezierCurve(.5,xe,we,Ae,Ee,E.x1,E.y1,E.x2,E.y2,se)):0===be?(ve=g.geometry.lineAngle(xe,we,Ae,Ee),se.x=(xe+Ae+Math.cos(ve)*Ce+Math.cos(ve+f)*Se)/2,se.y=(we+Ee+Math.sin(ve)*Ce+Math.sin(ve+f)*Se)/2):(ve=g.geometry.lineAngle(xe,we,Ae,Ee),g.shapes.utils.getCurveControlPoint(xe,we,Ae,Ee,be,E),g.geometry.getPointOnQuadraticCurve(.5,xe,we,Ae,Ee,E.x,E.y,se),se.x+=(Math.cos(ve)*Ce+Math.cos(ve+f)*Se)/2,se.y+=(Math.sin(ve)*Ce+Math.sin(ve+f)*Se)/2),se.oy=-L;ge={angle:ve,length:me===_e?-1e5:g.geometry.distance(xe,we,Ae,Ee)-Ce-Se,size:ie,strokeSize:h,textWidth:ne,textHeight:ce,ratio:v?-1:O},q[$]=[se,ge]}if(ae){if(A.reset(),v?A.setOXY(ne/2+a,ce/2+a):(A.setZXY(ne/2,ce/2),A.setOXY(a,a)),i)if(j&&"center"!==ye){var Ie=m[ye],Oe=_[ye];se.ox+=Ie*j*p,se.oy+=Oe*j*p,C.setXY(z.x[$],z.y[$]).setZXY(Ie*ie,Oe*ie).setOXY(Ie*L,Oe*L),S.set(C),I.set(C);var ze=v?a+oe/2:a+j/2;S.addOXY(Ie*j*p+Oe*ze,Oe*j*p+Ie*ze),I.addOXY(Ie*j*p-Oe*ze,Oe*j*p-Ie*ze),G[$]=X.triangle(G[$],C,S,I,ae,k,te,re)}else G[$]=X.delete(G[$]);w.set(se),i&&(v?(w.ox+=ne/2,w.oy+=ce/2):(w.zx+=ne/2,w.zy+=ce/2)),V[$]=X.rectangle(V[$],w,A,ae,k,te,re,ge)}else V[$]=X.delete(V[$]),i&&(G[$]=X.delete(G[$]));var Te,Ne;if(v?(Te=oe,Ne=0):(Te=0,Ne=oe),le&&1!==le.length){var Le=X.updateComposite(Y[$],le.length);for(i||(v?se.oy-=ce/2-Te/2:se.zy-=ce/2-Ne/2),fe=0;fe<le.length;++fe)Le[fe]=X.text(Le[fe],se,le[fe],y,Ne,Te,de,ue,F,M,P,te,re,ge),se.oy+=Te,se.zy+=Ne;se.oy-=Te*le.length,se.zy-=Ne*le.length,Y[$]=X.composite(Y[$],Le)}else Y[$]=X.text(Y[$],se,ee,y,Ne,Te,de,ue,F,M,P,te,re,ge)}else V[$]=X.delete(V[$]),Y[$]=X.delete(Y[$]),i&&(G[$]=X.delete(G[$])),q[$]=e}}}function l(e,t){for(var n=e.split("\n"),i=[],r=0;r<n.length;++r){var o=n[r];if(t<=1||o.length<t)i.push(o);else for(var s=h(n[r],t),a=0;a<s.length;++a)i.push(s[a])}return i}function h(e,t){for(var n=e.split(" "),i=[],r=0,o=-1,s=[],a=!0,d=0;d<n.length;++d)if(a){if(n[d].length>t){for(var u=c(n[d],t),l=0;l<u.length;++l)i.push([u[l]]),++o;r=u[u.length-1].length}else i.push([n[d]]),++o,r=n[d].length+1;a=!1}else r+n[d].length<=t?(i[o].push(n[d]),r+=n[d].length+1):(a=!0,--d);for(d=0;d<i.length;++d)s.push(i[d].join(" "));return s}function c(e,t){for(var n=[],i=0;i<e.length;i+=t-1)n.push(e.substr(i,t-1)+"-");var r=n[n.length-1].length;return n[n.length-1]=n[n.length-1].substr(0,r-1)+" ",n}var g=$global.Ogma,f=Math.PI,p=2/3,y={nodes:{default:!0,type:"boolean"},nodeFontColor:{default:"black",type:"color",values:["inherit"]},nodeFontStyle:{default:"none",values:["none","italic","bold"]},nodeFontSizeFunction:{default:"fixed",values:["fixed","ratio"]},nodeFontSize:{default:12,type:"positive"},nodeFontSizeRatio:{default:.2,type:"positive"},nodeBackgroundColor:{default:"rgba(255,255,255,0.66)",type:"color",values:[null,"inherit"]},nodeTextAlignment:{default:"bottom",values:["right","left","top","bottom","center"]},nodeSizeThreshold:{default:12,type:"positive"},nodeMaxTextLength:{default:e,type:"positive",values:[e]},nodeBackgroundMargin:{default:1,type:"positive"},nodeTextOffset:{default:0,type:"positive"},nodeMaxTextLineLength:{default:15,type:"positive"},backgroundArrowBase:{default:10,type:"positive",values:[e]},edges:{default:!0,type:"boolean"},edgeFontColor:{default:"black",type:"color",values:["inherit"]},edgeFontStyle:{default:"none",values:["none","italic","bold"]},edgeFontSizeFunction:{default:"fixed",values:["fixed","ratio"]},edgeFontSize:{default:12,type:"positive"},edgeFontSizeRatio:{default:1,type:"positive"},edgeBackgroundColor:{default:"rgba(255,255,255,0.33)",type:"color",values:[null,"inherit"]},edgeSizeThreshold:{default:6,type:"positive"},edgeMaxTextLength:{default:e,type:"positive",values:[e]},edgeTextOffset:{default:4,type:"positive"},edgeBackgroundMargin:{default:2,type:"positive"},edgeMaxTextLineLength:{default:0,type:"positive"},fontFamily:{default:"Arial",type:"string"},preventOverlap:{default:!0,type:"boolean"},overlapNbBuckets:{default:7,type:"positive"},enabled:{default:!0,type:"boolean"}};t.dependencies=["graph","render","camera","drawing","shapes","pieCharts","partitions","batch","visibility"],t.settings=y,t.prototype.updateGrid=function(){this._updateGrid()},t.prototype.setNodeTextDrawing=function(e){this._renderer.setSubLayerEnabled("nodeText",e),this._renderer.setSubLayerEnabled("nodeTextBackground",e),this._nodeTextDrawingEnabled=e},t.prototype.setEdgeTextDrawing=function(e){this._renderer.setSubLayerEnabled("edgeText",e),this._renderer.setSubLayerEnabled("edgeTextBackground",e),this._edgeTextDrawingEnabled=e},t.prototype.setTextDrawing=function(e){this.setNodeTextDrawing(e),this.setEdgeTextDrawing(e)},t.prototype.isNodeTextDrawingEnabled=function(){return this._nodeTextDrawingEnabled},t.prototype.isEdgeTextDrawingEnabled=function(){return this._edgeTextDrawingEnabled},t.prototype.detectNodeText=function(e,t){return a(this,e,t)},t.prototype.detectEdgeText=function(e,t){return d(this,e,t)};var v=Math.PI/2,m={left:-1,right:1,top:0,bottom:0,center:0},_={left:0,right:0,top:-1,bottom:1,center:0},b={left:-1,right:0,top:-.5,bottom:-.5,center:-.5},x={left:-.5,right:-.5,top:-1,bottom:0,center:-.5},w=new g.utils.Position,A=new g.utils.Position,E={},C=new g.utils.Position,S=new g.utils.Position,I=new g.utils.Position;g.modules.texts=t}.call(),function(e){function t(e){this._selection=e.selection,this._keyboard=e.keyboard,this._mouse=e.mouse,this._graph=e.graph,this._camera=e.camera,this._renderer=e.render,this._settings=e.settings.get("lasso"),this._ready=!1,this._active=!1,this._points=[],this._lines=[],this._index=0,this._addToSelection=!1;var t=this;e.exclusives.create({priority:$C("interaction","lasso"),evt:["captor.down","captor.move","captor.up"],check:function(){return t._ready},onStart:function(e,i){return n(t,e,i,!1)},onProgress:function(e,i){return n(t,e,i,!0)},onStop:function(){var e=t._keyboard.isPressed(t._settings.addKey),n=!e&&t._keyboard.isPressed(t._settings.removeKey);e||n?t._selection.clear("edges"):t._selection.clear();for(var r=t._graph.nodes,o=t._graph.nodeAttributes.x,s=t._graph.nodeAttributes.y,a=[],d=0,u=r.length;d<u;++d){var l=r[d],h=l.__index,c=t._camera.getPositionOnScreen(o[h],s[h]);i.geometry.isPointInPolygon(c.x,c.y,t._points)&&a.push(l)}for(n?t._selection.dropNodes(a):t._selection.addNodes(a),d=0;d<t._lines.length;++d)t._renderer.delete(t._lines[d]);t._lines=[],t._points=[]}})}function n(e,t,n,i){var r={x:t,y:n};if(i){var o=e._points[e._points.length-1];e._lines.push(e._renderer.line(-1,r,o,e._settings.strokeWidth,0,e._settings.strokeColor))}e._points.push(r)}var i=$global.Ogma,r={strokeColor:{default:"black",type:"color"},strokeWidth:{default:1,type:"positive"},cursorStyle:{default:"cell",type:"string"},addKey:{default:"ctrl",type:"string",values:[null]},removeKey:{default:"alt",type:"string",values:[null]}};t.settings=r,t.dependencies=["selection","captor","graph","camera","render","exclusives"],t.prototype.start=function(){this._ready&&this.stop(),this._ready=!0,this._renderer.setCursorStyle(this._settings.cursorStyle)},t.prototype.stop=function(){this._ready&&(this._ready=!1,this._renderer.removeCursorStyle(this._settings.cursorStyle))},t.prototype.isActive=function(){return this._ready},i.modules.lasso=t}.call(),function(e){function t(e){var t=this;this._render=e.render,this._settings=e.settings.get("mouse",!0),this._events=e.events.create("mouse.",["down","up","move","wheel","click","doubleClick","leave"]),this._domElt=this._render.getCanvas(),this._focus=!1,this._wheelEnabled=!0,this._enabled=!0,this._preventRightClick=null,this._binds=[],this._x=0,this._y=0,this._left=!1,this._middle=!1,this._right=!1,r.utils.setReadOnly(this,{x:function(){return t._x},y:function(){return t._y},left:function(){return t._left},middle:function(){return t._middle},right:function(){return t._right}}),this._domElt&&i(this)}function n(e){document.removeEventListener("contextmenu",e._preventRightClick),e._preventRightClick=null,e._binds.forEach(function(e){return r.utils.unbind(e)}),e._binds=[]}function i(e){function t(t){e._settings.wheelEnabled&&e._wheelEnabled&&(!e._settings.disableWheelUntilMouseDown||e._focus)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,y(t))}var n=e._events,i={left:0,middle:0,right:0},o=null,a=0,d=0,u=0,l=0,h={left:!1,middle:!1,right:!1},c=null;e._preventRightClick=function(t){e._focus&&t.preventDefault()},document.addEventListener("contextmenu",e._preventRightClick,!1);var g=function(e){o=null,e?i[e]=0:(i.left=0,i.middle=0,i.right=0)},f=function(t){u=a,l=d;var n=e._domElt.getBoundingClientRect();a=t.clientX-n.left,d=t.clientY-n.top,c=s[t.button],e._x=a,e._y=d,e._left=h.left,e._right=h.right,e._middle=h.middle},p=function(t,n,i){e._binds.push(r.utils.bind(e._domElt,t,function(t){e._settings.enabled&&e._enabled&&n(t)},$or(i,e._settings.eventRate)))},y=r.utils.throttle(function(e){var t=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));n.wheel(t)},e._settings.wheelDebounceTime);p("mousewheel",t,0),p("DOMMouseScroll",t,0),p("mousemove",function(e){f(e),n.move(a,d,a-u,d-l)}),p("mouseleave",function(){h.left&&(n.up("left"),h.left=!1),h.middle&&(n.up("middle"),h.middle=!1),h.right&&(n.up("right"),h.right=!1),g("left"),g("right"),g("middle"),e._focus=!1,n.leave()}),p("mousedown",function(t){f(t),e._focus=!0,h[c]=!0,i[c]+=1,setTimeout(g,e._settings.doubleClickTimer,c),n.down(a,d,c)}),p("mouseup",function(e){f(e),h[c]=!1,1===i[c]?n.click(a,d,c):i[c]>1&&(n.doubleClick(a,d,c),g(c)),n.up(a,d,c)})}var r=$global.Ogma,o={enabled:{default:!0,type:"boolean"},wheelEnabled:{default:!0,type:"boolean"},eventRate:{default:15,type:"positive"},wheelDebounceTime:{default:60,type:"positive"},doubleClickTimer:{default:500,type:"positive"},disableWheelUntilMouseDown:{default:!1,type:"boolean"}};t.settings=o,t.dependencies=["render"];var s={0:"left",1:"middle",2:"right"};t.onKill=function(e){e._domElt&&n(e)},r.modules.mouse=t}.call(),function(e){function t(e){this._ogma=e}function n(t,n,i,r){var o=t(n,i,r);return o===e&&(o=n),o}function i(e){if(!e||0===e.length)return"";for(var t=["var Ogma = {};"],n=0,i=e.length;n<i;n++){for(var r=e[n],o=r.split("."),s="",d=a,u=o.length-1,l=1;l<u;l++)s+="."+o[l],d=d[o[l]],t.push("Ogma"+s+" = Ogma"+s+" || {};\n");if("function"!=typeof(d=d[o[u]]))throw new Error('Asynchronous task: dependency "'+r+'" is not found');s+="."+o[u],t.push("Ogma"+s+" = "+d.toString()+";")}return t.join("\n")}function r(e,t,n){this._ogma=t,this._mainContext=n,this.configure(e)}function o(e,t,n){var o=this;r.call(this,e,t,n);var s=[i(e.dependencies),"","var __CONTEXT = ("+this._createContext.toString()+")(),","    __UPDATE_FUNC = "+this._update.toString()+",","    __IS_RUNNING_FUNC = "+this._isRunning.toString()+";","",'self.addEventListener("message", function (evt) {',"  var result = __UPDATE_FUNC(evt.data, __CONTEXT),","      isRunning = __IS_RUNNING_FUNC(__CONTEXT, evt.data);","  self.postMessage({ result: result, isRunning: isRunning });","});"].join("\n");this._worker=a.utils.createWorker(s),this._sync=function(e){o.sync(e)},this._worker.addEventListener("message",this._sync)}function s(e,t,n){r.call(this,e,t,n),this._stopped=!1,this._context=this._createContext()}var a=$global.Ogma,d=function(){return{}},u=function(e){return e},l=function(){return e},h=function(){return!1},c=function(){},g=function(){},f=function(){};t.prototype.run=function(e,t,i){var r={},a=this._ogma,d=$or(i,!0),l=e.configure||u,h=n(l,t,a,r),c=new(d?o:s)(e,a,r);return c.onStart(),c.send(h)},r.prototype=Object.create(a.utils.EventTarget.prototype),r.prototype.configure=function(e){this._onStart=e.onStart||g,this._onEnd=e.onEnd||f,this._update=e.update||l,this._onUpdate=e.onUpdate||c,this._createContext=e.context||d,this._isRunning=e.isRunning||h},r.prototype.onStart=function(){return this.fire("start",{target:this}),this._onStart.call(this),this},o.prototype=Object.create(r.prototype),o.prototype.sync=function(e){var t=e.data.isRunning,n=e.data.result,i=this._onUpdate.call(this,n,this._mainContext,this._ogma,t);this.fire("update",{target:this,isRunning:t}),t?this.send(i):this.stop(n)},o.prototype.stop=function(e){return this._onEnd.call(this,e,this._mainContext,this._ogma),this._worker.terminate(),this.fire("stop",{target:this})},o.prototype.send=function(e){return this._worker.postMessage(e),this},s.prototype=Object.create(r.prototype),s.prototype.sync=function(e){var t=this._update(e,this._context),n=this._isRunning(this._context,e);e=this._onUpdate.call(this,t,this._mainContext,this._ogma,n),this.fire("update",{target:this,isRunning:n}),n?this.send(e):this.stop(t)},s.prototype.send=function(e){var t=this;return this._stopped||setTimeout(function(){return t.sync(e)},0),this},s.prototype.stop=function(e){return this._onEnd(e,this._mainContext,this._ogma),this._stopped=!0,this},t.AsynchronousTask=o,t.SynchronousTask=s,a.modules.tasks=t}.call(),function(e){function t(){this._events={}}function n(e,t,n,i){var r={};i=i||[];for(var o=0;o<n.length;++o){var s=t+n[o];r[n[o]]=e.create(s,!1)}for(o=0;o<i.length;++o)s=t+i[o],r[i[o]]=e.create(s,!0);return r}var i=$global.Ogma;t.onKill=function(t){$iter(t._events,function(e){e.binds.splice(0,e.binds.length)}),t._events=e},t.prototype.bind=function(e,t){var n=this,r=void 0===e?"undefined":_typeof(e);if(("object"!==r||null===r)&&"string"!==r)throw new TypeError("first argument must be a string or object");if("object"===(void 0===e?"undefined":_typeof(e))){var o=this;i.utils.forEach(e,function(e,t){o.bind(t,e)})}else{if("function"!=typeof t)throw new TypeError("second argument must be a function");if(-1!==e.indexOf(" ")){e.split(" ").filter(function(e){return!!e}).forEach(function(e){return n.bind(e,t)})}else{if(!this._events[e])throw new Error('event "'+e+'" does not exist');var s=this._events[e];s.reverse?s.binds.unshift(t):s.binds.push(t)}}},t.prototype.unbind=function(e,t){if(this._events){if(!this._events[e])throw new Error('event "'+e+'" does not exist');var n=this._events[e].binds.indexOf(t);return-1!==n&&(this._events[e].binds.splice(n,1),!0)}},t.prototype.create=function(e,t){if(t instanceof Array)return n(this,arguments[0],arguments[1],arguments[2]);if("string"!=typeof e)throw new TypeError(e+" is not a string");if(this._events[e])throw new Error("event "+e+" already exists");var i=[],r=!!t;return this._events[e]={binds:i,reverse:r},function(e,t,n,r,o,s){for(var a=0,d=i.length;a<d;++a)i[a](e,t,n,r,o,s)}},t.prototype.once=function(e,t){this.triggerAfter(e,t,1)},t.prototype.triggerAfter=function(e,t,n){var i=0,r=this,o=function o(s,a,d){++i===n&&(t(s,a,d),r.unbind(e,o))};this.bind(e,o)},i.modules.events=t,i.prototype.on=function(e,t){return this.events.bind(e,t)},i.prototype.off=function(e,t){return this.events.unbind(e,t)}}.call(),function(e){function t(t){this._graph=t.graph,this._partitions=t.partitions,this._graph.addCommonAttributes({"filter.hidden":Int8Array}),this._nodeFilter=null,this._edgeFilter=null,t.dsl.registerOperator("filter.apply",function(t){return t===e?e:!t})}function n(t,n,i,r){"function"==typeof i?o(t,n,function(t){var n=i(t);return n===e?e:!n},r):o(t,n,[i,"filter.apply"],r)}function i(e,t,n,i){o(e,t,n,i)}function r(e,t){var n=t?"_nodeFilter":"_edgeFilter";e[n]&&(e[n].kill(),e[n]=null)}function o(e,t,n,i){r(e,t);var o=e._graph.attributes(t);e[t?"_nodeFilter":"_edgeFilter"]=e._partitions[t?"nodes":"edges"](n,{onAdd:function(e){o["filter.hidden"][e.__index]=e.hidden},onRemove:function(e){e.hidden=!!o["filter.hidden"][e.__index]},onPartitionChange:function(e,t){"undefined"!==t&&(e.hidden="true"===t)}},$or(i,!0))}var s=$global.Ogma;t.dependencies=["graph","partitions","events"],t.onClear=function(e){e.reset()},t.prototype.showNodes=function(e,t){n(this,!0,e,t)},t.prototype.hideNodes=function(e,t){i(this,!0,e,t)},t.prototype.showEdges=function(e,t){n(this,!1,e,t)},t.prototype.hideEdges=function(e,t){i(this,!1,e,t)},t.prototype.removeNodeFilter=function(){r(this,!0)},t.prototype.removeEdgeFilter=function(){r(this,!1)},t.prototype.reset=function(){r(this,!0),r(this,!1)},s.modules.filter=t}.call(),function(e){function t(e){this._ogma=e,this._graph=e.graph,this._drawing=e.drawing,this._renderer=e.render,this._settings=e.settings.get("images"),this._nodeAttributes=this._graph.nodeAttributes,this._enabled=!0,this._drawing.addNodeSubLayer("nodeImages",{level:$C("subLayer","nodeImages"),useClipSpace:!0}),this._drawing.addNodeVisualProperty("image.url",{type:"string"}),this._drawing.addNodeVisualProperty("image.scale",{type:"number"}),this._drawing.addNodeVisualProperty("image.rescale",{values:[!0,!1]}),this._drawing.addNodeVisualProperty("image.duplicate",{values:[!0,!1]}),this._drawing.addNodeVisualComponent("imageComponent"),n(this);var t=this;e.events.bind({"drawing.nodes":function(e){return i(t,e)},"settings.images":function(){return n(t)}})}function n(e){e._settings=e._ogma.settings.get("images"),e._drawing.changeSubLayerThreshold("nodeImages",e._settings.threshold),e._drawing.redrawEverything()}function i(t,n){for(var i=t._nodeAttributes,r=t._renderer,a=i["image.url"],d=i["image.scale"],u=i["image.rescale"],l=i["image.duplicate"],h=0;h<n.length;++h){var c=n[h].__index,g=a[c];if(t._enabled&&g){var f=d[c]||t._settings.defaultScale,p=u[c],y=l[c],v=i.size[c]*f;p===e&&(p=t._settings.defaultRescale),y===e&&(y=t._settings.defaultDuplicate),o.x=i.x[c],o.y=i.y[c],s.zx=v,s.zy=v,i.imageComponent[c]=r.image(i.imageComponent[c],o,s,g,p,y,"nodeImages",i.depth[c],i.size[c])}else i.imageComponent[c]=r.delete(i.imageComponent[c])}}var r=$global.Ogma;t.dependencies=["graph","drawing","render","settings","shapes"],t.settings={defaultScale:{default:1,type:"positive"},defaultRescale:{default:!0,type:"boolean"},defaultDuplicate:{default:!1,type:"boolean"},threshold:{default:10,type:"positive"}},t.prototype.setImagesEnabled=function(e){this._enabled=e};var o=new r.utils.Position,s=new r.utils.Position;r.modules.images=t}.call(),function(e){function t(e){this._drawing=e.drawing,this._graph=e.graph,this._renderer=e.render,this._settings=e.settings.get("badges",!0),this._shapeSettings=e.settings.get("shapes",!0),this._drawing.addNodeSubLayer("nodeBadge",{level:$C("subLayer","nodeBadge"),defineClipSpace:!0}),this._drawing.addNodeSubLayer("nodeBadgeStroke",{level:$C("subLayer","nodeBadgeStroke")}),this._drawing.addNodeSubLayer("nodeBadgeImage",{level:$C("subLayer","nodeBadgeImage"),useClipSpace:!0}),this._drawing.addNodeSubLayer("nodeBadgeText",{level:$C("subLayer","nodeBadgeText")}),n(this),this._drawing.addNodeVisualProperty("badges",{properties:{bottomRight:s,bottomLeft:s,topRight:s,topLeft:s}}),this._drawing.addNodeVisualComponent("badgeComponent");var t=this;e.events.bind({"drawing.nodes":function(e){return i(t,e)},"settings.badges":function(){n(t),t._drawing.redrawEverything()}})}function n(e){e._drawing.changeSubLayerThreshold("nodeBadge",e._settings.threshold),e._drawing.changeSubLayerThreshold("nodeBadgeStroke",e._settings.hideStrokeOnHiddenContent?e._settings.textThreshold:e._settings.threshold),e._drawing.changeSubLayerThreshold("nodeBadgeImage",e._settings.threshold),e._drawing.changeSubLayerThreshold("nodeBadgeText",e._settings.threshold)}function i(e,t){if(e._settings.drawBadges)for(var n=e._graph.nodeAttributes,i=n.badgeComponent,r=n.badges,o=e._renderer,s=n.size,u=n.x,l=n.y,h=n.depth,c=n.color,g=n.colors,f=e._shapeSettings.defaultNodeColor,p=e._settings.scale,y=e._settings.positionScale,v=e._settings.defaultColor,m=e._settings.defaultFont,_=e._settings.strokeWidth,b=e._settings.defaultStrokeColor,x=e._settings.fontScale,w=e._settings.defaultTextColor,A=e._settings.fontStyle,E=e._settings.hideStrokeOnHiddenContent,C=0;C<t.length;++C){var S=t[C].__index,I=r[S],O=i[S];if(I){for(var z=s[S],T=z*p,N=T*x,L=z*y,P=h[S],k=u[S],F=l[S],M=g[S],D=M&&M[0]||c[S]||f,R=Object.keys(I),B=o.updateComposite(O,R.length),j=0;j<R.length;++j){var U=o.updateComposite(B[j],4),X=R[j],W=I[X],V=W.content,Y=W.image,G=W.font||m,q=W.color||v,H=W.strokeColor||b,J=W.textColor||w;"inherit"===q&&(q=D),"inherit"===H&&(H=D),"inherit"===J&&(J=D),"number"==typeof V&&(V=V.toString()),"topLeft"===X?a.setXY(k-L,F-L):"topRight"===X?a.setXY(k+L,F-L):"bottomLeft"===X?a.setXY(k-L,F+L):"bottomRight"===X&&a.setXY(k+L,F+L),q&&(U[0]=o.circle(U[0],a,T,0,q,"nodeBadge",P,z),H&&(U[1]=o.circle(U[1],a,T,_,H,"nodeBadgeStroke",P,E?T:z))),Y?(d.zx=T,d.zy=T,U[2]=o.image(U[2],a,d,Y,!0,!1,"nodeBadgeImage",P,z)):U[2]=o.delete(U[2]),U[3]=V?o.text(U[3],a,V,G,N,0,J,A,"center","middle","nodeBadgeText",P,T):o.delete(U[3]),B[j]=o.composite(B[j],U)}i[S]=o.composite(O,B)}else i[S]=o.delete(O)}}var r=$global.Ogma,o={scale:{default:.45,type:"positive"},positionScale:{default:.7,type:"positive"},defaultColor:{default:"white",type:"color",values:[e,"inherit"]},defaultTextColor:{default:"black",type:"color"},defaultStrokeColor:{default:"black",type:"color",values:[e,"inherit"]},strokeWidth:{default:2,type:"positive"},defaultFont:{default:"Arial",type:"string"},fontStyle:{default:"none",values:["none","italic","bold"]},fontScale:{default:1,type:"positive"},textThreshold:{default:6,type:"positive"},threshold:{default:1,type:"positive"},hideStrokeOnHiddenContent:{default:!1,type:"boolean"},drawBadges:{default:!0,type:"boolean"}},s={properties:{color:{type:"string"},strokeColor:{type:"string"},textColor:{type:"string"},content:{type:"stringOrNumber"},font:{type:"string"},image:{type:"string"}}};t.settings=o,t.dependencies=["drawing","graph","render","pieCharts","texts","images"];var a=new r.utils.Position,d=new r.utils.Position;r.modules.badges=t}.call(),function(e){function t(e){var t=this;this._graph=e.graph,this._dsl=e.dsl,this._partitions=e.partitions,this._drawing=e.drawing,this._watcher=e.watcher,this._settingsModule=e.settings,this._settings=e.settings.get("design"),this._events=e.events.create("design.",["nodeStyleChange","edgeStyleChange"]),this._nodeVisualVars=[],this._edgeVisualVars=[];for(var n=Object.keys($global.design),i=0;i<n.length;++i){var r=n[i],o=$global.design[r];o.nodeAttributes&&(this._nodeVisualVars.push(r),o.nodeAttributes.forEach(function(e){return t._graph.addAttribute(!0,e)})),o.edgeAttributes&&(this._edgeVisualVars.push(r),o.edgeAttributes.forEach(function(e){return t._graph.addAttribute(!1,e)}))}this._styles={nodes:{},edges:{}},this._styleFunctions={nodes:{byList:[],byName:{}},edges:{byList:[],byName:{}}},this._nodeReserveColors=null,this._nodeColorScheme=null,this._edgeReserveColors=null,this._edgeColorScheme=null,e.events.bind({"graph.addNodes":function(e){return u(t,!0,e)},"graph.addEdges":function(e){return u(t,!1,e)},"graph.nodeDataChange":function(e){return u(t,!0,e)},"graph.edgeDataChange":function(e){return u(t,!1,e)}})}function n(e,t,n){i(e,n,t);var r=e._styles[t?"nodes":"edges"][n];return r?g.utils.deepCopy(r):null}function i(e,t,n){if(n&&-1===e._nodeVisualVars.indexOf(t))throw new Error("invalid node visual variable "+JSON.stringify(t)+": valid values are "+JSON.stringify(e._nodeVisualVars));if(!n&&-1===e._edgeVisualVars.indexOf(t))throw new Error("invalid edge visual variable "+JSON.stringify(t)+": valid values are "+JSON.stringify(e._edgeVisualVars))}function r(t){return t===e||"string"==typeof t&&0!==g.colors.getIndex(t)}function o(e,t,n){var i=t?"_nodeReserveColors":"_edgeReserveColors";if(null!==n){if(!(n instanceof Array)||0===n.length)throw new TypeError("invalid reserve colors "+JSON.stringify(n)+": expected non-empty array of colors");for(var o=0;o<n.length;++o)if(!r(n[o]))throw new TypeError("invalid reserve color: "+JSON.stringify(n[o])+" is not a color");e[i]=g.utils.deepCopy(n)}}function s(e,t){return g.utils.deepCopy(t?e._nodeColorScheme:e._edgeColorScheme)}function a(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function d(e,t,n,r){i(e,n,t),h(e,t,n,r),l(e,t,n,!0);var o=e._graph[t?"nodes":"edges"],s=$global.design[n],a="function"==typeof r?s.styleByFunction(e,t,r):s.styleByParameters(e,t,r,d);e._styles[t?"nodes":"edges"][n]=r,s.save(e,t,o),a(o),e._styleFunctions[t?"nodes":"edges"].byName[n]=a,e._styleFunctions[t?"nodes":"edges"].byList.push(a),e._drawing.redraw(o),e._events[t?"nodeStyleChange":"edgeStyleChange"](n)}function u(e,t,n){e._styleFunctions[t?"nodes":"edges"].byList.forEach(function(e){return e(n)}),e._drawing.redraw(n)}function l(t,n,r,o){if(i(t,r,n),t._styles[n?"nodes":"edges"][r]){var s=t._graph[n?"nodes":"edges"],a=$global.design[r],d=t._styleFunctions[n?"nodes":"edges"];a.restore(t,n,s);var u=d.byName[r];d.byName[r]=e,$rm(d.byList,u),t._styles[n?"nodes":"edges"][r]=e,t._drawing.redrawEverything(),o||t._events[n?"nodeStyleChange":"edgeStyleChange"](r)}}function h(e,t,n,i){var r=$global.design[n];if("function"!=typeof i){if(!r.checkParameters)throw new TypeError(n+": invalid parameters "+JSON.stringify(i)+": must be a function");if(!a(i))throw new TypeError(n+": invalid parameters "+JSON.stringify(i)+": must be an object or a function.");c(n,i),r.checkParameters(i,e,t)}}function c(e,t){if("string"!=typeof t.variable)throw new TypeError(e+': property "variable" must be a string.')}var g=$global.Ogma;$global.design={},$global.selectFromScheme=function(t,n){if(n instanceof Array){for(var i=e,r=0;r<n.length;++r){var o=t[n[r]];if(o){i=o;break}}return i}return t[n]},t.settings={defaultSizeBins:{default:7,type:"positive"}},t.dependencies=["graph","dsl","partitions","watcher","icons","images","pieCharts","shapes","texts"],t.onClear=function(e){e.reset()},t.prototype.setStyles=function(e){if(!a(e))throw new Error("setStyles: "+JSON.stringify(e)+" is not an object.");e.nodes&&g.utils.forEach(e.nodes,function(e,t){this.setNodeStyle(t,e)},this),e.edges&&g.utils.forEach(e.edges,function(e,t){this.setEdgeStyle(t,e)},this)},t.prototype.getStyles=function(){return g.utils.deepCopy(this._styles)},t.prototype.reset=function(){for(var e=0;e<this._nodeVisualVars.length;++e)l(this,!0,this._nodeVisualVars[e]);for(e=0;e<this._edgeVisualVars.length;++e)l(this,!1,this._edgeVisualVars[e])},t.prototype.setNodeColor=function(e){d(this,!0,"color",e)},t.prototype.setEdgeColor=function(e){d(this,!1,"color",e)},t.prototype.setNodeShape=function(e){d(this,!0,"shape",e)},t.prototype.setEdgeShape=function(e){d(this,!1,"shape",e)},t.prototype.setNodeIcon=function(e){d(this,!0,"icon",e)},t.prototype.setNodeImage=function(e){d(this,!0,"image",e)},t.prototype.setNodeSize=function(e){d(this,!0,"size",e)},t.prototype.setEdgeSize=function(e){d(this,!1,"size",e)},t.prototype.setNodeText=function(e){d(this,!0,"text",e)},t.prototype.setEdgeText=function(e){d(this,!1,"text",e)},t.prototype.resetNodeColor=function(){l(this,!0,"color")},t.prototype.resetEdgeColor=function(){l(this,!1,"color")},t.prototype.resetNodeShape=function(){l(this,!0,"shape")},t.prototype.resetEdgeShape=function(){l(this,!1,"shape")},t.prototype.resetNodeIcon=function(){l(this,!0,"icon")},t.prototype.resetNodeImage=function(){l(this,!0,"image")},t.prototype.resetNodeSize=function(){l(this,!0,"size")},t.prototype.resetEdgeSize=function(){l(this,!1,"size")},t.prototype.resetNodeText=function(){l(this,!0,"text")},t.prototype.resetEdgeText=function(){l(this,!1,"text")},t.prototype.getNodeColor=function(){return n(this,!0,"color")},t.prototype.getEdgeColor=function(){return n(this,!1,"color")},t.prototype.getNodeShape=function(){return n(this,!0,"shape")},t.prototype.getEdgeShape=function(){return n(this,!1,"shape")},t.prototype.getNodeIcon=function(){return n(this,!0,"icon")},t.prototype.getNodeImage=function(){return n(this,!0,"image")},t.prototype.getNodeSize=function(){return n(this,!0,"size")},t.prototype.getEdgeSize=function(){return n(this,!1,"size")},t.prototype.getNodeText=function(){return n(this,!0,"text")},t.prototype.getEdgeText=function(){return n(this,!1,"text")},t.prototype.setNodeStyle=function(e,t){d(this,!0,e,t)},t.prototype.setEdgeStyle=function(e,t){d(this,!1,e,t)},t.prototype.getStyle=function(e,t){return n(this,e,t)},t.prototype.removeNodeStyle=function(e){l(this,!0,e)},t.prototype.removeEdgeStyle=function(e){l(this,!1,e)},t.prototype.getNodeStyle=function(e){return n(this,!0,e)},t.prototype.getEdgeStyle=function(e){return n(this,!1,e)},t.prototype.setNodeReserveColors=function(e){o(this,!0,e)},t.prototype.setEdgeReserveColors=function(e){o(this,!1,e)},t.prototype.getNodeColorMapping=function(){return s(this,!0)},t.prototype.getEdgeColorMapping=function(){return s(this,!1)},g.modules.design=t}.call(),function(e){function t(e){var t=this;this._renderer=e.render,this._animations=e.animations,this._settings=e.settings.get("camera",!0),this._events=e.events.create("camera.",["move","zoom","rotate","startMove","startRotate","startZoom","endMove","endRotate","endZoom"]),this._screen=this._renderer.screen,this._zoomAnimation=null,this._moveAnimation=null,this._zoom=1,this._x=0,this._y=0,this._angle=0,r.utils.setReadOnly(this,{width:function(){return t._screen.width},height:function(){return t._screen.height},x:function(){return t._x},y:function(){return t._y},zoom:function(){return t._zoom},angle:function(){return t._angle}});var n=this;e.events.bind({"render.setContainer":function(){n._zoom=1,n._x=0,n._y=0,n._angle=0,n._events.move()},"render.resize":function(e){e&&n.move(e.width/2,e.height/2)},"settings.camera":function(e){$has(e,"minZoom")&&n._zoom<n._settings.minZoom?(n._zoom=n._settings.minZoom,n._events.move()):$has(e,"maxZoom")&&n._zoom>n._settings.maxZoom&&(n._zoom=n._settings.maxZoom,n._events.move())}})}function n(e,t){return t=t?r.utils.deepCopy(t):{},t.easing=$or(t.easing,e._settings.defaultEasing),t.duration=$or(t.duration,0),t}function i(e,t){if(e.callback){var n=e.callback;e.callback=function(){t(),n()}}else e.callback=t}var r=$global.Ogma,o={maxZoom:{default:1e3,type:"positive"},minZoom:{default:.01,type:"positive"},defaultZoomModifier:{default:1.8,type:"positive"},defaultEasing:{default:"linear",type:"string"}};t.settings=o,t.dependencies=["render","animations"],t.onClear=function(e){e._zoom=1,e._x=0,e._y=0,e._angle=0},t.prototype.setCenter=function(e,t,i){if("number"!=typeof e)throw new Error("camera.setCenter: invalid coordinate "+e);if("number"!=typeof t)throw new Error("camera.setCenter: invalid coordinate "+t);i=n(this,i);var r=this._x,o=this._y,s=e-this._x,a=t-this._y,d=!i.noEndOfAnimation,u=function(e){this._x=r+s*e,this._y=o+a*e,this._events.move(1===e&&d)}.bind(this);return this._animations.end(this._moveAnimation),this._moveAnimation=this._animations.play(u,i),this},t.prototype.move=function(e,t,n){if("number"!=typeof e)throw new Error("camera.move: invalid argument "+JSON.stringify(e));if("number"!=typeof t)throw new Error("camera.move: invalid argument "+JSON.stringify(t));if($opt(n&&n.screenCoordinates,"bool",!0)){e/=this._zoom,t/=this._zoom;var i=Math.cos(this._angle),r=Math.sin(this._angle),o=i*e-r*t,s=r*e+i*t;e=o,t=s}return this.setCenter(this._x+e,this._y+t,n)},t.prototype.setZoom=function(t,r){var o=this;if("number"!=typeof t||t<=0||!isFinite(t))throw new Error("camera.setZoom: invalid zoom value "+JSON.stringify(t));r=n(this,r),t<this._settings.minZoom?t=this._settings.minZoom:t>this._settings.maxZoom&&(t=this._settings.maxZoom);var s=this,a=this._screen.width/2,d=this._screen.height/2,u=this._zoom,l=a/u-a/t,h=r.refX,c=r.refY,g=!r.noEndOfAnimation,f=r.duration;i(r,function(){return o._events.endZoom(u,t,f)});var p=function(e){var t=l*e;s._zoom=a/(a/u-t),s._events.zoom(1===e&&g),s._events.move(1===e&&g)};if(h!==e&&c!==e){var y=r.callback;r.callback=e,r.screenCoordinates=!1;var v=(h-a)/u-(h-a)/t,m=(c-d)/u-(c-d)/t;this.move(v,m,r),r.callback=y,r.screenCoordinates=e}return this._animations.end(this._zoomAnimation),this._events.startZoom(u,t,f),this._zoomAnimation=this._animations.play(p,r),this},t.prototype.zoomIn=function(e){return this.setZoom(this._zoom*(e&&e.zoomModifier||this._settings.defaultZoomModifier),e)},t.prototype.zoomOut=function(e){return this.setZoom(this._zoom*(1/(e&&e.zoomModifier||this._settings.defaultZoomModifier)),e)},t.prototype.setAngle=function(e,t){if("number"!=typeof e)throw new Error("camera.setAngle: invalid angle "+JSON.stringify(e));t=n(this,t);var i=this._angle,r=e-i,o=!t.noEndOfAnimation,s=function(e){this._angle=i+r*e,this._angle>Math.PI&&(this._angle-=2*Math.PI),this._angle<-Math.PI&&(this._angle+=2*Math.PI),this._events.rotate(1===e&&o),this._events.move(1===e&&o)}.bind(this);return this._animations.end(this._rotateAnimation),this._rotateAnimation=this._animations.play(s,t),this},t.prototype.rotate=function(e,t){if("number"!=typeof e)throw new Error("camera.rotate: invalid angle "+JSON.stringify(e));return this.setAngle(this._angle+e,t)},t.prototype.getAbsolutePosition=function(e,t){var n=this._x+(e-this._screen.width/2)/this._zoom,i=this._y+(t-this._screen.height/2)/this._zoom;return r.geometry.rotate(n,i,this._x,this._y,this._angle)},t.prototype.getPositionOnScreen=function(e,t){var n=this._screen.width/2,i=this._screen.height/2,o=(e-this._x)*this._zoom+n,s=(t-this._y)*this._zoom+i,a={};return 0!==this._angle?r.geometry.rotate(o,s,n,i,-1*this._angle,a):(a.x=o,a.y=s),a},t.prototype.getSizeOnScreen=function(e){return e*this._zoom},t.prototype.saveConfig=function(){return{x:this._x,y:this._y,zoom:this._zoom,angle:this._angle}},t.prototype.loadConfig=function(e){$isDef(e.x)&&(this._x=e.x),$isDef(e.y)&&(this._y=e.y),$isDef(e.zoom)&&(this._zoom=e.zoom),$isDef(e.angle)&&(this._angle=e.angle),this._events.move(!0)},r.modules.camera=t}.call(),function(e){function t(e){this._graph=e.graph,this._renderer=e.render,this._design=e.design,this._batch=e.batch,this._watcher=e.watcher,this._settingModule=e.settings,this._settings=e.settings.get("legend",!0),this._renderer.addSubLayer("legendBorders",{level:$C("subLayer","legendBorders")}),this._renderer.addSubLayer("legendBackground",{level:$C("subLayer","legendBackground")}),this._renderer.addSubLayer("legendContent",{level:$C("subLayer","legendContent")}),this._iconSettings=this._settingModule.get("icons"),this._widgets=[],this._position="bottom",this._active=!1,this._visible=!0,this._titleFunction=null;var t=this,r=function(){i(t)};e.events.bind({"design.nodeStyleChange design.edgeStyleChange":r,"graph.addNodes graph.addEdges":r,"graph.nodeDataChange graph.edgeDataChange":r,"render.resize":r,"graph.clear":r,"render.export":r,"settings.legend":r}),n(this,"nodes","color"),n(this,"nodes","size"),n(this,"nodes","shape"),n(this,"nodes","icon"),n(this,"nodes","image"),n(this,"edges","color"),n(this,"edges","shape"),n(this,"edges","size")}function n(e,t,n){e._widgets.push(new l(e,t,n))}function i(e){var t=e._renderer,n=e._design,i=e._settings,o=t.screen;if(e._widgets.forEach(function(e){return e.clear()}),e._styles=null,i.enabled){e._styles=n.getStyles();var s=e._widgets.filter(function(e){return e.reload()});("top"===e._position||"bottom"===e._position?a(o,i,s.slice(),"bottom"===e._position):r(o,i,s.slice(),"left"===e._position))&&s.forEach(function(e){return e.draw()})}}function r(e,t,n,i){var r,o=t.widgetWidth+t.outerMargin,s=Math.floor((e.width-t.outerMargin)/o),a=e.height,d=t.outerMargin,u=1;r=i?t.outerMargin:e.width-o;for(var l=0;l<n.length;++l){var h=n[l];if(d+h.height>a){if(d===t.outerMargin)return!1;d=t.outerMargin,u+=1,i?r+=o:r-=o}h.setPosition(r,d),d+=h.height}return u<=s}function o(e,t){return e.height-t.height}function s(e,t){return e.type!==t.type?"nodes"===e.type?e:t:e.height>t.height?-1:1}function a(e,t,n,i){var r=t.widgetWidth+t.outerMargin,a=Math.floor((e.width-t.outerMargin)/r),l=e.height-t.outerMargin,h=new Array(Math.min(a,n.length)),c=n.length,g=0,f=0,p=0,y=0;for(w=0;w<c;++w)O=n[w],"nodes"===O.type?(g+=1,f+=O.height):(p+=1,y+=O.height);var v=f+y,m=f/v,_=y/v,b=Math.round(m*a),x=Math.round(_*a);if(b>g?b=g:x>p&&(b=a-p),0===a)return!1;for(var w=0;w<h.length;++w)h[w]={content:[],height:0,type:w<b?"nodes":"edges"};for(w=0;w<c;++w){var A=d(n);u(n[A],h),n.splice(A,1)}h.sort(s);var E=t.outerMargin;for(w=0;w<h.length;++w){var C=h[w];if(C.height>l)return!1;C.content.sort(o);for(var S=0,I=0;I<C.content.length;++I){var O=C.content[I];O.setPosition(E,i?e.height-S-O.height:S+t.outerMargin),S+=O.height}E+=r}return!0}function d(e){for(var t=0,n=1;n<e.length;++n)e[n].height>e[t].height&&(t=n);return t}function u(e,t){for(var n=null,i=0;i<t.length;++i){var r=t[i];r.type!==e.type&&1!==t.length||!(null===n||r.height<t[n].height)||(n=i)}r=t[n],r.content.push(e),r.height+=e.height}function l(e,t,n){this.type=t,this.visualVar=n,this._settings=e._settings,this.legend=e,this.renderer=e._renderer,this.iconSettings=e._iconSettings,this.watcher=e._watcher,this.components=-1,this.disabled=!1}function h(e){return e}function c(e,t){return parseFloat(t)-parseFloat(e)}function g(e){return e.innerMargin+(e.titleFontSize+e.fontSize)*I}function f(e,t){return t?e.fontSize:e.fontSize*O}function p(e,t,n,i,r,o,s,a,d){var u=a.getPropertyBoundaries(o,s),l=u.min%2==0||u.max%2==0,h=C(u.min,l),c=C(u.max,l),g=C((u.min+u.max)/2,l);if(o){var f=.7*n.fontSize,p=3*f,y=(f+p)/2;t.push(S.utils.circleStroke(e,-1,i+n.innerMargin+p,r+2*p-f,f,n.circleStrokeWidth,n.shapeColor,"legendContent")),t.push(S.utils.circleStroke(e,-1,i+n.innerMargin+p,r+2*p-y,y,n.circleStrokeWidth,n.shapeColor,"legendContent")),t.push(S.utils.circleStroke(e,-1,i+n.innerMargin+p,r+p,p,n.circleStrokeWidth,n.shapeColor,"legendContent")),t.push(e.text(-1,{x:i+n.innerMargin+2*p+n.fontSize,y:r+2*p-f},h,n.fontFamily,n.fontSize,0,n.fontColor,"none","left","middle","legendContent")),t.push(e.text(-1,{x:i+n.innerMargin+2*p+n.fontSize,y:r+2*p-1.5*y},g,n.fontFamily,n.fontSize,0,n.fontColor,"none","left","middle","legendContent")),t.push(e.text(-1,{x:i+n.innerMargin+2*p+n.fontSize,y:r+f},c,n.fontFamily,n.fontSize,0,n.fontColor,"none","left","middle","legendContent"))}else{var v=(n.widgetWidth-2*n.innerMargin)/3,m=n.fontSize;t.push(e.line(-1,{x:i+n.innerMargin,y:r+m/2},{x:i+n.innerMargin+v,y:r+m/2},m,0,n.shapeColor,"legendContent")),t.push(e.line(-1,{x:i+n.innerMargin+v,y:r+m/2},{x:i+n.innerMargin+2*v,y:r+m/2},m/1.5,0,n.shapeColor,"legendContent")),t.push(e.line(-1,{x:i+n.innerMargin+2*v,y:r+m/2},{x:i+n.innerMargin+3*v,y:r+m/2},m/3,0,n.shapeColor,"legendContent")),t.push(e.text(-1,{x:i+n.innerMargin+.5*v,y:r+2.5*m},c,n.fontFamily,n.fontSize,0,n.fontColor,"none","center","middle","legendContent")),t.push(e.text(-1,{x:i+n.innerMargin+1.5*v,y:r+2.5*m},g,n.fontFamily,n.fontSize,0,n.fontColor,"none","center","middle","legendContent")),t.push(e.text(-1,{x:i+n.innerMargin+2.5*v,y:r+2.5*m},h,n.fontFamily,n.fontSize,0,n.fontColor,"none","center","middle","legendContent"))}}function y(e,t,n,i,r,o,s){var a=f(n,!0);t.push(e.text(-1,{x:i+n.innerMargin+a/2,y:r},o.content,o.font||s.defaultFont,0,n.fontSize*I,n.fontColor,"none","center","middle","legendContent"))}function v(e,t,n,i,r,o){var s=f(n,!0),a=n.fontSize/2*I*z;t.push(e.image(-1,{x:i+n.innerMargin+s/2,y:r},{x:a,y:a},o.url,!0,!1,"legendContent"))}function m(e,t,n,i,r,o,s){var a=S.shapes[s?"nodes":"edges"][o],d=f(n,s);s?t.push(a.draw(e,-1,i+n.innerMargin+d/2,r,n.fontSize/2*I*z,0,n.shapeColor,"legendContent")):t.push(a.drawStraight(e,-1,i+n.innerMargin,r,i+n.innerMargin+n.fontSize*O,r,n.fontSize/3,0,n.fontSize/4,n.fontSize/4,n.shapeColor,"legendContent"))}function _(e,t,n,i,r,o,s){var a=f(n,s),d={x:i+n.innerMargin+a/2,y:r};s?t.push(e.circle(-1,d,0,n.fontSize/2*I*z,o,"legendContent")):t.push(e.rectangle(-1,d,{x:n.fontSize*O/2,y:n.fontSize/2},o,"legendContent"))}function b(e,t,n,i,r,o,s,a){var d=f(n,o);a&&(s=C(s)),t.push(e.text(-1,{x:i+d+1.6*n.innerMargin,y:r},s,n.fontFamily,0,n.fontSize,n.fontColor,"none","left","middle","legendContent"))}function x(e,t,n,i,r,o){t.push(S.utils.roundedRect(e,-1,i,r,n.widgetWidth,o-n.outerMargin,n.borderRadius,n.backgroundColor,"legendBackground"));var s=0===n.borderRadius?0:n.borderRadius+n.borderWidth;t.push(S.utils.roundedRect(e,-1,i-n.borderWidth,r-n.borderWidth,n.widgetWidth+2*n.borderWidth,o-n.outerMargin+2*n.borderWidth,s,n.borderColor,"legendBorders"))}function w(e,t,n,i,r,o){var s="center"===n.titleTextAlign,a={x:i+(s?n.widgetWidth/2:n.innerMargin),y:r+n.titleFontSize/2+n.innerMargin},d=e.textWidth(o,n.fontFamily,n.titleFontSize,"none"),u=n.widgetWidth;if(d>u){var l=u/d,h=(o.length*l|0)-2;o=o.substr(0,h)+""}t.push(e.text(-1,a,o,n.fontFamily,0,n.titleFontSize,n.titleFontColor,"none",n.titleTextAlign,"middle","legendContent"))}function A(e){e.existingValues=null;var t=e._settings,n=e.type,i=e.visualVar,r=t.outerMargin+g(t),o=r,s=t.fontSize*I;if("size"===i)o+="nodes"===n?3*s:2*s;else if(e.params.scheme instanceof Array)o+=Object.keys(e.scheme).length*s;else{var a=[],d=Object.keys(e.scheme);d.forEach(function(t){E(e.legend,"nodes"===n,e.params.variable,t)&&a.push(t)}),o+=a.length*s,e.existingValues=a}return o===r?(e.height=0,!1):(e.height=o,!0)}function E(e,t,n,i){for(var r=e._graph[t?"nodes":"edges"],o=r.length,s=0;s<o;++s){var a=r[s],d=S.utils.strToObjectRef(a,n);if(d==i)return!0;if(Array.isArray(d)&&-1!==d.indexOf(i))return!0}return!1}function C(e,t){var n=["K","M","G","T","P","E","Z","Y"];if(e>9999){for(var i=0;i<n.length&&e>999;)e/=1e3,++i;return Math.ceil(e)+n[i-1]}return t?Math.round(e).toString():e<10?(Math.round(1e3*e)/1e3).toString():e<100?(Math.round(100*e)/100).toString():e<1e3?(Math.round(10*e)/10).toString():Math.round(e).toString()}var S=$global.Ogma,I=1.5,O=3,z=.8;t.settings={enabled:{default:!1,type:"boolean"},widgetWidth:{default:130,type:"positive"},fontFamily:{default:"Arial",type:"string"},fontSize:{default:10,type:"positive"},fontColor:{default:"black",type:"color"},titleFontSize:{default:12,type:"positive"},titleFontColor:{default:"black",type:"color"},titleMaxLength:{default:20,type:"positive"},titleTextAlign:{default:"left",values:["left","center"]},shapeColor:{default:"grey",type:"color"},backgroundColor:{default:"white",type:"color"},borderColor:{default:"black",type:"color"},borderRadius:{default:0,type:"positive"},borderWidth:{default:1,type:"positive"},innerMargin:{default:10,type:"positive"},outerMargin:{default:5,type:"positive"},circleStrokeWidth:{default:5,type:"positive"}},t.dependencies=["render","design","batch","settings","icons","watcher","exports"];var T=["top","right","left","bottom"];t.prototype.reload=function(){i(this)},t.prototype.setPosition=function(e){if(-1===T.indexOf(e))throw new Error("invalid position "+JSON.stringify(e)+": expected one of the following values: "+JSON.stringify(T));this._position=e,i(this)},t.prototype.setTitleFunction=function(e){this._titleFunction=e,i(this)},t.prototype.setVisible=function(e){this._visible=!!e,this._renderer.setSubLayersEnabled(["legendBackground","legendBorders","legendContent"],e)},t.prototype.isVisible=function(){return this._visible},l.prototype.reload=function(){var e=this.type,t=this.visualVar,n=this.legend;return this.params=n._design.getStyle("nodes"===e,t),!!$isObj(this.params)&&("color"===t?this.scheme=n._design["nodes"===e?"getNodeColorMapping":"getEdgeColorMapping"]():this.params&&"size"!==t&&(this.scheme=this.params.scheme),this.scheme&&(this.schemeKeys=Object.keys(this.scheme)),A(this))},l.prototype.setPosition=function(e,t){this.x=e,this.y=t},l.prototype.draw=function(){var e=[],t=this._settings,n=this.renderer,i=this.x,r=this.y,o="nodes"===this.type,s=this.visualVar,a=this.legend._titleFunction||function(e){return e.split(".").pop()},d=a(this.params.variable,o?"node":"edge");if("string"!=typeof d)throw new TypeError(d+" is not a valid widget title.");if(x(this.renderer,e,this._settings,this.x,this.y,this.height),w(this.renderer,e,this._settings,this.x,this.y,d),this.scheme){var u=Object.keys(this.scheme),l=g(t),f=this.params.scheme instanceof Array;f&&u.sort(c);for(var A=0;A<u.length;++A){var E=u[A],C=this.scheme[E];this.existingValues&&-1===this.existingValues.indexOf(E)||(b(this.renderer,e,this._settings,this.x,this.y+l,o,E,f),"icon"===this.visualVar?y(n,e,t,i,r+l,C,this.iconSettings):"color"===s?_(n,e,t,i,r+l,C,o):"shape"===s?m(n,e,t,i,r+l,C,o):"image"===s&&v(n,e,t,i,r+l,C),l+=this._settings.fontSize*I)}}else"size"===s&&p(n,e,t,i,r+g(t)-t.fontSize,o,this.params.variable,this.watcher,this.params.transformation||h);this.components=this.renderer.composite(-1,e)},l.prototype.clear=function(){this.components=this.renderer.delete(this.components)},S.modules.legend=t}.call(),function(e){function t(e){this._camera=e.camera,this._graph=e.graph,this._screen=e.render.screen,this._settings=e.settings.get("locate"),this._cameraSettings=e.settings.get("camera");var t=this;e.events.bind({"render.resize":function(e,n){!n&&t._settings.centerOnResize?t.center():n&&t._settings.centerAtInit&&t.center()},"render.setContainer":function(e){e&&t._settings.centerAtInit&&t.center()}})}function n(e,t,n,s){"number"==typeof s&&(s={duration:s}),s=s||{};var a,d,u=n?e._graph.getElementList(t,n):e._graph[t?"nodes":"edges"],l=s.padding||{},h=e._camera,c=s.callback,g=s.easing||e._settings.defaultEasing,f=s.duration||0,p=s.finalZoom;if(0===u.length)return o(c,f);var y=e[t?"nodesBoundingBox":"edgesBoundingBox"](u);if(p)a=y.cx,d=y.cy;else{var v=i(e,y,l);a=v.x,d=v.y,p=v.zoom}return r(h,a,d,p,f,g,c,p/h.zoom),!0}function i(e,t,n){var i=n.left||e._settings.defaultLeftPadding,r=n.right||e._settings.defaultRightPadding,o=n.top||e._settings.defaultTopPadding,s=n.bottom||e._settings.defaultBottomPadding,a=(e._screen.width-i-r)/(t.maxX-t.minX),d=(e._screen.height-o-s)/(t.maxY-t.minY),u=a<d?a:d;return e._settings.maxNodeSizeOnScreen&&t.maxSize*u>e._settings.maxNodeSizeOnScreen&&(u=e._settings.maxNodeSizeOnScreen/t.maxSize),u>e._cameraSettings.maxZoom?u=e._cameraSettings.maxZoom:u<e._cameraSettings.minZoom&&(u=e._cameraSettings.minZoom),{x:t.cx+(r-i)/(2*u),y:t.cy+(s-o)/(2*u),zoom:u}}function r(e,t,n,i,r,o,s,a){a>1.01?(e.setCenter(t,n,{duration:r,easing:o,callback:s}),e.setZoom(i,{duration:r,easing:o,startAfter:.5})):a<.99?(e.setCenter(t,n,{duration:r,easing:o,callback:s,startAfter:.5}),e.setZoom(i,{duration:r,easing:o})):e.setCenter(t,n,{duration:r,easing:o,callback:s})}function o(e,t){return e&&(t?setTimeout(e,t):e()),!1}var s=$global.Ogma;t.settings={centerOnResize:{default:!1,type:"boolean"},centerAtInit:{default:!0,type:"boolean"},defaultLeftPadding:{default:40,type:"number"},defaultRightPadding:{default:40,type:"number"},defaultTopPadding:{default:40,type:"number"},defaultBottomPadding:{default:40,type:"number"},defaultEasing:{default:"quadraticInOut",type:"string"},maxNodeSizeOnScreen:{default:100,type:"positive",values:[null]}},t.dependencies=["graph","camera","render"],t.prototype.center=function(t){return this.nodes(e,t)},t.prototype.nodes=function(e,t){return n(this,!0,e,t)},t.prototype.edges=function(e,t){return n(this,!1,e,t)},t.prototype.computeCameraConfig=function(e,t){return i(this,this.nodesBoundingBox(e),t||{})},t.prototype.nodesBoundingBox=function(e){e||(e=this._graph.nodes);for(var t=1/0,n=1/0,i=-1/0,r=-1/0,o=0,s=e.length,a=this._graph.nodeAttributes.size,d=this._graph.nodeAttributes.x,u=this._graph.nodeAttributes.y,l=0;l<s;++l){var h=e[l],c=h.__index,g=a[c],f=d[c],p=u[c];o=Math.max(o,g),t=Math.min(t,f-g),n=Math.min(n,p-g),i=Math.max(i,f+g),r=Math.max(r,p+g)}return{minX:t,minY:n,maxX:i,maxY:r,cx:t+(i-t)/2,cy:n+(r-n)/2,width:i-t,height:r-n,maxSize:o}},t.prototype.edgesBoundingBox=function(e){for(var t=s.geometry.SELF_LOOP_SIZE_MULTIPLIER,n=1/0,i=1/0,r=-1/0,o=-1/0,a=0,d=0;d<e.length;++d){var u=e[d],l=u.__source,h=u.__target,c=l.size,g=l.x,f=l.y,p=h.size,y=h.x,v=h.y,m=u.curvature;if(a=Math.max(a,Math.max(c,p)),l===h){var _=c+m;n=Math.min(n,g-t*_),i=Math.min(i,f-c),r=Math.max(r,g+c),o=Math.max(o,f+t*_)}else n=Math.min(n,Math.min(g-c,y-p)),i=Math.min(i,Math.min(f-c,v-p)),r=Math.max(r,Math.max(g+c,y+p)),o=Math.max(o,Math.max(f+c,v+p))}return{minX:n,minY:i,maxX:r,maxY:o,cx:n+(r-n)/2,cy:i+(o-i)/2,width:r-n,height:o-i,maxSize:a}},t.prototype.graphInCamera=function(){var e=this.nodesBoundingBox(),t=this._camera,n=this._screen,i=n.width/t.zoom/2,r=n.height/t.zoom/2,o=t.x-i,s=t.y-r,a=t.x+i,d=t.y+r,u=e.minX,l=e.minY,h=e.maxX,c=e.maxY;return(o<u&&u<a||u<o&&o<h)&&(s<l&&l<d||l<s&&s<c)},s.modules.locate=t}.call(),function(e){function t(e){this._graph=e.graph,this._batch=e.batch,this._topology=e.topology,this._selection=e.selection,this._drawing=e.drawing,this._dsl=e.dsl,this._partitions=e.partitions,this._renderer=e.render,this._graph.addCommonAttributes({"groups.children":Array,"groups.parent":Array,"groups.prevX":Float32Array,"groups.prevY":Float32Array,"groups.building":Int8Array}),this._metaElts=$dual();var t=this,r=this._graph.nodeAttributes,o=this._graph.edgeAttributes;this._drawing.addNodeVisibilityCondition(function(e){var t=r["groups.parent"][e.__index];return r["groups.children"][e.__index]?!r["groups.building"][e.__index]:!t||r["groups.building"][t.__index]}),this._drawing.addEdgeVisibilityCondition(function(e){var t=o["groups.parent"][e.__index],n=o["groups.children"][e.__index],i=r["groups.parent"][e.__sourceIndex],s=r["groups.parent"][e.__targetIndex];return n?!o["groups.building"][e.__index]:!(t&&!o["groups.building"][t.__index]||i&&s&&i===s)}),this._graph.addNodeReadOnlyProperty("parent",function(e){return r["groups.parent"][e.__index]},!1),this._graph.addEdgeReadOnlyProperty("parent",function(e){return o["groups.parent"][e.__index]},!1),this._graph.addNodeReadOnlyProperty("children",function(e){return r["groups.children"][e.__index]},!1),this._graph.addEdgeReadOnlyProperty("children",function(e){return o["groups.children"][e.__index]},!1),e.events.bind({"graph.addNodes":function(e){return n(t,!0,e)},"graph.removeNodes":function(e){return i(t,!0,e)},"graph.addEdges":function(e){return n(t,!1,e)},"graph.removeEdges":function(e){return i(t,!1,e)},"drag.progress":function(e){for(var t=0;t<e.length;++t){var n=e[t],i=n.children;i&&i.forEach(function(e){e.x=n.x,e.y=n.y})}}})}function n(e,t,n){for(var i=e._graph.attributes(t),r=i["groups.children"],o=i["groups.parent"],s=0,a=n.length;s<a;++s){var d=n[s].__index;r[d]=null,o[d]=null}}function i(t,n,i){for(var o=t._graph.attributes(n),s=o["groups.children"],a=o["groups.parent"],d=o.id,u=t._metaElts.fetch(n),l=[],c=new h.utils.Set,g=i.length,f=0;f<g;++f){var p=i[f].__index,y=s[p],v=a[p];if(y){for(var m=0;m<y.length;++m)l.push(d[y[m].__index]);u[d[p]]=e}else v&&(a[p]=null,c.add(d[v.__index]))}l.length&&t._graph.removeElements(n,l),r(t,n,c.values())}function r(e,t,n){for(var i=e._graph.attributes(t),r=i["groups.children"],o=i["groups.parent"],s=e._metaElts.fetch(t),a=[],d=[],u=0;u<n.length;++u){var l=n[u],h=s[l];if(h){for(var c=h.elt,g=c.__index,f=h.method,p=r[g],y=[],v=0;v<p.length;++v){var m=p[v];o[m.__index]===c&&y.push(m)}if(r[g]=y,y.length>0){var _=f(y);e._graph.updateElement(t,c,_),d.push(c)}else a.push(c.id)}}e._graph.removeElements(t,a),e._drawing.redraw(d)}function o(e,t,n){return e._metaElts.fetch(t)[n.id]}function s(e,t){var n=[];return $iter(e._metaElts.fetch(t),function(e){e&&e.elt&&n.push(e.elt)}),n}function a(e,t){for(var n=e._graph.attributes(t),i=e._graph._elts.fetch(t).totalSize,r=n.exists,o=n["groups.children"],s=n.ref,a=[],d=0;d<i;++d)r[d]&&!o[d]&&a.push(s[d]);return a}function d(t,n,i,o,s){for(var a=t._graph.attributes(n),d=a["groups.parent"],u=a["groups.children"],l=a["groups.building"],c=a["groups.prevX"],g=a["groups.prevY"],f=a.curvature,p=a.manualCurvature,y=a.x,v=a.y,m=t._metaElts.fetch(n),_=[],b=[],x=0;x<i.length;++x){var w=i[x],A=w.method||t[n?"_defNodeMethod":"_defEdgeMethod"],E=t._graph.getElementList(n,w[n?"nodes":"edges"]),C=[];if(!n&&E.length){var S=t._topology.edgeDirection(E[0]);for(I=1;I<E.length;++I){if(t._topology.edgeDirection(E[I])!==S)throw new Error("edges "+E[0].id+" and "+E[I].id+" do not have the same source and target")}}for(var I=0;I<E.length;++I){var O=E[I],z=O.__index,T=u[z];T?C.push.apply(C,T):C.push(O)}var N=A(C);N.id=$or(N.id,t._graph.unusedId(n)),n||(N.source=$source(C[0]).id,N.target=$target(C[0]).id),_.push(C),b.push(N),t._graph.getElement(n,N.id)||(m[N.id]=!0)}var L=t._graph.addElements(n,b),P=new h.utils.Set;for(x=0;x<L.length;++x)O=L[x],m[O.id]={elt:O,method:i[x].method||t[n?"_defNodeMethod":"_defEdgeMethod"]};for(x=0;x<_.length;++x){C=_[x];var k=L[x],F=k.__index;for(u[F]=C,l[F]=!0,I=0;I<C.length;++I){O=C[I],z=O.__index;var M=d[z];M?P.add(M.id):n&&(c[z]=y[z],g[z]=v[z]),d[z]=k}}r(t,n,P.values()),t._drawing.updateVisibility(L);var D=function(){for(var e=0;e<_.length;++e){var i=_[e];if(t._drawing.updateVisibility(i),t._selection.drop(n,i),n)for(var r=0;r<i.length;++r){var o=i[r],s=o.parent;o.x=s.x,o.y=s.y}else{for(r=0;r<i.length;++r){var a=i[r].__index,d=f[a];p[a]=1,0!==d&&(d=.1*Math.sign(d),f[a]=d)}t._drawing.redraw(i)}}},R=function(){for(var e=0;e<L.length;++e){var n=L[e],i=u[n.__index];l[n.__index]=!1,t._drawing.updateVisibility(i)}t._drawing.updateVisibility(L),t._drawing.redraw(L),s&&s()};return o===e?(D(),R()):t._drawing.animate(D,o,R),L}function u(t,n,i,o,a){i===e&&(i=s(t,n));for(var d=l(t,n,t._graph.getElementList(n,i)),u=t._graph.attributes(n),c=u["groups.parent"],g=u.manualCurvature,f=u.x,p=u.y,y=u["groups.prevX"],v=u["groups.prevY"],m=new h.utils.Set,_=0;_<d.length;++_){var b=d[_],x=b.__index,w=c[x];m.add(w.id),c[x]=null}r(t,n,m.values());var A=function(){if(n)for(var e=0;e<d.length;++e){var i=d[e],r=i.__index;f[r]=y[r],p[r]=v[r]}else for(var o=0;o<d.length;++o)g[d[o].__index]=0;t._drawing.redraw(d),t._drawing.updateVisibility(d)};o===e?(A(),a&&a()):t._drawing.animate(A,o,a)}function l(e,t,n){for(var i=e._graph.attributes(t),r=i["groups.children"],o=i["groups.parent"],s=[],a=0;a<n.length;++a){var d=n[a],u=d.__index,l=r[u],h=o[u];l?s.push.apply(s,l):h&&s.push(d)}return s}var h=$global.Ogma;t.dependencies=["graph","topology","drawing","dsl","partitions","render","batch","drag","selection"],t.prototype.setNodeDefaultMethod=function(e){this._defNodeMethod=e},t.prototype.setEdgeDefaultMethod=function(e){this._defEdgeMethod=e},t.prototype.getMetaNodes=function(){return s(this,!0)},t.prototype.getMetaEdges=function(){return s(this,!1)},t.prototype.getNonMetaNodes=function(){return a(this,!0)},t.prototype.getNonMetaEdges=function(){return a(this,!1)},t.prototype.isMetaNode=function(e){return o(this,!0,e)},t.prototype.isMetaEdge=function(e){return o(this,!1,e)},t.prototype.groupMultipleNodes=function(e,t,n){return d(this,!0,e,t,n)},t.prototype.groupMultipleEdges=function(e,t,n){return d(this,!1,e,t,n)},t.prototype.groupNodes=function(e,t,n,i){return d(this,!0,[{nodes:e,method:t}],n,i)[0]},t.prototype.groupEdges=function(e,t,n,i){return d(this,!1,[{edges:e,method:t}],n,i)[0]},t.prototype.ungroupNodes=function(e,t,n){return u(this,!0,e,t,n)},t.prototype.ungroupEdges=function(e,t,n){return u(this,!1,e,t,n)},t.prototype.reset=function(e,t){this.ungroupEdges(this.metaEdges(),e,t),this.ungroupNodes(this.metaNodes(),e,t)},h.modules.groups=t}.call(),function(){function e(e){this._shapes=e.shapes,this._texts=e.texts,this._mouse=e.mouse,this._touch=e.touch,this._settings=e.settings.get("captor",!0),this._events=e.events.create(["captor."],["move","down","up","click","rightDown","rightUp","rightClick","doubleClick","startDrag","drag","endDrag","startRightDrag","rightDrag","endRightDrag","hoverNode","unhoverNode","clickNode","doubleClickNode","rightClickNode","dragNode","startDragNode","endDragNode","rightDragNode","startRightDragNode","endRightDragNode","hoverEdge","unhoverEdge","clickEdge","doubleClickEdge","rightClickEdge","dragEdge","startDragEdge","endDragEdge","rightDragEdge","startRightDragEdge","endRightDragEdge","clickBackground","doubleClickBackground","rightClickBackground","dragBackground","startDragBackground","endDragBackground","rightDragBackground","startRightDragBackground","endRightDragBackground"]),this._elt=null,this._draggedElt=null,this._enabled=!0,this._leftPressed=!1,this._rightPressed=!1,this._leftDrag=!1,this._rightDrag=!1,this._isNode=!0,this._init=!1,this._hover=!1;var l=this,h=this._touch,c=this._mouse;e.events.bind({"settings.captor":function(){return u(l,c.x,c.y)},"graph.removeNodes graph.removeEdges":function(e){(l._draggedElt&&$has(e,l._draggedElt)||l._elt&&$has(e,l._elt))&&u(l,c.x,c.y)},"mouse.move":function(e,t,n,r){return i(l,c.x,c.y,n,r)},"touch.move":function(e,t,n,r){return i(l,h.x,h.y,n,r)},"mouse.down":function(e,i,r){"left"===r?t(l,e,i):"right"===r&&n(l,e,i)},"touch.down":function(e,n){return t(l,e,n)},"mouse.up":function(e,t,n){"left"===n?r(l,c.x,c.y,!0):"right"===n&&o(l,c.x,c.y,!0)},"touch.up":function(){return r(l,h.x,h.y)},"mouse.click touch.tap":function(e,t,n){n&&"left"!==n?"right"===n&&d(l,e,t):s(l,e,t)},"mouse.doubleClick touch.doubleTap":function(e,t,n){n&&"left"!==n||a(l,e,t)}})}function t(e,t,n){var i=l(e,t,n);i!==e._elt&&u(e,t,n),e._elt=i,e._leftPressed=!0,e._events.down(t,n)}function n(e,t,n){var i=l(e,t,n);i!==e._elt&&u(e,t,n),e._elt=i,e._rightPressed=!0,e._events.rightDown(t,n)}function i(e,t,n,i,r){e._events.move(t,n);var o=e._elt&&e._elt.isNode;e._leftPressed&&(e._leftDrag||(e._leftDrag=!0,e._draggedElt=e._elt,e._events.startDrag(t,n,i,r),e._elt?(e._hover&&(e._events[o?"unhoverNode":"unhoverEdge"](e._elt,t,n),e._hover=!1),e._events[o?"startDragNode":"startDragEdge"](e._elt,t,n,i,r)):e._events.startDragBackground(t,n,i,r)),e._events.drag(t,n,i,r),e._draggedElt?e._events[e._draggedElt.isNode?"dragNode":"dragEdge"](e._draggedElt,t,n,i,r):e._events.dragBackground(t,n,i,r)),e._rightPressed&&(e._rightDrag||(e._rightDrag=!0,e._draggedElt=e._elt,e._events.startRightDrag(t,n,i,r),e._elt?(e._hover&&(e._events[o?"unhoverNode":"unhoverEdge"](e._elt,t,n),e._hover=!1),e._events[o?"startRightDragNode":"startRightDragEdge"](e._elt,t,n,i,r)):e._events.startRightDragBackground(t,n,i,r)),e._events.rightDrag(t,n,i,r),e._draggedElt?e._events[e._draggedElt.isNode?"rightDragNode":"rightDragEdge"](e._draggedElt,t,n,i,r):e._events.rightDragBackground(t,n,i,r));var s=l(e,t,n);e._leftPressed||e._rightPressed||s!==e._elt&&(e._elt&&e._hover&&(e._hover=!0,e._events[o?"unhoverNode":"unhoverEdge"](e._elt,t,n)),s&&(e._hover=!0,e._events[s.isNode?"hoverNode":"hoverEdge"](s,t,n))),e._elt=s}function r(e,t,n,i){e._leftPressed&&(e._leftDrag&&(e._events.endDrag(t,n),e._draggedElt?e._events[e._draggedElt.isNode?"endDragNode":"endDragEdge"](e._draggedElt,t,n):e._events.endDragBackground(t,n),e._rightDrag||(e._draggedElt=null)),e._rightPressed||e._hover||!i||(e._elt=l(e,t,n),e._elt&&(e._events[e._elt.isNode?"hoverNode":"hoverEdge"](e._elt,t,n),e._hover=!0)),e._leftPressed=!1,e._leftDrag=!1,e._events.up(t,n))}function o(e,t,n,i){e._rightPressed&&(e._rightDrag&&(e._events.endRightDrag(t,n),e._draggedElt?e._events[e._draggedElt.isNode?"endRightDragNode":"endRightDragEdge"](e._draggedElt,t,n):e._events.endRightDragBackground(t,n),e._leftDrag||(e._draggedElt=null)),e._leftPressed||e._hover||!i||(e._elt=l(e,t,n),e._elt&&(e._events[e._elt.isNode?"hoverNode":"hoverEdge"](e._elt,t,n),e._hover=!0)),e._rightPressed=!1,e._rightDrag=!1,e._events.rightUp(t,n))}function s(e,t,n){e._events.click(t,n),e._elt?e._events[e._elt.isNode?"clickNode":"clickEdge"](e._elt,t,n):e._events.clickBackground(t,n)}function a(e,t,n){e._events.doubleClick(t,n),e._elt?e._events[e._elt.isNode?"doubleClickNode":"doubleClickEdge"](e._elt,t,n):e._events.doubleClickBackground(t,n)}function d(e,t,n){e._events.rightClick(t,n),e._elt?e._events[e._elt.isNode?"rightClickNode":"rightClickEdge"](e._elt,t,n):e._events.rightClickBackground(t,n)}function u(e,t,n){var i=e._draggedElt&&e._draggedElt.isNode;e._leftDrag&&(e._draggedElt?e._events[i?"endDragNode":"endDragEdge"](e._draggedElt,t,n):e._events.endDragBackground(t,n)),e._rightDrag&&(e._draggedElt?e._events[i?"endRightDragNode":"endRightDragEdge"](e._draggedElt,t,n):e._events.endRightDragBackground(t,n)),e._hover&&e._elt&&e._events[e._elt.isNode?"unhoverNode":"unhoverEdge"](e._elt,t,n),e._hover=!1,e._leftPressed=!1,e._rigthPressed=!1,e._leftDrag=!1,e._rightDrag=!1,e._elt=null,e._draggedElt=null}function l(e,t,n){var i=null;return e._settings.nodes&&(i=e._shapes.detectNodeShape(t,n,e._settings.nodeErrorMargin)),!i&&e._settings.nodes&&e._settings.nodeTexts&&(i=e._texts.detectNodeText(t,n)),!i&&e._settings.edges&&(i=e._shapes.detectEdgeShape(t,n,e._settings.edgeErrorMargin)),!i&&e._settings.edges&&e._settings.edgeTexts&&(i=e._texts.detectEdgeText(t,n)),i}var h=$global.Ogma,c={nodes:{default:!0,type:"boolean"},edges:{default:!0,type:"boolean"},nodeTexts:{default:!0,type:"boolean"},edgeTexts:{default:!0,type:"boolean"},nodeErrorMargin:{default:5,type:"positive"},edgeErrorMargin:{default:7,type:"positive"}};e.dependencies=["settings","graph","camera","shapes","texts","mouse","touch"],e.settings=c,e.prototype.pointedElement=function(){return this._elt},e.prototype.draggedElement=function(){return this._draggedElt},h.modules.captor=e}.call(),function(){function e(e,t){e.on({"graph.addNodes":function(e){}})}$global.Ogma,Int16Array,Float32Array,Float32Array,Int8Array,Float32Array,Int16Array,Array,e.prototype.getScheme=function(){},e.prototype.addRule=function(e,t){},e.prototype.addProperty=function(){}}(),function(e){function t(t){this._ogma=t,this._graph=t.graph,this._renderer=t.render,this._camera=t.camera,this._drawing=t.drawing,this._topology=t.topology,this._settings=t.settings.get("shapes",!0),this._graph.addEdgeAttributes({curvature:Float32Array,manualCurvature:Int8Array}),this._directedEdges=this._settings.directedEdges,this._nodeAttributes=this._graph.nodeAttributes,this._edgeAttributes=this._graph.edgeAttributes,this._drawing.addEdgeSubLayer("edgeShapes",$C("subLayer","edgeShapes")),this._drawing.addEdgeSubLayer("edgeOuterStrokes",$C("subLayer","edgeOuterStrokes")),this._drawing.addNodeSubLayer("nodeOuterStrokes",$C("subLayer","nodeOuterStrokes")),this._drawing.addNodeSubLayer("nodeInnerStrokes",$C("subLayer","nodeInnerStrokes")),this._drawing.addNodeSubLayer("nodeShapes",{level:$C("subLayer","nodeShapes"),defineClipSpace:!0}),this._drawing.addNodeVisualProperty("shape",{values:Object.keys(c.shapes.nodes).concat([e])}),this._drawing.addEdgeVisualProperty("shape",{values:Object.keys(c.shapes.edges).concat([e])}),this._drawing.addCommonVisualProperty("shapeParameters",{type:"object"}),this._drawing.addCommonVisualProperty("color",{type:"string"});var r=this._edgeAttributes;this._graph.addEdgeReadOnlyProperty("curvature",function(e){return r.curvature[e.__index]}),this._drawing.addCommonVisualComponent("fillComponent"),this._drawing.addCommonVisualComponent("outerStrokeComponent"),this._drawing.addNodeVisualComponent("innerStrokeComponent"),this._curvaturesToUpdate=new c.utils.Set;var o=this;s(o),t.events.bind({"graph.addEdges":function(e){return n(o,e)},"graph.removeEdges":function(e){return n(o,e)},"graph.startInit":function(){o._firstUpdate=!0},"graph.endInit":function(){o._curvaturesToUpdate=o._topology.getAllEdgeDirections()},"drawing.before":function(){i(o)},"drawing.nodes":function(e){return a(o,e)},"drawing.edges":function(e){return d(o,e)},"drawing.edgesVisibilityChange":function(e){if(!o._firstUpdate)for(var t=0;t<e.length;++t)o._curvaturesToUpdate.add(o._topology.edgeBiDirection(e[t]))},"settings.shapes":function(){return s(o)}})}function n(e,t){if(!e._firstUpdate)for(var n=e._curvaturesToUpdate,i=e._topology,r=t.length,o=0;o<r;++o)n.add(i.edgeBiDirection(t[o]))}function i(e){e._curvaturesToUpdate.forEach(function(t){r(e,t)}),e._firstUpdate?(e._curvaturesToUpdate=new c.utils.Set,e._firstUpdate=!1):e._curvaturesToUpdate.clear()}function r(e,t){var n=e._graph.edgeAttributes,i=e._settings.edgesAlwaysCurvy,r=0,s=0,a=e._topology.getEdgesMatchingDirection(t,function(e){return n.visible[e.__index]&&!n.manualCurvature[e.__index]}),d=[];a.sort(function(e,t){return n.insertionOrder[e.__index]-n.insertionOrder[t.__index]});for(var u=a[0],l=0;l<a.length;++l){var h=a[l];h.__source===u.__source?r+=1:s+=1}var c=0,g=0,f=0,p=0;for(l=0;l<a.length;++l){h=a[l];var y=h.__index,v=h.__source===u.__source,m=h.__source===h.__target;e._directedEdges?n.curvature[y]=o(v?f:p,r,s,(v?c:g)+h.size/2,m,!1,!0,i):n.curvature[y]=o(f+p,a.length,0,c+g+h.size/2,m,!v,!1,i),v?(c+=h.size,f+=1):(g+=h.size,p+=1),d.push(h)}e._drawing.redraw(d)}function o(e,t,n,i,r,o,s,a){return r?i:s?1!==t||0!==n||a?e+1:0:t%2!=1||a?(1+(e/2|0))*(e%2==0?1:-1)*(o?-1:1):0===e?0:((e+1)/2|0)*(e%2==0?1:-1)*(o?-1:1)}function s(e){e._drawing.changeSubLayerThreshold("nodeInnerStrokes",e._settings.nodeInnerStrokeThreshold),e._drawing.changeSubLayerThreshold("edgeShapes",e._settings.edgeThreshold),e._drawing.redrawEverything()}function a(e,t){for(var n=e._nodeAttributes,i=c.shapes.nodes,r=n.fillComponent,o=n.innerStrokeComponent,s=n.outerStrokeComponent,a=n.size,d=n.x,u=n.y,l=n.color,h=n.shape,g=n.depth,p=n.shapeParameters,y=e._renderer,v=e._settings.defaultNodeShape,m=e._settings.defaultNodeColor,_=e._settings.nodeInnerStrokeWidth,b=e._settings.nodeOuterStrokeWidth,x=e._settings.nodeInnerStrokeColor,w=t.length,A=0;A<w;++A){var E=t[A],C=E.__index,S=i[h[C]||v],I=e._drawing.getElementProperty(E,"nodeOuterStrokeColor");if(S){var O=p[C]||f,z=l[C]||m;r[C]=S.draw(y,r[C],d[C],u[C],a[C],0,z,"nodeShapes",g[C],a[C],O),o[C]=S.draw(y,o[C],d[C],u[C],a[C],_,x,"nodeInnerStrokes",g[C],a[C],O),"inherit"===I&&(I=z),s[C]=I?S.draw(y,s[C],d[C],u[C],a[C],b+_,I,"nodeOuterStrokes",g[C],a[C],O):y.delete(s[C])}}}function d(e,t){for(var n=e._edgeAttributes,i=e._nodeAttributes,r=n.shape,o=c.shapes.edges,s=i.x,a=i.y,d=i.size,l=i.color,h=n.source,g=n.target,f=n.size,p=n.depth,y=n.curvature,v=n.shapeParameters,m=n.color,_=n.fillComponent,b=n.outerStrokeComponent,x=e._renderer,w=e._settings.edgeStrokeWidth,A=e._settings.defaultEdgeColor,E=e._settings.overrideEdgeColor,C=e._settings.defaultEdgeShape,S=0;S<t.length;++S){var I,O=t[S],z=O.__index,T=h[z],N=g[z],L=e._drawing.getElementProperty(O,"edgeOuterStrokeColor");I="source"===E?l[T]:"target"===E?l[N]:m[z]||A;var P=o[r[z]||C];P&&(_[z]=u(x,_[z],P,T,N,s[T],a[T],s[N],a[N],f[z],0,y[z],d[T],d[N],I,"edgeShapes",p[z],f[z],v[z]),"inherit"===L&&(L=I),b[z]=L?u(x,b[z],P,T,N,s[T],a[T],s[N],a[N],f[z],w,y[z],d[T],d[N],L,"edgeOuterStrokes",p[z],f[z],v[z]):x.delete(b[z]))}}function u(e,t,n,i,r,o,s,a,d,u,l,h,c,g,f,y,v,m,_){return _=_||p,t=i===r?n.drawLoop(e,t,o,s,u,l,h,c,f,y,v,m,_):0===h?n.drawStraight(e,t,o,s,a,d,u,l,c,g,f,y,v,m,_):n.drawCurved(e,t,o,s,a,d,u,l,h,c,g,f,y,v,m,_)}function l(e,t,n,i){var r=e._graph._elts.nodes,o=r.attributes,s=r.totalSize,a=o.exists,d=c.shapes.nodes,u=o.shape,l=o.shapeParameters,h=o.x,g=o.y,f=o.size,p=o.visibleOnScreen,v=e._settings.defaultNodeShape,m=null;i/=e._camera.zoom;for(var _=e._camera.getAbsolutePosition(t,n),b=_.x,x=_.y,w=0;w<s;++w){var A=w;a[A]&&p[A]&&d[u[A]||v].detect(h[A],g[A],f[A]+i,b,x,l[A]||y)&&(m=o.ref[A])}return m}function h(e,t,n,i){for(var r=e._graph.nodeAttributes,o=e._graph.edgeAttributes,s=e._graph._elts.edges,a=o.exists,d=s.totalSize,u=c.shapes.edges,l=o.curvature,h=o.shape,g=o.shapeParameters,f=r.x,p=r.y,v=r.size,m=o.source,_=o.target,b=o.size,x=o.visibleOnScreen,w=e._settings.defaultEdgeShape,A=i/e._camera.zoom*2,E=e._camera.getAbsolutePosition(t,n),C=E.x,S=E.y,I=0;I<d;++I){var O=I;if(a[O]&&x[O]){var z=m[O],T=_[O],N=h[O]||w,L=u[N],P=b[O]+A,k=l[O],F=g[O]||y,M=f[z],D=p[z],R=f[T],B=p[T],j=v[z],U=v[T];if(z===T?L.detectLoop(C,S,M,D,P,k,j,F):0===k?L.detectStraight(C,S,M,D,R,B,P,j,U,F):L.detectCurved(C,S,M,D,R,B,P,k,j,U,F))return o.ref[O]}}return null}var c=$global.Ogma,g={defaultNodeShape:{default:"circle",values:Object.keys(c.shapes.nodes)},defaultEdgeShape:{default:"line",values:Object.keys(c.shapes.edges)},defaultNodeColor:{default:"grey",type:"color"},nodeInnerStrokeColor:{default:"white",type:"color"},nodeInnerStrokeWidth:{default:2,type:"positive"},nodeOuterStrokeWidth:{default:5,type:"positive"},nodeInnerStrokeThreshold:{default:5,type:"positive",values:[e]},defaultEdgeColor:{default:"grey",type:"color"},overrideEdgeColor:{default:e,values:[e,"source","target"]},edgeStrokeWidth:{default:0,type:"positive"},edgesAlwaysCurvy:{default:!1,type:"boolean"},directedEdges:{default:!1,type:"boolean"},edgeThreshold:{default:e,type:"positive",values:[e]}};t.settings=g,t.dependencies=["graph","render","camera","drawing","topology"];var f={},p={};t.prototype.drawEdgeShape=u,t.prototype.nbCurvedEdges=function(){for(var e=this._edgeAttributes.curvature,t=this._graph.edges.list,n=0,i=0;i<this._graph.edges.size;++i)0!==e[t[i]]&&(n+=1);return n},t.prototype.detectNodeShape=function(e,t,n){return l(this,e,t,n||0)},t.prototype.detectEdgeShape=function(e,t,n){return h(this,e,t,n||0)};var y={};c.modules.shapes=t}.call(),function(e){function t(e){this._graph=e.graph,this._renderer=e.render,this._drawing=e.drawing,this._shapes=e.shapes,this._camera=e.camera,this._shapeSettings=e.settings.get("shapes"),this._settings=e.settings.get("pulses"),this._graph.addCommonAttributes({highlightComponents:Array,highlightTimeouts:Array}),this._edgeHighlightZ=this._drawing.MAX_EDGE_Z,this._drawing.addEdgeSubLayer("edgeHighlights",$C("subLayer","edgePulses")),this._drawing.addNodeSubLayer("nodeHighlights",$C("subLayer","nodePulses")),this._drawing.addLayer("pulse",$C("layer","pulse"));var t=this;e.events.bind({"graph.addNodes":function(e){return n(t,!0,e)},"graph.addEdges":function(e){return n(t,!1,e)},"graph.removeNodes":function(e){return i(t,!0,e)},"graph.removeEdges":function(e){return i(t,!0,e)},"graph.clear":function(){}})}function n(t,n,i){for(var r=t._graph._elts.fetch(n).attributes.highlightComponents,o=i.length,s=0;s<o;++s)r[i[s].__index]=e}function i(e,t,n){for(var i=n.length,r=0;r<i;++r)o(e,t,n[r])}function r(e,t,n,i,r,d,u,l){function h(){for(var t=0;-1===f[t]&&t<f.length;)++t;e._renderer.delete(f[t]),f[t]=-1}i=i||e._settings.numberOfPulses,r=r||e._settings.pulseDuration,d=d||e._settings.pulseInterval,u=u||e._settings[t?"nodePulseStartColor":"edgePulseStartColor"],l=l||e._settings[t?"nodePulseEndColor":"edgePulseEndColor"],"inherit"===u&&(u=n.color),"inherit"===l&&(l=n.color),o(e,t,n),e._drawing.putElementOnLayer(n,"pulse");var c=n.__index,g=e._graph.attributes(t),f=[],p=[],y=e._settings[t?"nodePulseWidth":"edgePulseWidth"],v=e._settings[t?"nodePulseStartRatio":"edgePulseStartRatio"],m=e._settings[t?"nodePulseEndRatio":"edgePulseEndRatio"];if(g.highlightComponents[c]=f,g.highlightTimeouts[c]=p,t)for(var _=function(){var t=s(e._renderer,n.x,n.y,n.size*v,n.size*m,y,u,l,r);f.push(t)},b=0;b<i;++b)p.push(setTimeout(_,b*d)),p.push(setTimeout(h,b*d+r));else{var x=function(){var t=a(e,n,u,l,n.size*v,n.size*m,y,r);f.push(t)};for(b=0;b<i;++b)p.push(setTimeout(x,b*d)),p.push(setTimeout(h,b*d+r))}p.push(setTimeout(function(){o(e,t,n)},(i-1)*d+r))}function o(t,n,i){var r=i.__index,o=t._graph.attributes(n),s=o.highlightComponents[r],a=o.highlightTimeouts[r];if(s){for(var d=0;d<s.length;++d)t._renderer.delete(s[d]);for(d=0;d<a.length;++d)clearTimeout(a[d]);o.highlightComponents[r]=e,o.highlightTimeouts[r]=e}t._drawing.removeElementFromLayer(i,"pulse")}function s(e,t,n,i,r,o,s,a,d){var l=u.utils.circleStroke(e,-1,t,n,i,o,s,"nodeHighlights");return e.animate(d,function(){u.utils.circleStroke(e,l,t,n,r,o,a,"nodeHighlights")}),l}function a(e,t,n,i,r,o,s,a){var d,l,h=u.shapes.edges.line,c=e._shapes,g=t.__source,f=t.__target;if(g===f)l=u.geometry.normalize(g.x,g.y,g.x+1,g.y-1,1),d=h.drawLoop(e._renderer,-1,g.x+l.x*r,g.y+l.y*r,0,s,t.curvature,g.size+r/2,n,"edgeHighlights",e._edgeHighlightZ),e._renderer.animate(a,function(){h.drawLoop(e._renderer,d,g.x+l.x*o,g.y+l.y*o,0,s,t.curvature,g.size+o/2,i,"edgeHighlights",e._edgeHighlightZ)});else{l=u.geometry.normalize(g.x,g.y,f.x,f.y,1);var p=l.y,y=-l.x,v=c.drawEdgeShape(e._renderer,-1,h,g,f,g.x+p*r,g.y+y*r,f.x+p*r,f.y+y*r,0,s,t.curvature,g.size,f.size,n,"edgeHighlights",e._edgeHighlightZ),m=c.drawEdgeShape(e._renderer,-1,h,g,f,g.x-p*r,g.y-y*r,f.x-p*r,f.y-y*r,0,s,t.curvature,g.size,f.size,n,"edgeHighlights",e._edgeHighlightZ);e._renderer.animate(a,function(){c.drawEdgeShape(e._renderer,v,h,g,f,g.x+p*o,g.y+y*o,f.x+p*o,f.y+y*o,0,s,t.curvature,g.size,f.size,i,"edgeHighlights",e._edgeHighlightZ),c.drawEdgeShape(e._renderer,m,h,g,f,g.x-p*o,g.y-y*o,f.x-p*o,f.y-y*o,0,s,t.curvature,g.size,f.size,i,"edgeHighlights",e._edgeHighlightZ)}),d=e._renderer.composite(-1,[v,m])}return e._renderer.setDepth(d,e._edgeHighlightZ),d}function d(e,t,n,i){i=i||{};for(var o=e._graph.getElementList(t,n),s=0;s<o.length;++s)r(e,t,o[s],i.nbPulses,i.pulseDuration,i.pulseInterval,i.startColor,i.endColor)}var u=$global.Ogma;t.settings={pulseDuration:{default:1e3,type:"positive"},pulseInterval:{default:300,type:"positive"},numberOfPulses:{default:1,type:"positive"},nodePulseWidth:{default:50,type:"positive"},nodePulseStartRatio:{default:1,type:"positive"},nodePulseEndRatio:{default:2,type:"positive"},nodePulseStartColor:{default:"rgb(0,0,0,0.6)",type:"color",values:["inherit"]},nodePulseEndColor:{default:"rgb(0,0,0,0.0)",type:"color",values:["inherit"]},edgePulseWidth:{default:10,type:"positive"},edgePulseStartRatio:{default:1,type:"positive"},edgePulseEndRatio:{default:2,type:"positive"},edgePulseStartColor:{default:"rgb(0,0,0,0.6)",type:"color",values:["inherit"]},edgePulseEndColor:{default:"rgb(0,0,0,0.0)",type:"color",values:["inherit"]}},t.dependencies=["graph","drawing","shapes"],t.prototype.nodes=function(e,t){d(this,!0,e,t)},t.prototype.edges=function(e,t){d(this,!1,e,t)},u.modules.pulses=t}.call(),function(e){function t(t,o){this._events=t.events.create("render.",["beforeNewFrame","newFrame","setContainer","resize","reload","export"]),this._settings=t.settings.get("render"),this._frameCount=0,this.screen={width:0,height:0},this._windowEvtListeners={resize:function(){r(this)}.bind(this),mediaChange:function(e){i(e,this)}.bind(this)},"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("resize",this._windowEvtListeners.resize),window.matchMedia("screen and (min-resolution: 2dppx)").addListener(this._windowEvtListeners.mediaChange)),this._container=null,this._renderer=null,this._exportedRenderer=null,this._backgroundColor=this._settings.backgroundColor,this._subLayers={},this._cursorStyles=[],this._isFullScreen=!1;var s=o.dimensions||{width:800,height:600},a=$or(o.render,["webgl","canvas"]);if("string"==typeof a&&(a=[a]),this._renderType="dummy",("undefined"==typeof window||window.__OGMA_HEADLESS)&&(a=null),a)for(var d=0;d<a.length;++d){var u=f.renderers[a[d]];if(u===e)$warn("The renderer "+a[d]+" does not exist.");else{if(u.available){this._renderType=a[d];break}$info(d<a.length-1?"The "+(u.infoName||a[d])+" renderer is not available, fallbacking on "+a[d+1]+".":"The "+(u.infoName||a[d])+" renderer is not available.")}"dummy"===this._renderType&&$warn("No valid renderer could be found, rendering will be disabled.")}this.screen.width=s.width,this.screen.height=s.height,this._visibilityConditionTolerance=0,n(this)}function n(e){var t=e._events.newFrame,n=e._events.beforeNewFrame;e._renderer=new f.renderers[e._renderType](e.screen.width,e.screen.height,e._subLayers,{onRender:function(i){e._frameCount+=1,n(i),t(i)},imgCrossOrigin:e._settings.imgCrossOrigin,backgroundColor:e._backgroundColor,antialias:e._settings.webGLAntiAliasing,fontSamplingSize:e._settings.webGLFontSamplingSize,minSvgSize:e._settings.webGLMinimumSVGSize,defaultFont:e._settings.defaultFont}),e._events.reload()}function i(e,t){r(t)}function r(e){if(e._container){var t=!1,n=e._container.clientWidth,i=e._container.clientHeight;n&&i?(e._noDimensions&&(t=!0),e._noDimensions=!1):e._noDimensions=!0;var r=n-e.screen.width,o=i-e.screen.height;e.screen.width=n||1,e.screen.height=i||1,e._renderer.resize(n,i),e._events.resize({width:r,height:o},t)}}function o(e){e._renderer&&e._renderer.refresh()}function s(e,t){var n=e._subLayers[t];if(!n)throw new Error('sub-layer "'+t+'" does not exist.');return n}function a(t){t.x===e&&(t.x=0),t.y===e&&(t.y=0),t.zx===e&&(t.zx=0),t.zy===e&&(t.zy=0),t.ax===e&&(t.ax=0),t.ay===e&&(t.ay=0),t.ox===e&&(t.ox=0),t.oy===e&&(t.oy=0)}function d(e,t){a(e),a(t)}function u(e,t,n){a(e),a(t),a(n)}function l(e,t,n,i){a(e),a(t),a(n),a(i)}function h(e){var t=0===e._cursorStyles.length?e._settings.defaultCursorStyle:e._cursorStyles[e._cursorStyles.length-1];e._container&&(e._container.style.cursor=t)}function c(e){for(var t=0;t<v.length;++t){var n=v[t];if(e[n])return n}return null}function g(){for(var e=0;e<m.length;++e){var t=m[e];if(document[t])return t}return null}var f=$global.Ogma,p={imgCrossOrigin:{default:"anonymous",values:[null,"anonymous","use-credentials"]},backgroundColor:{default:"white",type:"color",values:[null]},defaultCursorStyle:{default:"default",type:"string"},defaultFont:{default:"Arial",type:"string"},webGLAntiAliasing:{default:"super-sampling",values:["super-sampling","native","none"]},webGLFontSamplingSize:{default:64,type:"positive"},webGLMinimumSVGSize:{default:null,type:"positive",values:[null]}};t.settings=p,t.dependencies=["settings","events"],t.onStart=function(e,t){t.container?e.setContainer(t.container):e.container=null},t.onKill=function(e){var t=e._renderer.domElement();e._container&&(t&&e._container.removeChild(t),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("resize",this._windowEvtListeners.resize),window.matchMedia("screen and (min-resolution: 2dppx)").removeListener(this._windowEvtListeners.mediaChange)),e._windowEvtListeners=null)},t.prototype.setContainer=function(e){if("string"==typeof e&&(e=document.getElementById(e)),e!==this._container){var t=this._container,n=this._renderer.domElement();n&&(this._container&&this._container.removeChild(n),e&&e.appendChild(n)),this._container=e,this._container&&(r(this),h(this)),this._events.setContainer(e,t)}},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvas=function(){return this._renderer.domElement()},t.prototype.resize=function(){this._container&&r(this)};var y={x:0,y:0,zoom:1,angle:0};t.prototype.addSubLayer=function(e,t){if(this._subLayers[e])throw new Error("sub-layer "+e+" already exists");t=t||{},this._subLayers[e]={name:e,level:t.level,defineClipSpace:!!t.defineClipSpace,useClipSpace:!!t.useClipSpace,symbolicSizeThreshold:t.symbolicSizeThreshold||0,camera:t.camera||y,disabled:!1,transparency:t.transparency||!1}},t.prototype.type=function(){return this._renderType},t.prototype.changeSubLayerThreshold=function(e,t){s(this,e).symbolicSizeThreshold=t||0,o(this)},t.prototype.getSubLayers=function(){return f.utils.deepCopy(this._subLayers)},t.prototype.atNextFrame=function(e){return this._renderer.atNextFrame(e)},t.prototype.setSubLayerEnabled=function(e,t){s(this,e).disabled=!t,o(this)},t.prototype.setSubLayersEnabled=function(e,t){for(var n=0;n<e.length;++n){s(this,e[n]).disabled=!t}o(this)},t.prototype.animate=function(e,t){this._renderer.animate(e,t)},t.prototype.stopAnimations=function(){this._renderer.stopAnimations()},t.prototype.setAnimationsEnabled=function(e){this._renderer.setAnimationsEnabled(e)},t.prototype.setOffset=function(e){e&&a(e),this._renderer.setOffset(e)},t.prototype.refresh=function(){this._renderer.refresh()},t.prototype.delete=function(e){return this._exportedRenderer?e:this._renderer.delete(e)},t.prototype.setDepth=function(e,t){this._renderer.setDepth(e,t)},t.prototype.hide=function(e){this._renderer.hide?this._renderer.hide(e):this._renderer.setDepth(e,0)},t.prototype.setSymbolicSize=function(e,t){this._renderer.setSymbolicSize(e,t)},t.prototype.setColor=function(e,t){this._renderer.setColor(e,t)},t.prototype.setVisibilityCondition1=function(e,t,n,i,r){this._renderer.setVisibilityCondition1(e,t,n,i,r)},t.prototype.setVisibilityCondition2=function(e,t,n,i,r){this._renderer.setVisibilityCondition2(e,t,n,i,r)},t.prototype.wrappedUpdate=function(e,t,n){return this._exportedRenderer?this._exportedRenderer.wrappedUpdate(-1,t,n):this._renderer.wrappedUpdate(e,t,n)},t.prototype.updateComposite=function(e,t){return this._exportedRenderer?this._exportedRenderer.updateComposite(-1,t):this._renderer.updateComposite(e,t)},t.prototype.composite=function(e,t){return this._exportedRenderer?(this._renderer.composite(-1,t),e):this._renderer.composite(e,t)},t.prototype.circle=function(e,t,n,i,r,o,s,d){return a(t),this._exportedRenderer?(this._exportedRenderer.circle(-1,t,n,i,r,o,s,d),e):this._renderer.circle(e,t,n,i,r,o,s,d)},t.prototype.triangle=function(e,t,n,i,r,o,s,a){return u(t,n,i),this._exportedRenderer?(this._exportedRenderer.triangle(-1,t,n,i,r,o,s,a),e):this._renderer.triangle(e,t,n,i,r,o,s,a)},t.prototype.rectangle=function(e,t,n,i,r,o,s,a){return d(t,n),this._exportedRenderer?(this._exportedRenderer.rectangle(-1,t,n,i,r,o,s,a),e):this._renderer.rectangle(e,t,n,i,r,o,s,a)},t.prototype.quadrilateral=function(e,t,n,i,r,o,s,a,d,u){return l(t,n,i,r),this._exportedRenderer?(this._exportedRenderer.quadrilateral(-1,t,n,i,r,o,s,a,d,u),e):this._renderer.quadrilateral(e,t,n,i,r,o,s,a,d,u)},t.prototype.polygon=function(e,t,n,i,r,o){return this._exportedRenderer?(this._exportedRenderer.polygon(-1,t,n,i,r,o),e):this._renderer.polygon(e,t,n,i,r,o)},t.prototype.line=function(e,t,n,i,r,o,s,a,u){return d(t,n),this._exportedRenderer?(this._exportedRenderer.line(-1,t,n,i,r,o,s,a,u),e):this._renderer.line(e,t,n,i,r,o,s,a,u)},t.prototype.quadraticCurve=function(e,t,n,i,r,o,s,a,d,l){return u(t,n,i),this._exportedRenderer?(this._exportedRenderer.quadraticCurve(-1,t,n,i,r,o,s,a,d,l),e):this._renderer.quadraticCurve(e,t,n,i,r,o,s,a,d,l)},t.prototype.cubicCurve=function(e,t,n,i,r,o,s,a,d,u,h){return l(t,n,i,r),this._exportedRenderer?(this._exportedRenderer.cubicCurve(-1,t,n,i,r,o,s,a,d,u,h),e):this._renderer.cubicCurve(e,t,n,i,r,o,s,a,d,u,h)},t.prototype.image=function(e,t,n,i,r,o,s,a,u){return d(t,n),this._exportedRenderer?(this._exportedRenderer.image(-1,t,n,i,r,o,s,a,u),e):this._renderer.image(e,t,n,i,r,o,s,a,u)},t.prototype.text=function(e,t,n,i,r,o,s,d,u,l,h,c,g,f){return a(t),this._exportedRenderer?(this._exportedRenderer.text(-1,t,n,i,r,o,s,d,u,l,h,c,g,f),e):this._renderer.text(e,t,n,i,r,o,s,d,u,l,h,c,g,f)},t.prototype.textWidth=function(e,t,n,i){return this._exportedRenderer?this._exportedRenderer.textWidth(e,t,n,i):this._renderer.textWidth(e,t,n,i)},t.prototype.enableShadows=function(e,t,n){return this._exportedRenderer?this._exportedRenderer.enableShadows(e,t,n):this._renderer.enableShadows(e,t,n)},t.prototype.disableShadows=function(){return this._exportedRenderer?this._exportedRenderer.disableShadows():this._renderer.disableShadows()},t.prototype.reloadFonts=function(){this._renderer.reloadFonts&&this._renderer.reloadFonts(),this._events.reload()},t.prototype.setCursorStyle=function(e){this._cursorStyles.push(e),h(this)},t.prototype.removeCursorStyle=function(e){var t=this._cursorStyles.lastIndexOf(e);-1!==t&&(this._cursorStyles.splice(t,1),h(this))};var v=["requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],m=["cancelFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"];t.prototype.fullScreen=function(t){if(t===e&&(t=!this._isFullScreen),this._container)if(t){var n=c(this._container);n&&this._container[n]()}else this._isFullScreen&&(n=g(),document[n]());this._isFullScreen=t},t.prototype.setVisibilityConditionTolerance=function(e){this._visibilityConditionTolerance=e,this._renderer.setVisibilityConditionTolerance(e)},t.prototype.clear=function(){this._renderer.clear(),this._renderer.refresh()},t.prototype.isFullScreen=function(){return this._isFullScreen},t.prototype.export=function(t,n,i,r,o){var s=new t(n,i,this._subLayers,{noRefresh:!0,backgroundColor:r}),a=this.screen.width,d=this.screen.height;return s.setVisibilityConditionTolerance=this._visibilityConditionTolerance,this._exportedRenderer=s,this.screen.width=n,this.screen.height=i,this._events.export(),o&&o(),s.render(),this._exportedRenderer=e,this.screen.width=a,this.screen.height=d,0===this._frameCount&&this._events.reload(),s},t.prototype.setBackgroundColor=function(e){var t=this._backgroundColor;return this._backgroundColor=e,this._renderer.setBackgroundColor(e),this.refresh(),t},t.prototype.getbackgroundColor=function(){return this._backgroundColor},f.modules.render=t}.call(),function(e){function t(e){this._ogma=e}var n=$global.Ogma;t.prototype.to=function(e,t){var i=this._ogma;return new Promise(function(r,o){var s=n.exports[e];if(!s)throw new Error(e+" is not a valid exporter.");t=t?"function"==typeof t?{callback:t}:n.utils.deepCopy(t):{};var a=function(i,o){if(!i)throw new Error("exporting to "+e+" gave empty result");var s="undefined"!=typeof window&&$or(t.download,!t.callback),a=t.filename||"graph."+e;o=o||"text",s&&n.utils.download(i,a,o),t.callback&&t.callback(i,o),r(i,o)};i.geo.isEnabled()?i.geo.whenReady(function(){s(i,a,t)}):setTimeout(function(){return s(i,a,t)})})},n.modules.exports=t}.call(),function(){function e(e){var t=this;this._ogma=e,this._drawing=e.drawing,this._texts=e.texts,this._tasks=e.tasks,this._settings=e.settings.get("layouts",!0),this._events=e.events.create("layout.",["start","end"]),this._currentLayout=null,e.events.bind({"graph.clear":function(){return t.stop()}})}function t(e,t){var n=e.length,i=new Float32Array(n),r=new Float32Array(n),o=new Uint32Array(n),s=new Uint8Array(n),a=t.nodeAttributes,d=a.x,u=a.y,l=a.pinned,h=t._maps.nodes;return e.forEach(function(e,t){var n=h.get(e),a=n.__index;o[t]=a,i[t]=d[a],r[t]=u[a],s[t]=l[a]}),{x:i,y:r,indexes:o,ids:e,pinned:s,size:n}}var n=$global.Ogma;e.settings={defaultSyncDuration:{default:500,type:"positive"},skipTextDrawing:{default:!0,type:"boolean"},useWebWorker:{default:!0,type:"boolean"}},e.dependencies=["graph","render","animations","drawing","texts","tasks"],e.layouts=Object.create(null),e.prototype.start=function(e,t,i){var r=this,o=n.layouts[e],s=this._settings,a=this;return new Promise(function(d){if(!o)throw new Error("layout "+e+" does not exist");r._currentLayout&&r._currentLayout.stop(),t=$or(t,{}),i="function"==typeof i?{onEnd:i}:$or(i,{});var u="number"==typeof i.duration?i.duration:s.defaultSyncDuration,l=o.onSync,h=i.onSync,c=0;t.nodeTextsWereEnabled=r._texts.isNodeTextDrawingEnabled(),t.edgeTextsWereEnabled=r._texts.isEdgeTextDrawingEnabled(),t.name=e;var g={update:o.update,isRunning:o.isRunning,configure:o.configure,context:o.context,dependencies:o.dependencies,onStart:function(){a.onStart(o,t,this)},onUpdate:function(e,t,i,r){var o=this,d=n.utils.now();r&&d-c<40||(c=d,h&&setTimeout(function(){return h(e,i,r)},u),s.skipTextDrawing&&a._texts.setTextDrawing(!1),l?a._drawing.animate(function(){a._drawing.redrawEverything(),l(e,t,i,r)},u,function(){r||o.fire("complete")}):r||this.fire("complete"))},onEnd:function(e,n){this.once("complete",function(){a.onComplete(e,o,t,n,d,i.onEnd)})}};r._currentLayout=r._tasks.run(g,t,$or(i.useWebWorker,r._settings.useWebWorker))})},e.prototype.onComplete=function(e,n,i,r,o,s){var a=this._settings;n.onEnd&&(n.onEnd(e,r,this._ogma,!1),this._drawing.redrawEverything()),a.skipTextDrawing&&(i.nodeTextsWereEnabled&&this._texts.setNodeTextDrawing(!0),i.edgeTextsWereEnabled&&this._texts.setEdgeTextDrawing(!0)),this._currentLayout=null;var d=i.nodeData.ids,u=t(d,this._ogma.graph),l=i.nodeData;this._events.end(i.name,{x:u.x,y:u.y},{x:l.x,y:l.y},d,l.indexes),setTimeout(function(){s&&s(),o()})},e.prototype.onStart=function(e,n,i){var r=this._ogma.graph,o=r.getNodeIdList(n.nodes||this._ogma.nodes),s=t(o,r);n.nodeData=s,this._events.start(n.name,o,i,s.indexes)},e.prototype.stop=function(){this._currentLayout&&(this._currentLayout.stop(),this._currentLayout=null)},e.prototype.isRunning=function(){return!!this._currentLayout},n.modules.layouts=e}(),function(e){function t(e){var t=this;this._settings=e.settings.get("drawing",!0),this._events=e.events.create("drawing.",["nodes","edges","nodesVisibilityChange","edgesVisibilityChange","everything","before","after"]),this._renderer=e.render,this._camera=e.camera,this._topology=e.topology,this._graph=e.graph,this._graph.addCommonAttributes({baseDepth:Float32Array,depth:Float32Array,symbolicSize:Float32Array,layers:Array,visible:Int8Array,toDraw:Int8Array,visibilityChanged:Int8Array}),this.EPSILON=x;var d=this._graph.nodeAttributes,u=this._graph.edgeAttributes;this._graph.addNodeReadOnlyProperty("layers",function(e){return d.layers[e.__index]},!1),this._graph.addEdgeReadOnlyProperty("layers",function(e){return u.layers[e.__index]},!1),this.MIN_DEPTH=x,this.MAX_EDGE_Z=A,this._nodeSubLayers={},this._edgeSubLayers={},this._nextEdgeZ=4*x,this._nextNodeZ=w/2*x+x,this._nodeVisibilityConditions=[],this._edgeVisibilityConditions=[],this._animations=[],this._animationsToProcess=[],this._layers={},this._defaultCamera={x:0,y:0,angle:0,zoom:1},this._sortLayerFunction=function(e,n){return t._layers[n].value-t._layers[e].value},this._nodeComponentAttributes=[],this._edgeComponentAttributes=[],this._nodeComponentFixedDepths={},this._edgeComponentFixedDepths={},this._nodeComponentExceptions={},this._edgeComponentExceptions={},this._redrawElementFunction=function(e,n,i){i&&t.redraw(e)},this._eltsToDraw=$dual(Array),this._visibilityChanged=$dual(Array),this._drawEverything=!1,this._updateAllVisibility=!1,this._renderer.setVisibilityConditionTolerance(this._settings.edgeClippingPadding),this.addLayer("floor",$C("layer","floor")),this._draw=function(){i(t)},this.addNodeVisualProperty("x",{type:"number"},0),this.addNodeVisualProperty("y",{type:"number"},0),this.addNodeVisualProperty("size",{type:"number"},this._settings.defaultNodeSize,function(e){a(t,e)}),this.addEdgeVisualProperty("size",{type:"number"},this._settings.defaultEdgeSize,function(e){a(t,e)}),this.addCommonVisualProperty("hidden",{values:[!0,!1]},!1,function(e){s(t,e)}),this._graph.addEdgeReadOnlyProperty("visible",function(e){return!!u.visible[e.__index]},!1),this._graph.addNodeReadOnlyProperty("visible",function(e){return!!d.visible[e.__index]},!1),e.events.bind({"graph.addNodes":function(e){r(t,!0,e)},"graph.addEdges":function(e){r(t,!1,e)},"graph.removeNodes":function(e){o(t,!0,e)},"graph.removeEdges":function(e){o(t,!1,e)},"graph.startInit":function(){t._drawEverything=!0},"graph.clear":function(){t._visibilityChanged=$dual(Array),t._eltsToDraw=$dual(Array),t._nextEdgeZ=x,t._nextNodeZ=w/2*x+x,t._renderer.clear()},"camera.move":function(){var e={x:t._renderer.screen.width/2/t._camera.zoom,y:t._renderer.screen.height/2/t._camera.zoom};_.geometry.rotate(e.x,e.y,0,0,t._camera.angle,e),t._defaultCamera.x=t._camera.x-e.x,t._defaultCamera.y=t._camera.y-e.y,t._defaultCamera.angle=t._camera.angle,t._defaultCamera.zoom=t._camera.zoom,t._renderer.refresh()},"render.newFrame":function(){if(i(t),t._animationsToProcess.length){var e=t._animationsToProcess.slice();t._animationsToProcess=[];for(var r=0;r<e.length;++r){var o=e[r];t._animations.push(o),o.timeout=setTimeout(n(t,o),o.duration),o.func(),t._renderer.animate(o.duration,t._draw)}}},"render.reload":function(){t.redrawEverything()},"render.export":function(){t.redrawEverything(!0)}}),this.addNodeVisibilityCondition(function(e){return!d.hidden[e.__index]}),this.addEdgeVisibilityCondition(function(e){return!u.hidden[e.__index]}),this.addEdgeVisibilityCondition(function(e){return!e.__source.hidden&&!e.__target.hidden}),this._renderer.refresh()}function n(e,t){return function(){var n=e._animations.indexOf(t);-1!==n&&e._animations.splice(n,1),t.callback&&t.callback()}}function i(e){d(e,!0),d(e,!1);var t=e._drawEverything||e._eltsToDraw.nodes.length||e._eltsToDraw.edges.length,n=e._graph._elts.nodes.attributes.toDraw,i=e._graph._elts.edges.attributes.toDraw,r=e._eltsToDraw.nodes,o=e._eltsToDraw.edges;if(e._events.before(),e._visibilityChanged=$dual(Array),e._eltsToDraw=$dual(Array),e._drawEverything)n.fill(0),i.fill(0),h(e,e._graph.getNodeList()),c(e,e._graph.getEdgeList()),e._events.everything();else{for(var s=0;s<r.length;++s)n[r[s].__index]=0;for(s=0;s<o.length;++s)i[o[s].__index]=0;h(e,r),c(e,o)}e._updateAllVisibility||e._drawEverything?(l(e,!0,e._graph.nodes),l(e,!1,e._graph.edges)):(l(e,!0,r),l(e,!1,o)),e._updateAllVisibility=!1,e._drawEverything=!1,t&&e._events.after()}function r(e,t,n){for(var i=e._graph.attributes(t),r=e[t?"_nextNodeZ":"_nextEdgeZ"],o=e[t?"_nodeComponentAttributes":"_edgeComponentAttributes"],s=i.layers,a=i.baseDepth,d=i.depth,u=i.visible,l=i.symbolicSize,h=i.size,c=i.toDraw,g=i.visibilityChanged,f=t?E:A,p=o.map(function(e){return i[e]}),y=p.length,v=n.length,m=0;m<v;++m){var _=n[m],b=_.__index;s[b]=["floor"],a[b]=r,d[b]=r,u[b]=!0,l[b]=h[b],c[b]=0,g[b]=0,r<f&&(r+=x);for(var w=0;w<y;++w)p[w][b]=-1}e[t?"_nextNodeZ":"_nextEdgeZ"]=r,e.redraw(n)}function o(t,n,i){for(var r=t._graph.attributes(n),o=t._renderer,s=t[n?"_nodeComponentAttributes":"_edgeComponentAttributes"],a=r.layers,d=r.toDraw,u=r.visibilityChanged,l=s.map(function(e){return r[e]}),h=l.length,c=t._eltsToDraw.fetch(n),g=t._visibilityChanged.fetch(n),f=0,p=i.length;f<p;++f){var y=i[f],v=y.__index;d[v]&&$rm(c,y),g[v]&&$rm(g,y),a[v]=e,d[v]=0,u[v]=0;for(var m=0;m<h;++m)l[m][v]=o.delete(l[m][v])}t._renderer.refresh()}function s(e,t){if(!e._drawEverything&&!e._updateAllVisibility){if(!(t instanceof Array))return s(e,[t]);if(t.length){for(var n=t[0].isNode,i=e._graph._elts.fetch(n),r=i.attributes.visibilityChanged,o=i.attributes.edges,a=e._visibilityChanged.fetch(n),d=t.length,u=0;u<d;++u){var l=t[u],h=l.__index;if(!r[h]&&(r[h]=1,a.push(l),n)){var c=o[h];c.length&&s(e,c)}}e.redraw(t)}}}function a(e,t){p(e,t),e.redraw(t)}function d(e,t){var n=e._graph.attributes(t).visibilityChanged,i=e._graph.attributes(t).visible;if(e._drawEverything||e._updateAllVisibility){for(var r=e._graph[t?"getNodeList":"getEdgeList"](),o=0,s=r.length;o<s;++o){var a=r[o];i[a.__index]=f(e,a)}return e._events[t?"nodesVisibilityChange":"edgesVisibilityChange"](r),n.fill(0),!0}if(r=e._visibilityChanged.fetch(t),r.length){for(o=0,s=r.length;o<s;++o){a=r[o];var d=a.__index;i[d]=f(e,a),n[d]=0}return e._events[t?"nodesVisibilityChange":"edgesVisibilityChange"](r),!0}return!1}function u(e,t){var n=e?E:A;return t-t%n+n}function l(e,t,n){if(n.length)for(var i=e._graph.attributes(t),r=e[t?"_nodeComponentAttributes":"_edgeComponentAttributes"],o=e[t?"_nodeComponentFixedDepths":"_edgeComponentFixedDepths"],s=e[t?"_nodeComponentExceptions":"_edgeComponentExceptions"],a=i.visible,d=i.baseDepth,l=i.layers,h=e._layers,c=i.depth,g=e._renderer,f=r.map(function(e){return i[e]}),p=f.length,y=0,v=n.length;y<v;++y){var m=n[y],_=m.__index,b=a[_],x=l[_][0],w=h[x],A=d[_]+w.value;c[_]=b?A:-1;for(var E=0;E<p;++E){var C=r[E];if(b){if(!s[C]||"floor"!==x){var S=o[C]||A;"top-layer"===S&&(S=u(t,A)),g.setDepth(f[E][_],S)}}else g.hide(f[E][_])}}}function h(e,t){t.length&&e._events.nodes(t)}function c(e,t){if(t.length){e._events.edges(t);var n=e._graph.edgeAttributes,i=e._graph.nodeAttributes,r=i.x,o=i.y,s=i.size,a=e._edgeComponentAttributes.map(function(e){return n[e]});if(e._settings.edgeClipping)for(var d=0,u=t.length;d<u;++d)for(var l=t[d],h=l.__index,c=l.__sourceIndex,g=l.__targetIndex,f=r[c],p=o[c],y=s[c],v=r[g],m=o[g],_=s[g],b=0,x=a.length;b<x;++b){var w=a[b][h];e._renderer.setVisibilityCondition1(w,!0,f,p,y),e._renderer.setVisibilityCondition2(w,!0,v,m,_)}}}function g(e,t){var n=e._layers[t];if(!n)throw new Error("Layer "+t+" does not exist.");return n}function f(e,t){for(var n=e[t.isNode?"_nodeVisibilityConditions":"_edgeVisibilityConditions"],i=0;i<n.length;++i)if(!n[i](t))return!1;return!0}function p(e,t){var n=t.isNode,i=t.__index,r=e._graph.attributes(n),o=v(e,t),s=o.disableThreshold?-1:r.size[i];r.symbolicSize[i]=s}function y(e,t){p(e,t),e.redraw(t)}function v(e,t){return e._layers[t.layers[0]]}function m(e,t,n){for(var i=e[t?"_nodeSubLayers":"_edgeSubLayers"],r=Object.keys(i),o=0;o<r.length;++o)e._renderer.setSubLayerEnabled(r[o],n)}var _=$global.Ogma,b={defaultNodeSize:{default:5,type:"positive"},defaultEdgeSize:{default:1,type:"positive"},edgeClipping:{default:!0,type:"boolean"},edgeClippingPadding:{default:100,type:"positive"}},x=_.constants.EPSILON,w=Math.pow(2,18),A=(Math.pow(2,_.constants.MAX_POW-18),w/2*x),E=w*x,C=w*x;t.settings=b,t.dependencies=["render","camera","graph"],t.prototype.animate=function(e,t,n){if("function"!=typeof e)throw new TypeError(e+" is not a function");if("number"!=typeof t)throw new TypeError(t+" is not a number");this._animationsToProcess.push({duration:t,func:e,callback:n}),this._renderer.refresh()},t.prototype.stopAnimations=function(e){e=$or(e,!0),this._renderer.stopAnimations();var t=this._animations.slice();this._animations=[];for(var n=0;n<t.length;++n){var i=t[n];i.callback&&e&&i.callback(),i.timeout&&clearTimeout(i.timeout)}},t.prototype.isAnimating=function(){return this._animations.length>0},t.prototype.redrawEverything=function(e){this._drawEverything=!0,e?i(this):this._renderer.refresh()},t.prototype.updateAllVisibility=function(){this._updateAllVisibility=!0,this._renderer.refresh()},t.prototype.redraw=function(e){if(!this._drawEverything){if(e instanceof Array){if(!e.length)return;for(var t=e[0].isNode,n=this._graph._elts.fetch(t),i=n.attributes.toDraw,r=n.attributes.edges,o=this._eltsToDraw.fetch(t),s=e.length,a=0;a<s;++a){var d=e[a],u=d.__index;if(!i[u]&&(o.push(d),i[u]=1,t)){var l=r[u];l.length&&this.redraw(l)}}}else this.redraw([e]);this._renderer.refresh()}},t.prototype.topOfLayer=u,t.prototype.addVisibilityCondition=function(e,t){e?this._nodeVisibilityConditions.push(t):this._edgeVisibilityConditions.push(t)},t.prototype.addCommonVisibilityCondition=function(e){this._nodeVisibilityConditions.push(e),this._edgeVisibilityConditions.push(e)},t.prototype.addNodeVisibilityCondition=function(e){this._nodeVisibilityConditions.push(e)},t.prototype.addEdgeVisibilityCondition=function(e){this._edgeVisibilityConditions.push(e)},t.prototype.addVisualProperty=function(e,t,n,i,r){r=r||this._redrawElementFunction,this._graph.addProperty(e,t,n,i,r)},t.prototype.addNodeVisualProperty=function(e,t,n,i){this.addVisualProperty(!0,e,t,n,i)},t.prototype.addEdgeVisualProperty=function(e,t,n,i){this.addVisualProperty(!1,e,t,n,i)},t.prototype.addCommonVisualProperty=function(e,t,n,i){this.addVisualProperty(!0,e,t,n,i),this.addVisualProperty(!1,e,t,n,i)},t.prototype.addVisualComponent=function(e,t,n,i){this._graph._elts.fetch(e).addAttribute(t,Int32Array),this[e?"_nodeComponentAttributes":"_edgeComponentAttributes"].push(t),this[e?"_nodeComponentFixedDepths":"_edgeComponentFixedDepths"][t]=n,this[e?"_nodeComponentExceptions":"_edgeComponentExceptions"][t]=i},t.prototype.addNodeVisualComponent=function(e,t,n){this.addVisualComponent(!0,e,t,n)},t.prototype.addEdgeVisualComponent=function(e,t,n){this.addVisualComponent(!1,e,t,n)},t.prototype.addCommonVisualComponent=function(e,t,n){this.addVisualComponent(!0,e,t,n),this.addVisualComponent(!1,e,t,n)},t.prototype.isVisible=function(e){return f(this,e)},t.prototype.updateVisibility=function(e){s(this,e)},t.prototype.addSubLayer=function(e,t,n){"number"==typeof n&&(n={level:n}),n.camera=$or(n.camera,this._defaultCamera),this[e?"_nodeSubLayers":"_edgeSubLayers"][t]=n,this._renderer.addSubLayer(t,n)},t.prototype.addNodeSubLayer=function(e,t){this.addSubLayer(!0,e,t)},t.prototype.addEdgeSubLayer=function(e,t){this.addSubLayer(!1,e,t)},t.prototype.changeSubLayerThreshold=function(e,t){this._renderer.changeSubLayerThreshold(e,t)},t.prototype.addLayer=function(e,t,n){if(this._layers[e])throw new Error("layer "+e+" already exists.");t=$or(t,{}),n=$or(n,{}),"number"==typeof t&&(t={level:t}),this._layers[e]={value:C*t.level,disableThreshold:$or(t.disableThreshold,!1),data:n}},t.prototype.editLayer=function(e,t){var n=g(this,e);t=t||{},_.utils.forEach(t,function(e,t){n.data[t]=e})},t.prototype.bindValueToLayer=function(e,t,n){g(this,e).data[t]=n},t.prototype.getElementProperty=function(t,n){var i=t.__index,r=t.isNode,o=this._graph.attributes(r);if(o[n]&&o[n][i]!==e)return o[n][i];for(var s=o.layers[i],a=0;a<s.length;++a){var d=this._layers[s[a]],u=d.data[n];if(u!==e)return u}return e},t.prototype.putElementOnLayer=function(e,t){if(!this._layers[t])throw new Error("layer "+t+" does not exist");var n=e.layers;return!(!n||-1!==n.indexOf(t)||(n.push(t),n.sort(this._sortLayerFunction),y(this,e),0))},t.prototype.removeElementFromLayer=function(e,t){var n=e.layers;if(n){var i=n.indexOf(t);return-1!==i&&(n.splice(i,1),y(this,e),!0)}},t.prototype.removeFromLayer=t.prototype.removeElementFromLayer,t.prototype.putNodeOnLayer=function(e,t){this.putElementOnLayer(e,t)},t.prototype.putEdgeOnLayer=function(e,t){this.putElementOnLayer(e,t)},t.prototype.removeNodeFromLayer=function(e,t){this.removeElementFromLayer(e,t)},t.prototype.removeEdgeFromLayer=function(e,t){this.removeElementFromLayer(e,t)},t.prototype.setNodeDrawing=function(e){m(this,!0,e)},t.prototype.setEdgeDrawing=function(e){m(this,!1,e)},_.modules.drawing=t}.call(),function(e){function t(e){var t=this;this._graph=e.graph,this._graph.addNodeProperty("pinned",{values:[!0,!1]},!1,function(e,i){return n(t,e,i)}),this._pinnedNodes=[],e.events.bind({"graph.clear":function(){t.pinnedNodes=[]}})}function n(e,t,n){var i=e._pinnedNodes.indexOf(t);n&&-1===i?e._pinnedNodes.push(t):n||-1===i||e._pinnedNodes.splice(i,1)}var i=$global.Ogma;t.dependencies=["graph"],t.prototype.getPinnedNodes=function(){return this._pinnedNodes.slice()},t.prototype.getUnpinnedNodes=function(){for(var e=this._graph.attributes(!0).pinned,t=this._graph.nodes,n=[],i=0,r=t.length;i<r;++i){var o=t[i];e[o.__index]||n.push(o)}return n},i.modules.pinning=t}.call(),function(e){function t(e){this._graph=e.graph,this._locate=e.locate,this._camera=e.camera,this._render=e.render,this._settings=e.settings.get("imports",!0)}function n(e){if(0===e.indexOf("http://")||0===e.indexOf("https://"))return e;var t=window.location.origin,n=window.location.pathname,i=n.lastIndexOf("/");return t+=-1===i?"/"+e:n.substr(0,i)+"/"+e}function i(e,t,i,r,s,d){var u=["var importer = "+t.toString()+";",'var file = "'+n(i)+'";',"var xhr = new XMLHttpRequest();",'xhr.open("GET", file, true);',"xhr.onreadystatechange = function () {",'  if (xhr.readyState === 4 && xhr.responseText !== "") {',"    var graph = importer(xhr.responseText, function () {});","    self.postMessage(graph);","  }","}","xhr.send();"].join("\n");a.utils.createWorker(u).addEventListener("message",function(t){o(e,t.data,r,s,d)})}function r(e,t,n,i,r,s){var a=new XMLHttpRequest;a.open("GET",n,!0),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){$log("Parsing "+n+"...");var d=t(a.responseText);$log("Processing graph ("+d.nodes.length+" nodes & "+d.edges.length+" edges)..."),o(e,d,i,r,s)}},a.onerror=function(){onRetrieval(!1)},a.send()}function o(e,t,n,i,r){if(t){n(t);var o=t.nodes,a=t.edges;if(e._graph.clear(),r){var d=0,u=r,l=0,h=r,c=s(t);e._camera.loadConfig({x:c.cx,y:c.cy,zoom:Math.min(e._camera.width/c.width,e._camera.height/c.height),angle:0});!function t(){d<o.length?(e._graph.addNodes(o.slice(d,u)),d=u,u+=r,e._render.atNextFrame(t)):l<a.length?(e._graph.addEdges(a.slice(l,h)),l=h,h+=r,e._render.atNextFrame(t)):(e._render.atNextFrame(function(){return $log("Done.")}),i(!0))}()}else e._graph.init(o,a),e._render.atNextFrame(function(){return $log("Done.")}),e._locate.center(),i(!0)}else i&&i(!1)}function s(e){for(var t=e.nodes,n=1/0,i=1/0,r=-1/0,o=-1/0,s=0;s<t.length;++s){var a=t[s],d=a.x,u=a.y,l=a.size;n=Math.min(n,d-l),i=Math.min(i,u-l),r=Math.max(r,d+l),o=Math.max(o,u+l)}return{minX:n,minY:i,maxX:r,maxY:o,cx:n+(r-n)/2,cy:i+(o-i)/2,width:r-n,height:o-i}}var a=$global.Ogma;t.dependencies=["graph","locate","drawing"],t.settings={webWorker:{default:!0,type:"boolean"},defaultBatchSize:{default:0,type:"positive"}};var d=function(){},u={};t.onStart=function(e,t){"string"==typeof t.graph&&(-1!==t.graph.search(".gexf")?e.from("gexf",t.graph):-1!==t.graph.search(".json")&&e.from("json",t.graph))},t.prototype.from=function(e,t,n){var o=this;n="function"==typeof n?{onEnd:n}:n||u;var s=this,l=n.onEnd||d,h=n.preProcess||d,c=$or(n.batchSize,s._settings.defaultBatchSize);return new Promise(function(n,d){var u=a.imports[e];if(!u)throw new Error(e+" is not a valid importer.");var g=function(e){l(e),e?n():d()};o._settings.webWorker&&u.webWorkerCompatible?i(s,u,t,h,g,c):r(s,u,t,h,g,c)})},t.prototype.parseFile=function(e,t,n){var i=a.imports[e];if(!i)throw new Error(e+" is not a valid importer.");var r=new XMLHttpRequest;r.open("GET",t,!0),r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=i(r.responseText);n(e)}},r.onerror=function(){n(null)},r.send()},a.modules.imports=t}.call(),function(e){function t(e){this._graph=e.graph,this._nodeProps=Object.create(null),this._edgeProps=Object.create(null);var t=this;e.events.bind({"graph.addNodes":function(e){n(t,!0,e)},"graph.addEdges":function(e){n(t,!1,e)},"graph.nodeDataChange":function(e){n(t,!0,e)},"graph.edgeDataChange":function(e){n(t,!1,e)},"graph.clear":function(){n(t,!0),n(t,!1)}})}function n(e,t,n){for(var r=e[t?"_nodeProps":"_edgeProps"],o=Object.keys(r),s=0;s<o.length;++s){var a=o[s],d=r[a];d&&i(d,a,n)}}function i(t,n,i,r){var s=i?t.min:e,a=i?t.max:e;if(i)for(var d=i.length,u=0;u<d;++u){var l=i[u],h=+o.utils.strToObjectRef(l,n);isNaN(h)||((s===e||h<s)&&(s=h),(a===e||h>a)&&(a=h))}if(!r&&(s!==t.min||a!==t.max))for(var c=t.watchers.slice(),g=0;g<c.length;++g)c[g](s,a);t.min=s,t.max=a}function r(e,t,n,r){var o=e[t?"_nodeProps":"_edgeProps"],s=e._graph[t?"nodes":"edges"],a=o[n];return o[n]||(a={watchers:[]},o[n]=a),a.watchers.push(r),i(a,n,s,!0),{min:a.min,max:a.max,kill:function(){return e.stopWatchProperty(t,n,r),null}}}var o=$global.Ogma;t.dependencies=["graph"],t.prototype.watchNodeProperty=function(e,t){return this.watchProperty(!0,e,t)},t.prototype.watchEdgeProperty=function(e,t){return this.watchProperty(!1,e,t)},t.prototype.watchProperty=function(e,t,n){return r(this,e,t,n)},t.prototype.stopWatchNodeProperty=function(e,t){return this.stopWatchProperty(!0,e,t)},t.prototype.stopWatchEdgeProperty=function(e,t){return this.stopWatchProperty(!1,e,t)},t.prototype.getPropertyBoundaries=function(e,t){var n=this[e?"_nodeProps":"_edgeProps"][t]||{};return{min:n.min||0,max:n.max||0}},t.prototype.stopWatchProperty=function(t,n,i){var r=this[t?"_nodeProps":"_edgeProps"][n];if(r){var o=r.watchers.indexOf(i);-1!==o&&(r.watchers.splice(o,1),0===r.watchers.length&&(this[t?"_nodeProps":"_edgeProps"][n]=e))}},o.modules.watcher=t}.call(),function(e){function t(t){var r=this,s=this;this._render=t.render,this._mouse=t.mouse,this._camera=t.camera,this._exclusives=t.exclusives,this._events=t.events.create("tooltip.",["show","hide"]),this._settings=t.settings.get("tooltip",!0),this.position={x:0,y:0},this._screen=this._render.screen,this._container=null,this._tooltip=null,this._elt=e,this._hover=!1,this._handlers={};var a=o.utils.createDelayer();this._show=this._exclusives.create({priority:$C("interaction","showTooltip"),check:function(t,n,i,r,o){return s._handlers[t]?!(s._elt===n&&!o&&(s._elt=e,1)):(o||(s._elt=e),!1)},handler:function(t,i,r,o,d){a.fire(function(){var a=s._handlers[t],u=i?a(i,r,o):a(r,o);n(s,u,r,o),s._hover=d,s._elt=d?e:i},d?s._settings.hoverDelay:0)}});var d=function(){return s._elt=e,!1},u=function(e){a.stop(),s._tooltip&&s._hover===e&&i(s)};t.events.bind({"render.setContainer":function(e){return s._container=e},"captor.clickNode":function(e,t,n){return r._show("clickNode",e,t,n,!1)},"captor.rightClickNode":function(e,t,n){return r._show("rightClickNode",e,t,n,!1)},"captor.doubleClickNode":function(e,t,n){return r._show("doubleClickNode",e,t,n,!1)},"captor.hoverNode":function(e,t,n){return r._show("hoverNode",e,t,n,!0)},"captor.clickEdge":function(e,t,n){return r._show("clickEdge",e,t,n,!1)},"captor.rightClickEdge":function(e,t,n){return r._show("rightClickEdge",e,t,n,!1)},"captor.doubleClickEdge":function(e,t,n){return r._show("doubleClickEdge",e,t,n,!1)},"captor.hoverEdge":function(e,t,n){return r._show("hoverEdge",e,t,n,!0)},"captor.clickBackground":function(e,t){return r._show("clickBackground",null,e,t,!1)},"captor.rightClickBackground":function(e,t){return r._show("rightClickBackground",null,e,t,!1)},"captor.doubleClickBackground":function(e,t){return r._show("doubleClickBackground",null,e,t,!1)},"captor.down captor.rightDown":function(){return u(!1)},"captor.unhoverNode captor.unhoverEdge":function(){return u(!0)},"captor.startDrag":d,"captor.startRightDrag":d})}function n(e,t,n,r){i(e);var o=e._settings.className,a=e._settings.position,d=s[a];"string"==typeof t?(e._tooltip=document.createElement("div"),e._tooltip.innerHTML=t):e._tooltip=t,e._container.appendChild(e._tooltip),e._tooltip.style.position="absolute",e._tooltip.style.visibility="hidden",o&&(e._tooltip.className+=e._tooltip.className?" "+o:o),e._tooltip.addEventListener("mousemove",function(e){return e.stopPropagation()}),e._tooltip.addEventListener("mousedown",function(e){return e.stopPropagation()}),e._tooltip.addEventListener("mouseup",function(e){return e.stopPropagation()}),e._tooltip.addEventListener("touchstart",function(e){return e.stopPropagation()}),e._tooltip.addEventListener("touchend",function(e){return e.stopPropagation()}),e._timeout=setTimeout(function(){var t=e._tooltip.offsetWidth,i=e._tooltip.offsetHeight,o=n+d.x*t,s=r+d.y*i;if(e._settings.autoAdjust){var u=0;o<0?o=0:o+t>e._screen.width?o=e._screen.width-t:u+=1,s<0?s=0:s+i>e._screen.height?s=e._screen.height-i:u+=1,2===u&&(e._tooltip.className+=e._tooltip.className?" "+a:a)}else e._tooltip.className+=e._tooltip.className?" "+a:a;e.position.x=o,e.position.y=s,e._tooltip.style.visibility="visible",e._tooltip.style.left=o+"px",e._tooltip.style.top=s+"px",e._timeout=null,e._events.show(e._tooltip)},0)}function i(e,t){t=t||0,e._timeout&&(clearTimeout(e._timeout),e._timeout=null);var n=function(){e._tooltip&&e._container&&(e._container.removeChild(e._tooltip),e._events.hide(e._tooltip)),e._tooltip=null};0===t?n():setTimeout(n,t)}function r(e,t,n){e._handlers[t]=n}var o=$global.Ogma,s={top:{x:-.5,y:-1},bottom:{x:-.5,y:0},left:{x:-1,y:-.5},right:{x:0,y:-.5},center:{x:-.5,y:-.5}},a=Object.keys(s);t.settings={position:{default:"top",values:a},autoAdjust:{default:!0,type:"boolean"},hoverDelay:{default:100,type:"positive"},className:{default:null,type:"string",values:[null]}},t.dependencies=["render","mouse","camera","captor"],t.prototype.onNodeHover=function(e){r(this,"hoverNode",e)},t.prototype.onEdgeHover=function(e){r(this,"hoverEdge",e)},t.prototype.onNodeClick=function(e){r(this,"clickNode",e)},t.prototype.onEdgeClick=function(e){r(this,"clickEdge",e)},t.prototype.onBackgroundClick=function(e){r(this,"clickBackground",e)},t.prototype.onNodeRightClick=function(e){r(this,"rightClickNode",e)},t.prototype.onEdgeRightClick=function(e){r(this,"rightClickEdge",e)},t.prototype.onBackgroundRightClick=function(e){r(this,"rightClickBackground",e)},t.prototype.onNodeDoubleClick=function(e){r(this,"doubleClickNode",e)},t.prototype.onEdgeDoubleClick=function(e){r(this,"doubleClickEdge",e)},t.prototype.onBackgroundDoubleClick=function(e){r(this,"doubleClickBackground",e)},t.prototype.hide=function(){i(this)},t.prototype.isShown=function(){return!!this._tooltip},o.modules.tooltip=t}.call(),function(){function e(e,r){var o=this;this._moduleList=e.modules.slice(),this._events=e.events.create("settings.",this._moduleList),this._settings=Object.create(null),this._toUpdate=Object.create(null);var s=r.settings||{};l.utils.forEach(s,function(e,n){return t(o,n,h)},this),this._moduleList.forEach(function(e){var t=s[e];n(e,t,h),this._settings[e]=i(e,t,null,h)},this)}function t(e,t,n){if(n=n||"",-1===e._moduleList.indexOf(t))throw new Error(n+'unknown module name "'+t+'". List of available modules:\n* '+e._moduleList.join("\n* "))}function n(e,t,n){if(t){n=n||"";var i=Object.keys(l.modules[e].settings||{});l.utils.forEach(t,function(t,r){if(-1===i.indexOf(r))throw new Error(n+'unknown setting name "'+r+'" for module "'+e+'". List of available settings:\n* '+i.join("\n* "))})}}function i(e,t,n,i){var o=l.modules[e].settings;return t=t||{},n=n||{},i=i||"",o&&l.utils.forEach(o,function(t,i){if(!$isObj(t))throw new TypeError("setting definition "+t+" (setting "+i+", module "+e+") should be an object");n[i]=t.default}),l.utils.forEach(t,function(e,t){n[t]=e}),l.utils.forEach(n,function(t,n){r(e,n,t,i)}),n}function r(e,t,n,i){var r=l.modules[e].settings[t],o=l.types.check(n,r);if(o)throw new TypeError(i+'module "'+e+'": setting "'+t+'": invalid value '+n+", "+o+".")}function o(e,t,n){n=n||{},d(e,t,n);var i={},o=[],s=e._settings[t];return l.utils.forEach(n,function(e,n){r(t,n,e);var a=s[n];i[n]=a,s[n]=e,a!==e&&o.push(n)}),u(e,t),e._events[t](o),i}function s(e,t,n){n=n||{},d(e,t,n);for(var i=l.utils.shallowCopy(n),r=l.modules[t].settings||{},s=Object.keys(r),u=0;u<s.length;++u){var h=s[u];i.hasOwnProperty(h)||(i[h]=a(t,h))}o(e,t,i)}function a(e,t){var n=l.modules[e].settings[t];return $isObj(n)?n.default:n}function d(e,i,r){t(e,i),n(i,r)}function u(e,t){var n=e._toUpdate[t];if(n){var i=e._settings[t],r=Object.keys(i);n.forEach(function(e){for(var t=0,n=r.length;t<n;++t){var o=r[t];e[o]=i[o]}})}}var l=$global.Ogma,h="at settings declaration: ";e.dependencies=["events"],e.onClear=function(e){e._toUpdate=Object.create(null)},e.prototype.get=function(e,t){if(!this._settings[e])throw new Error("module "+e+" does not exist");var n=l.utils.deepCopy(this._settings[e]||{});return t&&(this._toUpdate[e]||(this._toUpdate[e]=[]),this._toUpdate[e].push(n)),n},e.prototype.update=function(e,t){t=t||{},"object"===(void 0===e?"undefined":_typeof(e))?l.utils.forEach(e,function(e,t){o(this,t,e)},this):o(this,e,t)},e.prototype.reset=function(e,t){t=t||{},"object"===(void 0===e?"undefined":_typeof(e))?l.utils.forEach(e,function(e,t){s(this,t,e)},this):s(this,e,t)},l.modules.settings=e}.call(),function(e){function t(e){this._graph=e.graph,this._events=e.events.create("topology.",["change"]),this._nodeAttributes=this._graph.nodeAttributes,this._edgeAttributes=this._graph.edgeAttributes,this._graph.addNodeAttributes({adjacentNodes:Array,adjacentInNodes:Array,adjacentOutNodes:Array,adjacentEdges:Array,adjacentInEdges:Array,adjacentOutEdges:Array,degreeChanged:Int8Array}),this._parallelEdges={};var t=this._nodeAttributes,a=this;this._graph.addNodeReadOnlyProperty("degree",function(e){return t.adjacentNodes[e.__index]._indexSet.size}),this._graph.addNodeReadOnlyProperty("inDegree",function(e){return t.adjacentInNodes[e.__index]._indexSet.size}),this._graph.addNodeReadOnlyProperty("outDegree",function(e){return t.adjacentOutNodes[e.__index]._indexSet.size}),e.events.bind({"graph.clear":function(){a._parallelEdges={}},"graph.addNodes":function(e){for(var t=a._graph,n=a._nodeAttributes,i=n.degreeChanged,r=n.adjacentNodes,o=n.adjacentInNodes,s=n.adjacentOutNodes,d=n.adjacentEdges,u=n.adjacentInEdges,l=n.adjacentOutEdges,h=e.length,c=0;c<h;++c){var g=e[c],f=g.__index;r[f]=t.createNodeSet(),o[f]=t.createNodeSet(),s[f]=t.createNodeSet(),d[f]=t.createEdgeSet(),u[f]=t.createEdgeSet(),l[f]=t.createEdgeSet(),i[f]=0}},"graph.addEdges":function(e){for(var t=a._nodeAttributes,r=t.adjacentNodes,d=t.adjacentInNodes,u=t.adjacentOutNodes,l=t.adjacentEdges,h=t.adjacentInEdges,c=t.adjacentOutEdges,g=t.degreeChanged,f=!1,p=e.length,y=0;y<p;++y){var v=e[y],m=v.__source,_=v.__target,b=m.__index,x=_.__index,w=r[b],A=r[x],E=l[b],C=l[x];E.add(v),C.add(v),w.add(_)&&(A.add(m),g[b]=1,g[x]=1,f=!0),d[x].add(m),u[b].add(_),h[x].add(v),c[b].add(v);var S=o(m,_),I=s(m,_);i(a,S,v),i(a,I,v)}f&&n(a)},"graph.removeEdges":function(e){for(var t=a._nodeAttributes,i=t.adjacentNodes,d=t.adjacentInNodes,u=t.adjacentOutNodes,l=t.adjacentEdges,h=t.adjacentInEdges,c=t.adjacentOutEdges,g=t.degreeChanged,f=!1,p=e.length,y=0;y<p;++y){var v=e[y],m=v.__source,_=v.__target,b=m.__index,x=_.__index,w=i[b],A=i[x],E=l[b],C=l[x];E.remove(v),C.remove(v),h[x].remove(v),c[b].remove(v);var S=o(m,_),I=s(m,_);r(a,S,v),r(a,I,v),a._parallelEdges[S]||(d[x].remove(m),u[b].remove(_)),a._parallelEdges[I]||(w.remove(_),A.remove(m),f=!0,g[b]=1,g[x]=1)}f&&n(a)}})}function n(e){for(var t=e._nodeAttributes.degreeChanged,n=e._nodeAttributes.ref,i=t.length,r=[],o=0;o<i;++o)t[o]&&(r.push(n[o]),t[o]=0);e._events.change(r)}function i(e,t,n){var i=e._parallelEdges[t];i?i.push(n):e._parallelEdges[t]=[n]}function r(t,n,i){var r=t._parallelEdges[n];1===r.length?t._parallelEdges[n]=e:r.splice(r.indexOf(i),1)}function o(e,t){return e.__index+"->"+t.__index}function s(e,t){var n,i;return e.__index<t.__index?(n=e.__index,i=t.__index):(n=t.__index,i=e.__index),n+"<->"+i}function a(e,t,n,i,r){var o=e._graph.nodeAttributes,s=o[m[i]][t.__index];if(1===r)for(var d=0;d<s._indexSet.size;++d)n.add(s._elementAttributes.ref[s._indexSet.array[d]]);else for(d=0;d<s._indexSet.size;++d){var u=s._elementAttributes.ref[s._indexSet.array[d]];if(n.add(u)){var l=u.__source===t?u.__target:u.__source;a(e,l,n,i,r-1)}}}function d(e,t,n,i,r){var o=e._graph.nodeAttributes,s=o[_[i]][t.__index];if(1===r)for(var a=0;a<s._indexSet.size;++a)n.add(s._elementAttributes.ref[s._indexSet.array[a]]);else for(a=0;a<s._indexSet.size;++a){var u=s._elementAttributes.ref[s._indexSet.array[a]];u!==t&&n.add(u)&&d(e,u,n,i,r-1)}}function u(e){return e.nodeAttributes.adjacentEdges.map(function(e,t){return e?e.map(function(e){return[e.size||1,t===e.__sourceIndex?e.__targetIndex:e.__sourceIndex]}):[]})}function l(e){return e.nodeAttributes.adjacentOutEdges.map(function(e){return e?e.map(function(e){return[e.size||1,e.__targetIndex]}):[]})}function h(e,t,n){for(var i=e.getAdjacencyTable(!0),r=e._graph.nodes,o=r.length,s=new Int8Array(o),a=[],d=0;d<o;d++)if(!s[d]){for(var u=d,l=[[0,d]],h=new Array,c=!1;0!==l.length;)u=l.shift()[1],s[u]||(l.unshift.apply(l,i[u]),s[u]=!0,h.push(u),u===n&&(c=!0));if(h.length>0){if(t||(h=h.map(function(e){return r[e]})),c)return h;a.push(h)}}return a}var c=$global.Ogma;t.dependencies=["graph","events"],t.prototype.directionId=o,t.prototype.biDirectionId=s,t.prototype.edgeDirection=function(e){return o(e.__source,e.__target)},t.prototype.edgeBiDirection=function(e){return s(e.__source,e.__target)};var g=[];t.prototype.getEdgesMatchingDirection=function(e,t){var n=this._parallelEdges[e]||g;if(t){for(var i=[],r=0;r<n.length;++r){var o=n[r];t(o)&&i.push(o)}return i}return n.slice()};var f=["both","out","in"],p=["nodes","edges"];t.prototype.getAllEdgeDirections=function(){return Object.keys(this._parallelEdges)};var y={type:"nodes"};t.prototype.getAdjacentNodes=function(t,n){return n?(y.depth=n.depth,y.direction=n.direction,y.includeSources=n.includeSources):(y.depth=e,y.direction=e,y.includeSources=e),this.getAdjacentElements(t,y)};var v={type:"edges"};t.prototype.getAdjacentEdges=function(t,n){return n?(v.depth=n.depth,v.direction=n.direction):(v.depth=e,v.direction=e),this.getAdjacentElements(t,v)},t.prototype.getAdjacentElements=function(t,n){if(void 0===t)throw new Error('topology.getAdjacentElements: argument "sourceNodes" must not be undefined');n=n||{};var i=n.type,r=n.direction,o=n.includeSources,s=n.depth;if(i===e&&(i="nodes"),r===e&&(r="both"),s===e&&(s=1),o===e&&(o=!1),-1===p.indexOf(i))throw new Error("topology.getAdjacentElements: invalid type "+JSON.stringify(i)+", expected one of the following values: "+JSON.stringify(p));if(-1===f.indexOf(r))throw new Error("topology.getAdjacentElements: invalid direction "+JSON.stringify(r)+", expected one of the following values: "+JSON.stringify(f));if("number"!=typeof s||s<1||s%1!=0)throw new Error("topology.getAdjacentElements: invalid depth "+JSON.stringify(s)+", expected a integer > 1");if("boolean"!=typeof o)throw new Error("topology.getAdjacentElements: invalid includeSources option "+JSON.stringify(o)+", expected a boolean");t instanceof Array||(t=[t]),t=t.map(function(t){return t.id!==e?t.id:t}),t=this._graph.getNodeList(t);var u=this._graph.createElementSet("nodes"===i);if("nodes"===i)for(var l=0;l<t.length;++l)d(this,t[l],u,r,s);else for(l=0;l<t.length;++l)a(this,t[l],u,r,s);if("nodes"===i)if(o)for(l=0;l<t.length;++l)u.add(t[l]);else for(l=0;l<t.length;++l)u.remove(t[l]);return u.slice()};var m={both:"adjacentEdges",in:"adjacentInEdges",out:"adjacentOutEdges"},_={both:"adjacentNodes",in:"adjacentInNodes",out:"adjacentOutNodes"};t.prototype.getAdjacencyTable=function(e){return e?u(this._graph):l(this._graph)},t.prototype.getConnectedComponents=function(e){return h(this,e,-1)},t.prototype.getComponentByNode=function(t,n){if(t===e)throw new Error("topology.getComponentByNode: Node has to be defined");var i=t.id===e?t:t.id;if(!(t=this._graph.getNode(i)))throw new Error('topology.getComponentByNode: Cannot find node "'+i+'"');return h(this,n,t.__index)},c.modules.topology=t}.call(),function(e){function t(t){this._graph=t.graph,this._renderer=t.render,this._drawing=t.drawing,this._shapes=t.shapes,this._settings=t.settings.get("outlines"),this._shapeSettings=t.settings.get("shapes"),this._drawing.addEdgeSubLayer("edgeOutlines",{transparency:!0,level:$C("subLayer","edgeOutlines"),symbolicSizeThreshold:this._settings.edgeThreshold}),this._drawing.addNodeSubLayer("nodeOutlines",{transparency:!0,level:$C("subLayer","nodeOutlines"),symbolicSizeThreshold:this._settings.nodeThreshold===e?this._shapeSettings.nodeInnerStrokeThreshold:this._settings.nodeThreshold}),this._drawing.addCommonVisualProperty("outline",{type:"boolean"}),this._drawing.addCommonVisualComponent("outlineComponent");var r=this;t.events.bind({"drawing.nodes":function(e){return n(r,e)},"drawing.edges":function(e){return i(r,e)},"settings.shapes":function(){r._shapeSettings=t.settings.get("shapes"),r._drawing.redrawEverything()},"settings.outlines":function(){r._settings=t.settings.get("outlines"),r._drawing.redrawEverything()}})}function n(e,t){var n=t.length,i=e._renderer,s=e._drawing,a=e._graph.nodeAttributes,d=a.shape,u=r.shapes.nodes,l=e._shapeSettings.defaultNodeShape,h=a.outlineComponent,c=a.size,g=a.x,f=a.y,p=e._settings.nodeRelativeOffsetY,y=e._settings.nodeAbsoluteOffsetY,v=e._settings.nodeRelativeSize,m=e._settings.nodeAbsoluteSize,_=e._settings.color,b=a.depth,x=e._shapeSettings.nodeOuterStrokeWidth/2;o.oy=y+x;for(var w=0;w<n;++w){var A=t[w],E=A.__index,C=d[E]||l,S=u[C],I=s.getElementProperty(A,"outline"),O=!!s.getElementProperty(A,"nodeOuterStrokeColor");if(I){var z=c[E],T=O?x:0;o.zy=p*z,o.oy=y+T,i.setOffset(o),h[E]=S.draw(i,h[E],g[E],f[E],z*v,m+T,_,"nodeOutlines",b[E],z)}else h[E]=i.delete(h[E])}i.setOffset(null)}function i(e,t){var n=t.length,i=e._renderer,s=e._drawing,a=e._graph.edgeAttributes,d=e._graph.nodeAttributes,u=a.shape,l=r.shapes.edges,h=e._shapeSettings.defaultEdgeShape,c=a.outlineComponent,g=a.size,f=d.x,p=d.y,y=d.size,v=a.source,m=a.target,_=a.curvature,b=e._settings.edgeRelativeOffsetY,x=e._settings.edgeAbsoluteOffsetY,w=e._settings.edgeRelativeSize,A=e._settings.edgeAbsoluteSize,E=e._settings.color,C=a.depth;o.oy=x;for(var S=0;S<n;++S){var I=t[S],O=I.__index,z=u[O]||h,T=l[z];if(s.getElementProperty(I,"outline")){var N=v[O],L=m[O],P=g[O];o.zy=b*P,i.setOffset(o),c[O]=e._shapes.drawEdgeShape(i,c[O],T,N,L,f[N],p[N],f[L],p[L],P*w,A,_[O],y[N],y[L],E,"edgeOutlines",C[O],P)}else c[O]=i.delete(c[O])}i.setOffset(null)}var r=$global.Ogma;t.settings={nodeThreshold:{default:e,type:"positive",values:[e]},edgeThreshold:{default:5,type:"positive"},nodeRelativeSize:{default:1.1,type:"positive"},nodeAbsoluteSize:{default:0,type:"positive"},nodeRelativeOffsetY:{default:.15,type:"positive"},nodeAbsoluteOffsetY:{default:1,type:"positive"},edgeRelativeSize:{default:1.1,type:"positive"},edgeAbsoluteSize:{default:2,type:"positive"},edgeRelativeOffsetY:{default:.15,type:"positive"},edgeAbsoluteOffsetY:{default:1,type:"positive"},color:{default:"rgba(0, 0, 0, 0.36)",type:"color"}},t.dependencies=["graph","render","shapes","drawing","icons"];var o=new r.utils.Position;r.modules.outlines=t}.call(),function(e){function t(e){var t=this;this._events=e.events.create("keyboard.",["keyUp","keyDown"]),this._binds=[],this._pressed=[],this._onKeyDown=function(e){var n=e.keyCode||e.which,r=t._binds[n];if(t._pressed[n]=!0,r)for(var o=0;o<r.length;++o){for(var s=r[o],a=!0,d=0;d<s.keys.length;++d){for(var u=!1,l=s.keys[d],h=0;h<l.length;++h)t._pressed[l[h]]&&(u=!0);u||(a=!1)}a&&s.handler()}t._events.keyDown(i[n],n)},this._onKeyUp=function(e){var n=e.keyCode||e.which;t._pressed[n]=!1,t._events.keyDown(i[n],n)},"undefined"!=typeof window&&(window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp))}var n=$global.Ogma,i={65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",16:"shift",17:"ctrl",18:"alt",32:"space",224:"ctrl",91:"ctrl",93:"ctrl"},r={};!function(){Object.keys(i).forEach(function(e){var t=i[e];r[t]||(r[t]=[]),r[t].push(e)})}(),t.dependencies=["render"],t.onKill=function(e){"undefined"!=typeof window&&(window.removeEventListener("keydown",e._onKeyDown),window.removeEventListener("keyup",e._onKeyUp))},t.prototype.bind=function(e,t){var n=this;if("number"==typeof e)e=[e];else if("string"==typeof e)e=e.split(" ");else{if(!Array.isArray(e))throw new TypeError(e+" is not a number, string or array");if(0===e.length)throw new Error("the array should contain at least one element")}var i=[];e.forEach(function(e){if("number"==typeof e)i.push([e]);else{if("string"!=typeof e)throw new TypeError(e+" is not a valid key identifier");var t=r[e];if(!t)throw new Error(e+" is not a valid key identifier");i.push(t)}});var o={keys:i,handler:t};i.pop().forEach(function(e){n._binds[e]||(n._binds[e]=[]),n._binds[e].push(o)})},t.prototype.isPressed=function(e){if("number"==typeof e)return this._pressed[e];if("string"==typeof e){var t=r[e];if(t)for(var n=0;n<t.length;++n)if(this._pressed[t[n]])return!0}return!1},n.modules.keyboard=t}.call(),function(e){function t(e){this._keyboard=e.keyboard,this._camera=e.camera,this._mouse=e.mouse,this._graph=e.graph,this._drawing=e.drawing,this._shapes=e.shapes,this._render=e.render,this._hover=e.hover,this._texts=e.texts,this._settings=e.settings.get("selection",!0);var t=this;this._selectedNodes=[],this._selectedEdges=[],this._events=e.events.create("selection.",["nodesSelected","nodesUnselected","edgesSelected","edgesUnselected"]),this._graph.addNodeAttributes({highlightCount:Int16Array}),this._graph.addCommonProperty("active",{values:[!0,!1]},!1,function(e,n,i){i&&d(t,e,n,!0)}),this._nodeAttributes=this._graph.nodeAttributes,this._edgeAttributes=this._graph.edgeAttributes,this._drawing.addLayer("active",{level:$C("layer","active"),disableThreshold:!0},n(this)),this._drawing.addLayer("highlight",{level:$C("layer","highlight"),disableThreshold:!0},n(this)),this._selectElement=e.exclusives.create({priority:$C("interaction","selection"),check:function(){return t._settings.manual},handler:function(e){var n=e,i=n.isNode,r=i?t._selectedNodes:t._selectedEdges,d=t._settings.multiSelectionKey&&t._keyboard.isPressed(t._settings.multiSelectionKey);o(t,!i),d?-1===r.indexOf(n)?s(t,n):a(t,n):1!==r.length||-1===r.indexOf(n)?(o(t,i),s(t,n)):o(t,i)}}),e.events.bind({"settings.selection":function(){t._drawing.editLayer("active",n(t)),t._drawing.editLayer("highlight",n(t)),t._drawing.redraw(t._selectedNodes),t._drawing.redraw(t._selectedEdges)},"graph.clear":function(){t._selectedNodes=[],t._selectedEdges=[]},"graph.addNodes":function(e){for(var n=t._nodeAttributes.highlightCount,i=t._nodeAttributes.active,r=e.length,o=0;o<r;++o){var s=e[o].__index;n[s]=0,i[s]=!1}},"graph.addEdges":function(e){for(var n=t._edgeAttributes.active,i=e.length,r=0;r<i;++r){n[e[r].__index]=!1}},"graph.removeNodes":function(e){for(var n=t._nodeAttributes.active,i=e.length,r=0;r<i;++r){var o=e[r];n[o.__index]&&$rm(t._selectedNodes,o)}},"graph.removeEdges":function(e){for(var n=t._edgeAttributes.active,i=e.length,o=0;o<i;++o){var s=e[o];n[s.__index]&&($rm(t._selectedEdges,s),r(t,s.__source),r(t,s.__target))}},"captor.clickNode":function(e){return t._selectElement(e)},"captor.clickEdge":function(e){return t._selectElement(e)}})}function n(e){return{nodeFontStyle:e._settings.nodeTextFontStyle,nodeFontColor:e._settings.nodeTextFontColor,nodeTextBackgroundColor:e._settings.nodeTextBackgroundColor,edgeFontStyle:e._settings.edgeTextFontStyle,edgeFontColor:e._settings.edgeTextFontColor,edgeTextBackgroundColor:e._settings.edgeTextBackgroundColor,nodeOuterStrokeColor:e._settings.nodeOuterStrokeColor,edgeOuterStrokeColor:e._settings.edgeColor,outline:e._settings.outline}}function i(e,t){var n=t.__index;e._nodeAttributes.highlightCount[n]+=1,1===e._nodeAttributes.highlightCount[n]&&e._drawing.putNodeOnLayer(t,"highlight")}function r(e,t){var n=t.__index,i=e._nodeAttributes.highlightCount[n];i>0&&(e._nodeAttributes.highlightCount[n]-=1,1===i&&e._drawing.removeNodeFromLayer(t,"highlight"))}function o(e,t){var n=t?"_selectedNodes":"_selectedEdges";a(e,e[n]),e[n]=[]}function s(e,t,n){if(!(t instanceof Array))return s(e,[t],n);if(t.length){for(var r=t[0].isNode,o=r?e._selectedNodes:e._selectedEdges,a=e[r?"_nodeAttributes":"_edgeAttributes"],d=a.active,u=[],l=t.length,h=0;h<l;++h){var c=t[h],g=c.__index;d[g]&&!n||(o.push(c),d[g]=!0,e._drawing.putElementOnLayer(c,"active"),u.push(c),r||(i(e,$source(c)),i(e,$target(c))))}u.length&&e._events[r?"nodesSelected":"edgesSelected"](u)}}function a(e,t,n,i){if(!(t instanceof Array))return a(e,[t],n,i);if(t.length){for(var o=t[0].isNode,s=o?e._selectedNodes:e._selectedEdges,d=e[o?"_nodeAttributes":"_edgeAttributes"],u=d.active,l=[],h=0,c=t.length;h<c;++h){var g=t[h],f=g.__index;(u[f]||i)&&(u[f]=!1,l.push(g),e._drawing.removeElementFromLayer(g,"active"),o||(r(e,$source(g)),r(e,$target(g))))}if(!n)for(h=0,c=l.length;h<c;++h)s.splice(s.indexOf(l[h]),1);l.length&&e._events[o?"nodesUnselected":"edgesUnselected"](l)}}function d(e,t,n,i){n?s(e,t,i):a(e,t,!1,i)}function u(e,t){return e[t?"_selectedNodes":"_selectedEdges"].slice()}function l(e,t,n){return e._graph.getElementList(t,n,!0)}var h=$global.Ogma,c={nodeOuterStrokeColor:{default:"red",type:"color",values:["inherit",null]},edgeColor:{default:"red",type:"color",values:["inherit",null]},nodeTextFontStyle:{default:e,values:[e,"none","italic","bold"]},nodeTextFontColor:{default:e,type:"color",values:[e]},nodeTextBackgroundColor:{default:"rgb(220, 220, 220)",type:"color",values:[e,null]},edgeTextFontStyle:{default:e,values:[e,"none","italic","bold"]},edgeTextFontColor:{default:e,type:"color",values:[e]},edgeTextBackgroundColor:{default:"rgb(220, 220, 220)",type:"color",values:[e,null]},outline:{default:!0,type:"boolean"},manual:{default:!0,type:"boolean"},multiSelectionKey:{default:"ctrl",type:"string",values:[null]}};t.settings=c,t.dependencies=["keyboard","camera","mouse","graph","drawing","shapes","hover","texts","captor"],t.prototype.clear=function(e){e?"nodes"===e?o(this,!0):"edges"===e&&o(this,!1):(o(this,!1),o(this,!0))},t.prototype.addNodes=function(e){return this.dropEdges(),this.add(!0,e)},t.prototype.addEdges=function(e){return this.dropNodes(),this.add(!1,e)},t.prototype.dropNodes=function(e){return this.drop(!0,e)},t.prototype.dropEdges=function(e){return this.drop(!1,e)},t.prototype.nodes=function(){return u(this,!0)},t.prototype.edges=function(){return u(this,!1)},t.prototype.nbNodes=function(){return this._selectedNodes.length},t.prototype.nbEdges=function(){return this._selectedEdges.length},t.prototype.add=function(e,t){return s(this,l(this,e,t)),this},t.prototype.drop=function(t,n){if(n===e)o(this,t);else{a(this,l(this,t,n))}return this},t.prototype.addNeighbors=function(){for(var e=this._graph.nodeAttributes,t=this._selectedNodes,n=[],i=0;i<t.length;++i){var r=t[i].__index,o=e.adjacentNodes[r].slice();n.push.apply(n,o)}s(this,n)},t.prototype.setEltsBy=function(e,t){for(var n=this._graph[e?"nodes":"edges"],i=[],r=0;r<n.length;++r){var a=n[r];t(a)&&i.push(a)}return o(this,!0),s(this,i),this},t.prototype.setNodesBy=function(e){return this.setEltsBy(!0,e)},t.prototype.setEdgesBy=function(e){return this.setEltsBy(!1,e)},t.prototype.invertElts=function(e,t){t=t?l(this,e,t):this._graph[e?"nodes":"edges"];for(var n=this._graph.attributes(e),i=n.active,r=n.ref,o=0,s=t.length;o<s;++o){var a=t[o].__index;d(this,r[a],!i[a])}return this},t.prototype.invertNodes=function(e){return this.invertElts(!0,e)},t.prototype.invertEdges=function(e){return this.invertElts(!1,e)},h.modules.selection=t}.call(),function(e){function t(e){this._graph=e.graph,this._drawing=e.drawing,this._renderer=e.render,this._drawing.addNodeSubLayer("nodePieCharts",{level:$C("subLayer","nodePieCharts"),useClipSpace:!0}),this._drawing.addNodeVisualProperty("colors",{arrayItem:{type:"string"},required:!1}),this._drawing.addNodeVisualComponent("pieChartComponent");var t=this;e.events.bind({"drawing.nodes":function(e){return n(t,e)},"settings.pieCharts":function(){return t._drawing.redrawEverything()}})}function n(e,t){for(var n=e._graph.nodeAttributes,i=e._renderer,o=n.colors,s=0,a=t.length;s<a;++s){var d=t[s].__index,u=o[d];if(u&&0!==u.length){var l=n.x[d],h=n.y[d],c=2*n.size[d],g=n.depth[d],f=i.updateComposite(n.pieChartComponent[d],u.length);if(r.reset(),1===u.length)f[0]=i.rectangle(f[0],r[0].setXY(l,h),r[1].setZXY(c/2,c/2),u[0],"nodePieCharts",g);else if(2===u.length)f[0]=i.rectangle(f[0],r[0].setXY(l,h+c/2),r[1].setZXY(c/2,c/2),u[0],"nodePieCharts",g),f[1]=i.rectangle(f[1],r[0].setXY(l,h-c/2),r[1].setZXY(c/2,c/2),u[1],"nodePieCharts",g);else{r.x=l,r.y=h;var p=2*Math.PI/u.length,y=0;r[2].zx=c,r[2].zy=0;for(var v=0;v<u.length;++v){var m=y+p,_=Math.cos(m),b=Math.sin(m);r[1].set(r[2]),r[2].zx=_*c,r[2].zy=b*c,f[v]=i.triangle(f[v],r[0],r[1],r[2],u[v],"nodePieCharts",g),y=m}}n.pieChartComponent[d]=i.composite(n.pieChartComponent[d],f)}else n.pieChartComponent[d]=i.delete(n.pieChartComponent[d])}}var i=$global.Ogma;t.dependencies=["graph","drawing","render","icons","images"];var r=new i.utils.PositionList(3);i.modules.pieCharts=t}.call(),function(e){function t(e){this._graph=e.graph,this._batch=e.batch,this._camera=e.camera,this._screen=e.render.screen,this._drawing=e.drawing,this._drawingSettings=this._drawing._settings,this._graph.addCommonAttributes({visibleOnScreen:Int8Array});var t=this._graph.nodeAttributes,i=this._graph.edgeAttributes,r=this;this._graph.addNodeReadOnlyProperty("onScreen",function(e){return t.visibleOnScreen[e.__index]},!1),this._graph.addEdgeReadOnlyProperty("onScreen",function(e){return i.visibleOnScreen[e.__index]},!1);var o=this._batch.create(function(){n(r,!0),n(r,!1)});e.events.bind({"camera.move":function(e){e&&o()},"graph.addNodes":o,"graph.addEdges":o,"drawing.nodesVisibilityChange":o,"drawing.edgesVisibilityChange":o})}function n(e,t){var n=e._graph._elts.fetch(t),o=n.totalSize,s=n.attributes,a=s.visibleOnScreen,d=s.visible,u=s.x,l=s.y,h=s.exists,c=s.size,g=s.source,f=s.target,p=s.curvature,y=e._camera,v=y.zoom,m=e._drawingSettings.edgeClipping,_=e._drawingSettings.edgeClippingPadding/v,b=y.getAbsolutePosition(0,0),x=y.getAbsolutePosition(0,e._screen.height),w=y.getAbsolutePosition(e._screen.width,0),A=y.getAbsolutePosition(e._screen.width,e._screen.height),E=Math.min(b.x,x.x,w.x,A.x),C=Math.min(b.y,x.y,w.y,A.y),S=Math.max(b.x,x.x,w.x,A.x),I=Math.max(b.y,x.y,w.y,A.y),O=i.geometry.SELF_LOOP_SIZE_MULTIPLIER;if(t)for(var z=0;z<o;++z){var T=z;if(h[T]){var N=d[T];if(N){var L=u[T],P=l[T],k=c[T],F=L-k,M=L+k,D=P-k,R=P+k;N=(E<F&&F<S||E<M&&M<S)&&(C<D&&D<I||C<R&&R<I)}a[T]=N}}else for(u=e._graph.nodeAttributes.x,l=e._graph.nodeAttributes.y,c=e._graph.nodeAttributes.size,m&&(E-=_,C-=_,S+=_,I+=_),z=0;z<o;++z)if(T=z,h[T]){if(N=d[T]){var B=g[T],j=f[T],U=u[B],X=l[B],W=c[B],V=u[j],Y=l[j],G=c[j],q=U-W,H=U+W,J=X-W,Z=X+W,Q=V-G,K=V+G,$=Y-G,ee=Y+G;if(m)N=(E<q&&q<S||E<H&&H<S)&&(C<J&&J<I||C<Z&&Z<I)||(E<Q&&Q<S||E<K&&K<S)&&(C<$&&$<I||C<ee&&ee<I);else{var te=p[T];if(B===j){var ne=O*(W+te);F=U-ne,M=U,D=X,R=X+ne,N=!(F>S||M<E||R<C||D>I)}else 0===te?N=i.geometry.lineIntersectRectangle(U,X,V,Y,E,C,S,I):(i.shapes.utils.getCurveControlPoint(U,X,V,Y,te,r),i.geometry.getPointOnQuadraticCurve(.5,U,X,V,Y,r.x,r.y,r),N=i.geometry.lineIntersectRectangle(U,X,r.x,r.y,E,C,S,I)||i.geometry.lineIntersectRectangle(r.x,r.y,V,Y,E,C,S,I))}}a[T]=N}}var i=$global.Ogma;t.dependencies=["drawing","graph","camera","render","batch"];var r={};i.modules.visibility=t}.call(),function(){function e(e,t){this._timeout=null,this._current=null,this._started=!1,this._scheduled=[],this._priority=0,this._startFunc=null,this._ogma=e}function t(e){e._timeout||(e._timeout=setTimeout(function(){e._startFunc&&(e._startFunc(),e._startFunc=null,e._started=!0),e._scheduled&&e._scheduled(),e._scheduled=null,e._timeout=null},0))}var n=$global.Ogma;e.dependencies=["events"];var i=function(){};e.prototype.create=function(e){if("function"==typeof e)e={onStart:e};else if(!$isObj(e,!0))throw new TypeError("invalid parameters "+e+": not an object");e=e||{};var n=this,r=$or(e.onStart,e.handler),o=$or(e.onProgress,i),s=$or(e.onStop,i),a=$or(e.check,function(){return!0}),d=$or(e.priority,0),u=e.evt,l=null;r=$or(r,i);var h=function(e,i,o,s,u,h,c,g){return!(!a(e,i,o,s,u,h,c,g)||n._current&&!(d>=n._priority)||(n._current&&n._current.stop(),n._current=l,n._priority=d,n._started=!1,n._scheduled=null,n._startFunc=function(){return r(e,i,o,s,u,h,c,g)},t(n),0))},c=function(e,t,i,r,o,a,d,u){n._current===l&&(n._started&&s(e,t,i,r,o,a,d,u),n._current=null,n._priority=0,n._started=!1,n._scheduled=null)},g=function(e,i,r,s,a,d,u,h){n._current===l&&(n._scheduled=function(){return o(e,i,r,s,a,d,u,h)},t(n))};return l=function(e,t,i,r,o,s,a,d){h(e,t,i,r,o,s,a,d)&&(n._scheduled=c)},l.start=h,l.stop=c,l.progress=g,u&&("string"==typeof u?this._ogma.on(u,l):Array.isArray(u)&&3===u.length&&(this._ogma.on(u[0],h),this._ogma.on(u[1],g),this._ogma.on(u[2],c))),l},n.modules.exclusives=e}(),function(e){function t(e){this._graph=e.graph,this._topology=e.topology,this._dsl=e.dsl,this._events=e.events.create("partitions.",["update"]),this._partitionLists=$dual(Array),this._counter=c.utils.createCounter(),this._graph.addCommonAttributes({partitionLists:Array});var t=this;this._clear=!1,this._onPartitionListKill=function(e){t._clear||h(t._partitionLists.fetch(e._isNode),e)},e.events.bind({"graph.addNodes":function(e){n(t,!0,e)},"graph.addEdges":function(e){n(t,!1,e)},"graph.removeNodes":function(e){i(t,!0,e)},"graph.removeEdges":function(e){i(t,!1,e)},"topology.change":function(e){r(t,!0,e)},"graph.nodeDataChange":function(e){r(t,!0,e)},"graph.edgeDataChange":function(e){r(t,!1,e)},"graph.clear":function(){t._partitionLists.nodes.forEach(function(e){return a(e)}),t._partitionLists.edges.forEach(function(e){return a(e)})}})}function n(e,t,n){for(var i=e._graph.attributes(t),r=n.length,o=i.partitionLists,s=e._partitionLists.fetch(t),a=s.length,u=0;u<r;++u){o[n[u].__index]={}}for(var l=0;l<a;++l){d(s[l],n)}e._events.update()}function i(t,n,i){for(var r=t._graph.attributes(n),o=i.length,s=r.partitionLists,a=t._partitionLists.fetch(n),d=a.length,l=0;l<d;++l){u(a[l],i)}for(var h=0;h<o;++h){s[i[h].__index]=e}t._events.update()}function r(e,t,n){for(var i=e._partitionLists.fetch(t),r=i.length,o=0;o<r;++o){l(i[o],n)}e._events.update()}function o(e,t,n,i,r){i=i||{};var o=e._dsl.checkExpressionFormat(n);if(o)throw new Error(o);var a=new s(e._counter(),t,e._graph,e._topology,e._dsl,c.utils.deepCopy(n),e._onPartitionListKill,i.onPartitionChange,i.onAdd,i.onRemove,i.onKill,i.onUpdate,r);return e._partitionLists.fetch(t).push(a),e._events.update(),a}function s(e,t,n,i,r,o,s,a,u,l,h,c,g){this._id=e,this._isNode=t,this._att=n.attributes(t),this._graph=n,this._topology=i,this._dsl=r,this._expression=o,this._depth=r.expressionDepth(o),this._triggerOnKill=s,this._ignoreUndefined=g,this._onAdd=u,this._onRemove=l,this._onChange=a,this._onUpdate=c,this._onKill=h,this.partitions=Object.create(null),d(this,this._graph[t?"nodes":"edges"],!0)}function a(e){u(e,e._graph[e._isNode?"nodes":"edges"],!0)}function d(e,t,n){var i=e._onAdd;if(i)for(var r=0,o=t.length;r<o;++r)i(t[r]);l(e,t,n)}function u(t,n,i){for(var r=n.length,o=t._att,s=o.partitionLists,a=t._id,d=t.partitions,u=t._onRemove,l=!1,c=0;c<r;++c){var g=n[c],f=g.__index,p=s[f][a],y=d[p];s[f][a]=e,y&&!i&&(h(y,g),l=!0),u&&u(g,p)}l&&t._onUpdate&&t._onUpdate(t.partitions)}function l(t,n,i){var r=t._att;if(!i&&t._isNode&&t._depth>0){var o=t._graph._elts.nodes.totalSize,s=n.slice(),a=n.length,d={depth:t._depth},u=t._topology,l=c.memory.allocate(Int8Array,o);for(l.fill(0),I=0;I<a;++I){O=n[I],z=O.__index,l[z]=1;for(var g=u.getAdjacentElements(O,d),f=0,p=g.length;f<p;++f){var y=g[f],v=y.__index;l[v]||(s.push(y),l[v]=1)}}c.memory.release(l),n=s}for(var m=n.length,_=t._dsl,b=t._expression,x=r.partitionLists,w=t._id,A=t.partitions,E=t._onChange,C=!1,S=t._ignoreUndefined,I=0;I<m;++I){var O=n[I],z=O.__index,T=""+_.computeExpression(O,b,S),N=x[z][w],L=A[T],P=A[N];L||(L=[],A[T]=L,C=!0),T!==N&&(C=!0,L.push(O),N!==e&&P&&h(P,O),x[z][w]=T,E&&E(O,T,N))}t._onUpdate&&(C||i)&&t._onUpdate(t.partitions)}function h(e,t){var n=e.indexOf(t);e.splice(n,1)}var c=$global.Ogma;t.dependencies=["graph","topology","dsl","events"],t.onClear=function(e){e._clear=!0,e._partitionLists.nodes.forEach(function(e){return e.kill()}),e._partitionLists.edges.forEach(function(e){return e.kill()}),e._clear=!1,e._partitionLists=$dual(Array)},t.prototype.nodes=function(e,t,n){return o(this,!0,e,t,n)},t.prototype.edges=function(e,t,n){return o(this,!1,e,t,n)},s.prototype.kill=function(){a(this),this._onKill&&this._onKill(),this._triggerOnKill(this)},c.modules.partitions=t}.call(),function(e){function t(e){this._graph=e.graph,this._tasks=e.tasks,this._settings=e.settings.get("generators",!0)}function n(e,t){if(!t)throw new Error(t+" is not a graph");e._graph.clear(),e._graph.init(t.nodes||[],t.edges||[])}var i=$global.Ogma;t.settings={webWorker:{default:!0,type:"boolean"}},t.dependencies=["graph","tasks"],t.prototype.load=function(e,t,r){var o=this,s=i.generators[e],a=this;return new Promise(function(d){if(!s)throw new Error("generator "+i.utils.stringify(e)+" does not exist");if(o._settings.webWorker){var u={configure:s.configure,context:function(e){return e},update:s.generate,onUpdate:function(e){n(a,e)},onEnd:function(){r&&r(),d()}};o._tasks.run(u,t||{},!0)}else{var l=s.configure(t)||t,h=s.generate(l);n(o,h),r&&r(),d()}})},i.modules.generators=t}.call(),function(e){function t(e){var t=this;this._settings=e.settings.get("animations"),this._renderer=e.render,this._graph=e.graph,this._animationList=[],this._easingFunctions=i.utils.shallowCopy(r),e.events.bind({"render.beforeNewFrame":function(e){n(t,e)}})}function n(e,t){if(t<0||0===e._animationList.length)return!0;for(var n=[],i=0;i<e._animationList.length;++i){var r=e._animationList[i],o=r.elapsed/r.duration,s=r.startAfter,a=r.easing(o);if(o>=1)r.func(1),e._animationList.splice(i,1),i-=1,n.push(r.callback);else if(a>=s){var d=1/(1-s);a=(a-s)*d,r.func(a),r.elapsed+=t}else r.elapsed+=t}for(var u=0;u<n.length;++u)n[u](!1);e._renderer.refresh()}var i=$global.Ogma;t.dependencies=["graph","render"],t.onClear=function(e){for(;e._animationList.length>0;)e.end(e._animationList[0])};var r={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},o={},s=function(){};t.prototype.play=function(e,t){t=t||o;var n=null;if(t.duration){if(t.duration<0)throw new TypeError("the `duration` parameter must be a positive number");n={func:e,easing:"function"==typeof t.easing?t.easing:this._easingFunctions[t.easing||"linear"],duration:t.duration,callback:t.callback||s,elapsed:0,startAfter:t.startAfter||0},this._animationList.push(n),this._renderer.refresh()}else e(1),t.callback&&t.callback();return n},t.prototype.end=function(e,t){var n=this._animationList.indexOf(e);-1!==n&&(e.func(1),this._animationList.splice(n,1),$or(t,!0)&&e.callback(!0))},t.prototype.addEasingFunction=function(e,t){this._easingFunctions[e]=t},t.prototype.getEasingFunction=function(e){return this._easingFunctions[e]||null},t.easings=r,i.modules.animations=t}.call(),function(e){function t(e){this._graph=e.graph,this._topology=e.topology}function n(e,t){return s.geometry.distance(e.x,e.y,t.x,t.y)}function i(){return 1}function r(){return 0}function o(e,t,n,i){for(var r=[i[n]],o=n;o!==t;)o=e[o],r.push(i[o]);return r.reverse(),r}var s=$global.Ogma;t.dependencies=["graph","topology"],t.prototype.astar=function(t,i,r){if(r=r||{},t===i)return[this._graph.getNode(t,!0)];for(var s=r.pathLengthFunction||n,a=r.heuristicLengthFunction||s,d=r.directed===e||!!r.directed,u={direction:d?"out":"both"},l=this._graph.getNode(t,!0),h=this._graph.getNode(i,!0),c=l.__index,g=h.__index,f=this._graph._elts.nodes.totalSize,p=this._graph.nodeAttributes.ref,y=this._graph.createNodeSet(),v=this._graph.createNodeSet(),m=new Int32Array(f),_=new Float32Array(f),b=new Float32Array(f),x=0;x<f;++x)m[x]=-1,_[x]=1/0,b[x]=1/0;for(v.add(l),_[c]=0,b[c]=a(l,h);0!==v._indexSet.size;){var w=v._indexSet.size,A=v._elementAttributes.ref[v._indexSet.array[0]],E=0,C=b[A.__index];for(x=1;x<w;++x){var S=v._elementAttributes.ref[v._indexSet.array[x]],I=b[S.__index];I<C&&(C=I,A=S,E=x)}if(A===h)return o(m,c,g,p);v.removeByIndex(E),y.add(A);var O=this._topology.getAdjacentNodes(A,u);for(x=0;x<O.length;++x){var z=O[x],T=z.__index;if(!y.has(z)){var N=_[A.__index]+s(A,z);!v.add(z)&&N>=_[T]||(m[T]=A.__index,_[T]=N,b[T]=N+a(z,h))}}}return null},t.prototype.dijkstra=function(e,t,n){return n=n?s.utils.deepCopy(n):{},n.pathLengthFunction=n.pathLengthFunction||i,n.heuristicLengthFunction=r,this.astar(e,t,n)},s.modules.pathfinding=t}.call(),function(){function e(e){var t=this;this._partitions=e.partitions,this._groups=e.groups,this._dsl=e.dsl,this._topology=e.topology,this._nodePartitionList=null,this._edgePartitionList=null,this._dsl.registerOperator("coalescence.nodePartition",function(e,n){return t._groups.isMetaNode(e)?void 0:n}),this._dsl.registerOperator("coalescence.edgePartition",function(e,n){return t._groups.isMetaEdge(e)||void 0===n?void 0:t._topology.edgeDirection(e)+" "+n})}function t(e,t,n){n=n||{};var i=t?"_nodePartitionList":"_edgePartitionList";e[i]&&(e._killDuration=n.duration,e._killCallback=n.callback,e[i].kill(),e[i]=null)}function n(e,t,n){var o=n.expression,s=n.method,a=n.duration,d=n.callback;t||void 0!==o||(o=function(e){return""});var u=e._dsl.checkExpressionFormat(o);if(u)throw new Error(u);if("function"!=typeof s)throw new Error("invalid group function "+JSON.stringify(s)+": expected function");var l=t?"coalescence.nodePartition":"coalescence.edgePartition",h=t?"_nodePartitionList":"_edgePartitionList";e._noUpdate=!1,e[h]=e._partitions[t?"nodes":"edges"]([".",l,o],{onKill:function(){r(e,t,e._killDuration,e._killCallback)},onUpdate:function(n){e._noUpdate||(e._noUpdate=!0,i(e,t,n,s,a,d),a=void 0,d=void 0,e._noUpdate=!1)}})}function i(e,t,n,i,r,o){e._groups[t?"ungroupNodes":"ungroupEdges"](e._groups[t?"getMetaNodes":"getMetaEdges"]());var s=[];$iter(n,function(e,n){if("undefined"!==n){var r={method:i};r[t?"nodes":"edges"]=e,s.push(r)}}),e._groups[t?"groupMultipleNodes":"groupMultipleEdges"](s,r,o)}function r(e,t,n,i){e._groups[t?"ungroupNodes":"ungroupEdges"](e._groups[t?"getMetaNodes":"getMetaEdges"](),n,i)}var o=$global.Ogma;e.dependencies=["groups","dsl","partitions","topology"],e.prototype.groupNodes=function(e){t(this,!0),n(this,!0,e)},e.prototype.groupEdges=function(e){t(this,!1),n(this,!1,e)},e.prototype.ungroupNodes=function(e){t(this,!0,e)},e.prototype.ungroupEdges=function(e){t(this,!1,e)},e.prototype.reset=function(){t(this,!0),t(this,!1)},o.modules.coalescence=e}(),function(e){function t(e){var t=this;this._enabled=!1,this._renderer=e.render,this._settings=e.settings.get("connectNodes",!0),this._camera=e.camera,this._ogma=e,this._captorSettings=this._ogma.settings.get("captor",!0),this.setCondition(i),e.exclusives.create({priority:$C("interaction","creation"),check:function(){return t._enabled},onStart:this._onStart.bind(this),onProgress:this._onProgress.bind(this),onStop:this._onStop.bind(this),evt:["captor.startDragNode","captor.dragNode","captor.endDragNode"]})}var n=$global.Ogma;t.dependencies=["exclusives","graph","captor"];var i=function(e,t){return!0};t.settings={strokeColor:{default:"black",type:"color"},strokeWidth:{default:2,type:"positive"},cursorStyle:{default:"cell",type:"string"},continueDrawing:{default:!1,type:"boolean"},createNodes:{default:!0,type:"boolean"}},t.prototype.setEnabled=function(e){return this._enabled=!!e,this},t.prototype.enable=function(){return this.setEnabled(!0)},t.prototype.disable=function(){return this.setEnabled(!1)},t.prototype.setCondition=function(e){if("function"!=typeof e)throw new Error("Connection condition must be a function");if(2!==e.length)throw new Error("Connection condition must take two nodes");return this._connectCondition=e,this},t.prototype._onStart=function(e,t,i){this._startNode=e,this._nodeMargin=this._captorSettings.nodeErrorMargin,this._startPos=this._camera.getPositionOnScreen(e.x,e.y),this._lines=[],this._lineId=-1,this._renderer.setCursorStyle(this._settings.cursorStyle),this._onDrawThrottled=n.utils.throttle(this._onDraw,50,this)},t.prototype._onProgress=function(t,i,r){var o=this._settings,s=this._ogma.drawing.MAX_EDGE_Z+n.constants.EPSILON;this._onDrawThrottled(i,r),this._lineId=n.shapes.edges.dashed.drawStraight(this._renderer,this._lineId,this._startPos.x,this._startPos.y,i,r,o.strokeWidth,0,1,1,o.strokeColor,e,s)},t.prototype._onDraw=function(e,t){var n=this._ogma.shapes.detectNodeShape(e,t,this._nodeMargin),i="hover",r=this._ogma.drawing;n&&n===this._hoveredNode||this._hoveredNode&&(r.removeNodeFromLayer(this._hoveredNode,i),this._hoveredNode=null),n&&n!==this._startNode&&(this._hoveredNode=n,r.putNodeOnLayer(n,i))},t.prototype._onStop=function(e,t,n){var i=this._ogma,r=i.captor.pointedElement(),o=!1;if(this._hoveredNode=null,!r&&this._settings.createNodes){var s=this._camera.getAbsolutePosition(t,n);r=i.graph.addNode({id:i.graph.unusedNodeId(),x:s.x,y:s.y,size:e.size}),o=!0}r&&r.isNode&&(this._connectCondition(this._startNode,r)?i.graph.addEdge({id:i.graph.unusedEdgeId(),source:e.id,target:r.id}):o&&i.graph.removeNode(r.id)),this._renderer.delete(this._lineId),this._lineId=this._startPos=null,this._renderer.removeCursorStyle(this._settings.cursorStyle),this.disable(),this._settings.continueDrawing&&this.enable()},n.modules.connectNodes=t}.call(),function(e){function t(e){var t=this,s=this;this._graph=e.graph,this._mouse=e.mouse,this._render=e.render,this._keyboard=e.keyboard,this._camera=e.camera,this._drawing=e.drawing,this._texts=e.texts,this._locate=e.locate,this._detect=e.detect,this._settings=e.settings.get("cameraInteractions",!0),this._screen=this._render.screen,this._panning=!1,this._rotating=!1,this._adjusting=!1,this._interactionsEnabled=!0,this._panningEnabled=!0,this._rotationEnabled=!0,this._zoomEnabled=!0;var a=0,l=0,c=0,g=0,f=function(e,t){var n=s._screen.width/2,i=s._screen.height/2,r=e-n,o=t-i,d=Math.sqrt(r*r+o*o),u=0;if(r/=d,o/=d,0!==r||0!==o){var h=Math.abs(a*r+l*o)/(Math.sqrt(a*a+l*l)*Math.sqrt(r*r+o*o));u=Math.acos(h),isNaN(u)?u=0:r<0&&a>0||r>0&&l<0?(o>0&&a>r||o<0&&a<r)&&(u*=-1):(r>0&&o>l||r<0&&o<l)&&(u*=-1)}return a=r,l=o,u};this._zoom=e.exclusives.create({priority:$C("interaction","zoom"),check:function(e,t){return s._settings.zoomEnabled&&(!t||s._settings.zoomOnDoubleClick)&&!s._adjusting},handler:function(e){return o(s,e,s._mouse.x,s._mouse.y)}}),this._pan=e.exclusives.create({priority:$C("interaction","panning"),check:function(){return s._settings.panningEnabled&&!s._adjusting},onStart:function(e,t){i(s,d),c=e,g=t},onProgress:function(e,t){var n=c-e,i=g-t;c=e,g=t,s._camera.move(n,i,{noEndOfAnimation:!0})},onStop:function(){s._camera.move(0,0),r(s,d),n(s)}}),this._rotate=e.exclusives.create({priority:$C("interaction","rotation"),check:function(){return s._settings.rotationEnabled&&!s._adjusting},onStart:function(){i(s,u)},onProgress:function(e){s._camera.rotate(e,{noEndOfAnimation:!0})},onStop:function(){s._camera.rotate(0),r(s,u)}}),this._gesture=e.exclusives.create({priority:$C("interaction","gesture"),check:function(){return s._settings.panningEnabled&&!s._adjusting},onStart:function(){i(s,h)},onProgress:function(t,n,i){e.camera.rotate(-t.rotation,{noEndOfAnimation:!0}),e.camera.zoomIn({zoomModifier:t.scale,refX:n,refY:i,noEndOfAnimation:!0}),e.camera.move(-t.dx,-t.dy,{noEndOfAnimation:!0})},onStop:function(){e.camera.zoomIn({zoomModifier:1}),e.camera.rotate(0),e.camera.move(0,0),r(s,h)}}),e.on({"touch.startGesture":function(){return t._gesture.start()},"touch.endGesture":function(){return t._gesture.stop()},"touch.gesture":function(e,n,i){return t._gesture.progress(e,n,i)},"mouse.wheel":function(e){return t._zoom(e,!1)},"mouse.doubleClick touch.doubleTap":function(){return t._zoom(1,!0)},"mouse.down touch.down":function(e,n,i){a=0,l=0,i&&"left"!==i?"right"===i&&t._rotate.start():t._pan.start(e,n)},"mouse.move touch.move":function(e,n){t._pan.progress(e,n),t._rotate.progress(f(e,n))},"mouse.up touch.up":function(){t._pan.stop(),t._rotate.stop()}})}function n(e){null===e._settings.cameraFixDuration||e._locate.graphInCamera()||(e._adjusting=!0,e._locate.center({duration:e._settings.cameraFixDuration,callback:function(){e._adjusting=!1}}))}function i(e,t){e._settings[t[0]]&&e._drawing.setNodeDrawing(!1),e._settings[t[1]]&&e._drawing.setEdgeDrawing(!1),e._settings[t[2]]&&e._texts.setNodeTextDrawing(!1),e._settings[t[3]]&&e._texts.setEdgeTextDrawing(!1)}function r(e,t){e._settings[t[0]]&&e._drawing.setNodeDrawing(!0),e._settings[t[1]]&&e._drawing.setEdgeDrawing(!0),e._settings[t[2]]&&e._texts.setNodeTextDrawing(!0),e._settings[t[3]]&&e._texts.setEdgeTextDrawing(!0)}function o(e,t,o,s){var a=e._settings.zoomModifier||e._camera._settings.defaultZoomModifier,d=e._settings.zoomDuration;t<0&&(a=1/a);var u={refX:o,refY:s,zoomModifier:a,duration:d,callback:function(t){r(e,l),t||n(e)},easing:"quadraticOut"};e._camera.zoomIn(u),i(e,l)}var s=$global.Ogma,a={zoomDuration:{default:150,type:"positive"},zoomModifier:{default:e,type:"positive",values:[e]},zoomEnabled:{default:!0,type:"boolean"},panningEnabled:{default:!0,type:"boolean"},rotationEnabled:{default:!0,type:"boolean"},zoomOnDoubleClick:{default:!1,type:"boolean"},skipNodeDrawingWhileZooming:{default:!1,type:"boolean"},skipEdgeDrawingWhileZooming:{default:!1,type:"boolean"},skipNodeTextDrawingWhileZooming:{default:!1,type:"boolean"},skipEdgeTextDrawingWhileZooming:{default:!1,type:"boolean"},skipNodeDrawingWhilePanning:{default:!1,type:"boolean"},skipEdgeDrawingWhilePanning:{default:!1,type:"boolean"},skipNodeTextDrawingWhilePanning:{default:!1,type:"boolean"},skipEdgeTextDrawingWhilePanning:{default:!1,type:"boolean"},cameraFixDuration:{default:500,type:"positive",values:[null]},skipNodeDrawingWhileRotating:{default:!1,type:"boolean"},skipEdgeDrawingWhileRotating:{default:!1,type:"boolean"},skipNodeTextDrawingWhileRotating:{default:!1,type:"boolean"},skipEdgeTextDrawingWhileRotating:{default:!1,type:"boolean"},skipNodeDrawingWhileGesture:{default:!1,type:"boolean"},skipEdgeDrawingWhileGesture:{default:!1,type:"boolean"},skipNodeTextDrawingWhileGesture:{default:!1,type:"boolean"},skipEdgeTextDrawingWhileGesture:{default:!1,type:"boolean"}},d=["skipNodeDrawingWhilePanning","skipEdgeDrawingWhilePanning","skipNodeTextDrawingWhilePanning","skipEdgeTextDrawingWhilePanning"],u=["skipNodeDrawingWhileRotating","skipEdgeDrawingWhileRotating","skipNodeTextDrawingWhileRotating","skipEdgeTextDrawingWhileRotating"],l=["skipNodeDrawingWhileZooming","skipEdgeDrawingWhileZooming","skipNodeTextDrawingWhileZooming","skipEdgeTextDrawingWhileZooming"],h=["skipNodeDrawingWhileGesture","skipEdgeDrawingWhileGesture","skipNodeTextDrawingWhileGesture","skipEdgeTextDrawingWhileGesture"];t.settings=a,t.dependencies=["mouse","touch","render","keyboard","camera","drawing","texts","locate","exclusives"],s.modules.cameraInteractions=t}.call(),function(){function e(e){return void 0===e||"string"==typeof e}function t(e){return void 0===e||"number"==typeof e&&e>=0}function n(e){return void 0===e||"string"==typeof e&&0!==i.colors.getIndex(e)}var i=$global.Ogma;$global.design.icon={nodeAttributes:["design.icon.content","design.icon.font","design.icon.color","design.icon.scale"],save:function(e,t,n){for(var i=e._graph.attributes(t),r=i["icon.content"],o=i["icon.font"],s=i["icon.color"],a=i["icon.scale"],d=i["design.icon.content"],u=i["design.icon.font"],l=i["design.icon.color"],h=i["design.icon.scale"],c=0,g=n.length;c<g;++c){var f=n[c].__index;d[f]=r[f],u[f]=o[f],l[f]=s[f],h[f]=a[f]}},restore:function(e,t,n){for(var i=e._graph.attributes(t),r=i["icon.content"],o=i["icon.font"],s=i["icon.color"],a=i["icon.scale"],d=i["design.icon.content"],u=i["design.icon.font"],l=i["design.icon.color"],h=i["design.icon.scale"],c=0,g=n.length;c<g;++c){var f=n[c].__index;r[f]=d[f],o[f]=u[f],s[f]=l[f],a[f]=h[f]}},checkParameters:function(i){var r=i.scheme;if(!$isObj(r))throw new TypeError("invalid icon scheme: "+JSON.stringify(r)+" is not an object");for(var o=Object.keys(r),s=0;s<o.length;++s){var a=o[s],d=r[a];if("string"==typeof d);else{if(!$isObj(d))throw new TypeError("in icon scheme for value "+a+": "+JSON.stringify(d)+" is not an object");if("string"!=typeof d.content)throw new TypeError("in icon scheme for value "+a+": icon content "+JSON.stringify(d.content)+" is not a string");if(!t(d.scale))throw new TypeError("in icon scheme for value "+a+": icon scale "+JSON.stringify(d.scale)+" is not a positive number");if(!e(d.font))throw new TypeError("in icon scheme for value "+a+": icon font "+JSON.stringify(d.font)+" is not a string");if(!n(d.color))throw new TypeError("in icon scheme for value "+a+": icon color "+JSON.stringify(d.color)+" is not a color")}}},styleByFunction:function(e,t,n){var i=e._graph.attributes(t);return function(e){for(var t=i["icon.content"],r=i["icon.font"],o=i["icon.color"],s=i["icon.scale"],a=0,d=e.length;a<d;++a){var u=e[a],l=u.__index,h=n(u),c=void 0,g=void 0,f=void 0,p=void 0,y=void 0===h?"undefined":_typeof(h);"string"===y?c=h:"object"===y&&(c=h.content,p=h.font,g=h.scale,f=h.color),t[l]=c,s[l]=g,o[l]=f,r[l]=p}}},styleByParameters:function(e,t,n){var r={},o=n.variable,s=e._graph.attributes(t),a=$global.selectFromScheme;i.utils.forEach(n.scheme,function(e,t){var n=void 0,i=void 0,o=void 0,s=void 0,a=void 0===e?"undefined":_typeof(e);"string"===a?n=e:"object"===a&&(n=e.content,s=e.font,i=e.scale,o=e.color),r[t]=[n,i,o,s]});var d=[];return function(e){for(var t=s["icon.content"],n=s["icon.font"],u=s["icon.color"],l=s["icon.scale"],h=0,c=e.length;h<c;++h){var g=e[h],f=g.__index,p=i.utils.strToObjectRef(g,o),y=a(r,p)||d;t[f]=y[0],l[f]=y[1],u[f]=y[2],n[f]=y[3]}}}}}(),function(e){function t(t){return t===e||"number"==typeof t&&t>=0}var n=$global.Ogma;$global.design.size={nodeAttributes:["design.size"],edgeAttributes:["design.size"],save:function(e,t,n){for(var i=e._graph.attributes(t),r=i.size,o=i["design.size"],s=0,a=n.length;s<a;++s){var d=n[s].__index;o[d]=r[d]}},restore:function(e,t,n){var i=e._graph.attributes(t),r=i.size,o=i["design.size"],s=t?"nodeSizeWatcher":"edgeSizeWatcher";e[s]&&(e[s]=e[s].kill());for(var a=0,d=n.length;a<d;++a){var u=n[a].__index;r[u]=o[u]}},checkParameters:function(i){if(i.stops!==e||i.sizes!==e){if(n.utils.checkNumberArray(i.stops,1,"stop value"),n.utils.checkNumberArray(i.sizes,1,"target size",!0),i.sizes.length-i.stops.length!=1)throw new Error("the target sizes should contain exactly one more value than the stops")}else{if(!t(i.min))throw new TypeError("invalid minimum size "+JSON.stringify(i.min)+": expected positive number");if(!t(i.max))throw new TypeError("invalid maximum size "+JSON.stringify(i.max)+": expected positive number");if(!(i.min===e&&i.max===e||i.max>=i.min))throw new Error("invalid bounds "+JSON.stringify(i.min)+" (min) and "+JSON.stringify(i.max)+" (max): expected max >= min");if(!t(i.bins)||0===i.bins)throw new TypeError("invalid number of bins "+JSON.stringify(i.bins)+": expected positive number")}if(void 0!==i.transformation&&"function"!=typeof i.transformation)throw new TypeError("invalid transformation function "+JSON.stringify(i.transformation))},styleByFunction:function(e,t,n){var i=e._graph.attributes(t);return e._sizeWatcher=null,function(e){for(var t=i.size,r=0,o=e.length;r<o;++r){var s=e[r],a=s.__index,d=n(s);t[a]=+d}}},styleByParameters:function(t,i,r,o){var s=r.variable,a=t._graph.attributes(i),d=i?"nodeSizeWatcher":"edgeSizeWatcher",u=t._watcher.watchProperty(i,s,function(){t[d]=u.kill(),o(t,i,"size",r,!0)});t[d]=u;var l=r.transformation||function(e){return e},h=r.bins||t._settings.defaultSizeBins,c=l(u.min),g=l(u.max);if(c>g){var f=c;c=g,g=f}if(r.stops!==e)var p=r.stops,y=p.length,v=r.sizes;else if(r.min!==e&&r.max!==e)var m=!0,_=r.min,b=r.max,x=b-_,w=n.utils.computeRange(_,b,h),A=g-c;var E=t._settingsModule.get("drawing")[i?"defaultNodeSize":"defaultEdgeSize"];return function(e){for(var t=a.size,i=0,r=e.length;i<r;++i){var o=e[i],d=o.__index,u=+n.utils.strToObjectRef(o,s);if(isNaN(u))t[d]=E;else if(u=l(u),p){for(var h=0;h!==y&&u>p[h];)h+=1;t[d]=v[h]}else if(m){var g=(u-c)/A;t[d]=n.utils.closestValue(w,_+g*x)}else t[d]=u}}}}}.call(),function(){$global.Ogma,$global.design.text={nodeAttributes:["design.text"],edgeAttributes:["design.text"],save:function(e,t,n){for(var i=e._graph.attributes(t),r=i.text,o=i["design.text"],s=0,a=n.length;s<a;++s){var d=n[s].__index;o[d]=r[d]}},restore:function(e,t,n){for(var i=e._graph.attributes(t),r=i.text,o=i["design.text"],s=0,a=n.length;s<a;++s){var d=n[s].__index;r[d]=o[d]}},styleByFunction:function(e,t,n){var i=e._graph.attributes(t);return function(e){for(var t=i.text,r=0,o=e.length;r<o;++r){var s=e[r],a=s.__index,d=n(s);t[a]=d}}}}}(),function(){function e(e){return void 0===e||"string"==typeof e&&0!==t.colors.getIndex(e)}var t=$global.Ogma,n=$isObj;$global.design.color={nodeAttributes:["design.color","design.colors"],edgeAttributes:["design.color"],save:function(e,t,n){for(var i=e._graph.attributes(t),r=i.color,o=i.colors,s=i["design.color"],a=i["design.colors"],d=0,u=n.length;d<u;++d){var l=n[d].__index;s[l]=r[l],t&&(a[l]=o[l])}},restore:function(e,t,n){var i=e._graph.attributes(t),r=i.color,o=i.colors,s=i["design.color"],a=i["design.colors"],d=t?"nodeColorWatcher":"edgeColorWatcher";e[t?"_nodeColorScheme":"_edgeColorScheme"]=null,e[d]&&(e[d]=e[d].kill());for(var u=0,l=n.length;u<l;++u){var h=n[u].__index;r[h]=s[h],t&&(o[h]=a[h])}},checkParameters:function(i,r,o){var s=i.scheme;if(void 0===s&&r[o?"_nodeReserveColors":"_edgeReserveColors"]);else if(s instanceof Array){if(0===s.length)throw new TypeError("empty quantitative color scheme");for(var a=0;a<s.length;++a){var d=s[a];if(!e(d))throw new TypeError("invalid color scheme: "+JSON.stringify(d)+" is not a color")}}else{if(!n(s))throw new TypeError("invalid color scheme: "+JSON.stringify(s)+" is not an object");var u=Object.keys(s);for(a=0;a<u.length;++a){var l=u[a];if(d=s[l],!e(d))throw new TypeError("in color scheme for value "+l+": "+JSON.stringify(d)+" is not a color")}}if(void 0!==i.stops&&(t.utils.checkNumberArray(i.stops,1,"stop value"),i.scheme.length-i.stops.length!=1))throw new Error("the scheme should contain exactly one more value than the stops");if(void 0!==i.transformation&&"function"!=typeof i.transformation)throw new TypeError("invalid transformation function "+JSON.stringify(i.transformation))},styleByFunction:function(e,t,n){var i=e._graph.attributes(t);return e._colorWatcher=null,function(e){for(var t=i.color,r=i.colors,o=0,s=e.length;o<s;++o){var a=e[o],d=a.__index,u=n(a);a instanceof Array?(t[d]=u,r[d]=void 0):(r[d]=u,t[d]=void 0)}}},styleByParameters:function(e,n,i,r){var o=i.scheme||{},s=!(o instanceof Array),a=i.variable,d=e._graph.attributes(n);if(s){var u=e[n?"_nodeReserveColors":"_edgeReserveColors"],l=t.utils.deepCopy(o),h=0;e[n?"_nodeColorScheme":"_edgeColorScheme"]=l;var c=function(e){if(void 0!==e){var t=l[e];return!t&&u?(t=u[h],l[e]=t,h=(h+1)%u.length):void 0===t&&(t=void 0),t}}}else{var g=n?"nodeColorWatcher":"edgeColorWatcher",f=e._watcher.watchProperty(n,i.variable,function(){e[g]=f.kill(),r(e,n,"color",i,!0)});e[g]=f;var p=i.transformation||function(e){return e},y=o.length,v=p(f.min),m=p(f.max);if(v>m){var _=v;v=m,m=_}if(void 0!==i.stops){var b=i.stops,x=b.length,w=t.utils.deepCopy(i.scheme);i.reverse&&w.reverse()}else{var A=t.utils.computeRange(v,m,y),E=!!i.reverse;l={};for(var C=0;C<A.length;++C){var S=t.utils.findFunctionParameter(p,A[C],f.min,f.max,v/1e3);l[S]=o[E?y-C-1:C]}e[n?"_nodeColorScheme":"_edgeColorScheme"]=l}}return function(e){for(var i=d.color,r=d.colors,u=0,l=e.length;u<l;++u){var h=e[u],g=h.__index,f=t.utils.strToObjectRef(h,a);if(s){if(f instanceof Array){if(n&&!(f.length<2)){for(var v=[],m=0;m<f.length;++m){var _=c(f[m]);_&&v.push(_)}v.length>1?(r[g]=v,i[g]=void 0):(i[g]=v[0],r[g]=void 0);continue}f=f[0]}i[g]=c(f)}else if("number"!=typeof f)i[g]=void 0;else if(f=p(f),b){for(var C=0;C!==x&&f>b[C];)C+=1;i[g]=w[C]}else{var S=t.utils.closestValue(A,f,!0);i[g]=o[E?y-S-1:S]}n&&(r[g]=void 0)}}}}}(),function(){function e(e){return void 0===e||"boolean"==typeof e}function t(e){return void 0===e||"number"==typeof e&&e>=0}var n=$global.Ogma;$global.design.image={nodeAttributes:["design.image.url","design.image.scale","design.image.rescale","design.image.duplicate"],save:function(e,t,n){for(var i=e._graph.attributes(t),r=i["image.url"],o=i["image.rescale"],s=i["image.duplicate"],a=i["image.scale"],d=i["design.image.url"],u=i["design.image.rescale"],l=i["design.image.duplicate"],h=i["design.image.scale"],c=0,g=n.length;c<g;++c){var f=n[c].__index;d[f]=r[f],u[f]=o[f],l[f]=s[f],h[f]=a[f]}},restore:function(e,t,n){for(var i=e._graph.attributes(t),r=i["image.url"],o=i["image.rescale"],s=i["image.duplicate"],a=i["image.scale"],d=i["design.image.url"],u=i["design.image.rescale"],l=i["design.image.duplicate"],h=i["design.image.scale"],c=0,g=n.length;c<g;++c){var f=n[c].__index;r[f]=d[f],o[f]=u[f],s[f]=l[f],a[f]=h[f]}},checkParameters:function(n){var i=n.scheme;if(!$isObj(i))throw new TypeError("invalid image scheme: "+JSON.stringify(i)+" is not an object");for(var r=Object.keys(i),o=0;o<r.length;++o){var s=r[o],a=i[s];if("string"==typeof a);else{if(!$isObj(a))throw new TypeError("in image scheme for value "+s+": "+JSON.stringify(a)+" is not an object");if("string"!=typeof a.url)throw new TypeError("in image scheme for value "+s+": image url "+JSON.stringify(a.url)+" is not a string");if(!t(a.scale))throw new TypeError("in image scheme for value "+s+": image scale "+JSON.stringify(a.scale)+" is not a positive number");if(!e(a.rescale))throw new TypeError("in image scheme for value "+s+": image rescale "+JSON.stringify(a.rescale)+" is not a boolean");if(!e(a.duplicate))throw new TypeError("in image scheme for value "+s+": image duplicate "+JSON.stringify(a.duplicate)+" is not a boolean")}}},styleByFunction:function(e,t,n){var i=e._graph.attributes(t);return function(e){for(var t=i["image.url"],r=i["image.rescale"],o=i["image.duplicate"],s=i["image.scale"],a=0,d=e.length;a<d;++a){var u=e[a],l=u.__index,h=n(u),c=void 0,g=void 0,f=void 0,p=void 0,y=void 0===h?"undefined":_typeof(h);"string"===y?c=h:"object"===y&&(c=h.url,p=h.rescale,g=h.scale,f=h.duplicate),t[l]=c,s[l]=g,o[l]=f,r[l]=p}}},styleByParameters:function(e,t,i){var r={},o=i.variable,s=e._graph.attributes(t),a=$global.selectFromScheme;n.utils.forEach(i.scheme,function(e,t){var n=void 0,i=void 0,o=void 0,s=void 0,a=void 0===e?"undefined":_typeof(e);"string"===a?n=e:"object"===a&&(n=e.url,s=e.rescale,i=e.scale,o=e.duplicate),r[t]=[n,i,o,s]});var d=[];return function(e){for(var t=s["image.url"],i=s["image.rescale"],u=s["image.duplicate"],l=s["image.scale"],h=0,c=e.length;h<c;++h){var g=e[h],f=g.__index,p=n.utils.strToObjectRef(g,o),y=a(r,p)||d;t[f]=y[0],l[f]=y[1],u[f]=y[2],i[f]=y[3]}}}}}(),function(){var e=$global.Ogma;$global.design.shape={nodeAttributes:["design.shape"],edgeAttributes:["design.shape"],save:function(e,t,n){for(var i=e._graph.attributes(t),r=i.shape,o=i["design.shape"],s=0,a=n.length;s<a;++s){var d=n[s].__index;o[d]=r[d]}},restore:function(e,t,n){for(var i=e._graph.attributes(t),r=i.shape,o=i["design.shape"],s=0,a=n.length;s<a;++s){var d=n[s].__index;r[d]=o[d]}},checkParameters:function(t,n,i){var r=t.scheme;if(!$isObj(r))throw new TypeError("invalid shape scheme: "+JSON.stringify(r)+" is not an object");for(var o=Object.keys(r),s=Object.keys(e.shapes[i?"nodes":"edges"]),a=0;a<o.length;++a){var d=o[a],u=r[d];if(-1===s.indexOf(u))throw new TypeError("in shape scheme for value "+d+": "+JSON.stringify(u)+" is not a valid shape (available: "+JSON.stringify(s)+")")}},styleByFunction:function(e,t,n){var i=e._graph.attributes(t);return function(e){for(var t=i.size,r=0,o=e.length;r<o;++r){var s=e[r],a=s.__index,d=n(s);t[a]=d}}},styleByParameters:function(t,n,i){var r=i.scheme,o=i.variable,s=t._graph.attributes(n),a=$global.selectFromScheme;return function(t){for(var n=s.shape,i=0,d=t.length;i<d;++i){var u=t[i],l=u.__index,h=e.utils.strToObjectRef(u,o);n[l]=a(r,h)}}}}}(),function(e){function t(e){if(this._dagre=n.require("dagre",{variable:"dagre"}),!this._dagre||!this._dagre.graphlib)throw new Error("to use the dagre plugin, please include lib/dagre.min.js");this._graph=e.graph,this._drawing=e.drawing,this._settings=e.settings.get("dagre"),this.running=!1}var n=$global.Ogma;t.settings={defaultDirected:{default:!0,type:"boolean"},defaultMultigraph:{default:!0,type:"boolean"},defaultCompound:{default:!1,type:"boolean"},defaultRankDir:{default:"TB",values:["TB","BT","LR","RL"]},defaultDuration:{default:0,type:"positive"},maxNbEdges:{default:500,type:"positive"},maxNbNodes:{default:500,type:"positive"}},t.isPlugin=!0,t.prototype.start=function(e,t){if(this.running)return!1;var n=this._graph.nodes.length,i=this._graph.edges.length,r=this._settings.maxNbNodes,o=this._settings.maxNbEdges;if(r&&n>r)throw new Error("Unable to run dagre layout: the graph has "+n+" nodes (maximum allowed: "+r+")");if(o&&i>o)throw new Error("Unable to run dagre layout: the graph has "+i+" edges (maximum allowed: "+o+")");e=e||{},t=t||{},e.directed=$or(e.directed,this._settings.defaultDirected),e.multigraph=$or(e.multigraph,this._settings.defaultMultigraph),e.compound=$or(e.compound,this._settings.defaultCompound),e.rankdir=$or(e.rankdir,this._settings.defaultRankDir),this.config=e,this.duration=$or(t.duration||this._settings.defaultDuration),this.callback=t.onEnd,this.running=!0;var s=new this._dagre.graphlib.Graph({directed:e.directed,multigraph:e.multigraph,compound:e.compound});s.setGraph(e);for(var a=this.nodes||this._graph.getNodeList(),d=0;d<a.length;d++)a[d].fixed||s.setNode(a[d].id,{});var u=this._graph.getEdgeList();for(d=0;d<u.length;d++)null!=s.node(u[d].source)&&null!=s.node(u[d].target)&&s.setEdge(u[d].source,u[d].target,{id:u[d].id});return this._dagre.layout(s),this._dg=s,this.stop(),!0},t.prototype.stop=function(){var e=this._dg,t=this;e&&(this.running=!1,this._drawing.animate(function(){var n=t._graph.nodeAttributes,i=n.x,r=n.y;e.nodes().forEach(function(n){var o=t._graph.getNode(n),s=o.__index;i[s]=e.node(n).x,r[s]=e.node(n).y}),t._drawing.redrawEverything()},this.duration,this.callback))},t.prototype.isRunning=function(){return this.running},n.modules.dagre=t}.call(),function(e){function t(e){this._neo4j=r.require("neo4j-driver",{variable:"neo4j"}),this._graph=e.graph,this._connected=!1,this._driver=null}function n(e){if("object"===(void 0===e?"undefined":_typeof(e))&&null!==e){for(var t=Object.keys(e.properties),n=0;n<t.length;n++){var i=t[n],r=e.properties[i];"object"===(void 0===r?"undefined":_typeof(r))&&"high"in r&&"low"in r&&(r=r.low)}e.identity=e.identity.low,"start"in e&&"end"in e&&(e.start=e.start.low,e.end=e.end.low)}}function i(e,t){var i={nodes:[],edges:[]},o=new r.utils.Set,s=new r.utils.Set;return t.records.forEach(function(t){t._fields.forEach(function(t){t&&(n(t),"start"in t||"end"in t||"type"in t?e._graph.getEdge(t.identity)||s.has(t.identity)||(i.edges.push({id:t.identity,text:t.identity.toString(),source:t.start,target:t.end,data:{neo4jType:t.type,neo4jProperties:t.properties}}),s.add(t.identity)):e._graph.getNode(t.identity)||o.has(t.identity)||(i.nodes.push({id:t.identity,text:t.identity.toString(),x:100*Math.random(),y:100*Math.random(),data:{neo4jLabels:t.labels,neo4jProperties:t.properties}}),o.add(t.identity)))})}),i}var r=$global.Ogma;t.dependencies=["graph"],t.isPlugin=!0,t.onStart=function(e,t){t.neo4j&&e.connect(t.neo4j.url,t.neo4j.username,t.neo4j.password)},t.prototype.connect=function(e,t,n){0!==e.indexOf("bolt://")&&(e="bolt://"+e),this._driver=this._neo4j.v1.driver(e,this._neo4j.v1.auth.basic(t,n)),this._connected=!0},t.prototype.query=function(e,t){var n=this;return new Promise(function(r,o){if(!n._connected)throw new Error('please call the "connect" function before');var s=n._driver.session(),a=n;s.run(e).then(function(e){var n=i(a,e);a._graph.addNodes(n.nodes),a._graph.addEdges(n.edges),s.close(),t&&t(e),r(e)}).catch(function(e){o(e)})})},r.modules.neo4j=t}.call(),$global.Ogma}()}).call(exports,__webpack_require__(34).setImmediate,__webpack_require__(1),__webpack_require__(33)(module))}],[15]);
//# sourceMappingURL=app.450cb40016e919970de6.js.map